(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function s(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=s(u);fetch(u.href,d)}})();function Ip(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var yu={exports:{}},rs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jh;function Oy(){if(Jh)return rs;Jh=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(o,u,d){var m=null;if(d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),"key"in u){d={};for(var y in u)y!=="key"&&(d[y]=u[y])}else d=u;return u=d.ref,{$$typeof:l,type:o,key:m,ref:u!==void 0?u:null,props:d}}return rs.Fragment=t,rs.jsx=s,rs.jsxs=s,rs}var Qh;function Yy(){return Qh||(Qh=1,yu.exports=Oy()),yu.exports}var r=Yy(),xu={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh;function Ky(){if(Xh)return ye;Xh=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),m=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),N=Symbol.iterator;function C(R){return R===null||typeof R!="object"?null:(R=N&&R[N]||R["@@iterator"],typeof R=="function"?R:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,j={};function A(R,J,ie){this.props=R,this.context=J,this.refs=j,this.updater=ie||_}A.prototype.isReactComponent={},A.prototype.setState=function(R,J){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,J,"setState")},A.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function H(){}H.prototype=A.prototype;function q(R,J,ie){this.props=R,this.context=J,this.refs=j,this.updater=ie||_}var G=q.prototype=new H;G.constructor=q,E(G,A.prototype),G.isPureReactComponent=!0;var P=Array.isArray;function V(){}var k={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function Z(R,J,ie){var te=ie.ref;return{$$typeof:l,type:R,key:J,ref:te!==void 0?te:null,props:ie}}function se(R,J){return Z(R.type,J,R.props)}function I(R){return typeof R=="object"&&R!==null&&R.$$typeof===l}function D(R){var J={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ie){return J[ie]})}var F=/\/+/g;function le(R,J){return typeof R=="object"&&R!==null&&R.key!=null?D(""+R.key):J.toString(36)}function oe(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(V,V):(R.status="pending",R.then(function(J){R.status==="pending"&&(R.status="fulfilled",R.value=J)},function(J){R.status==="pending"&&(R.status="rejected",R.reason=J)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function O(R,J,ie,te,de){var pe=typeof R;(pe==="undefined"||pe==="boolean")&&(R=null);var Ce=!1;if(R===null)Ce=!0;else switch(pe){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(R.$$typeof){case l:case t:Ce=!0;break;case v:return Ce=R._init,O(Ce(R._payload),J,ie,te,de)}}if(Ce)return de=de(R),Ce=te===""?"."+le(R,0):te,P(de)?(ie="",Ce!=null&&(ie=Ce.replace(F,"$&/")+"/"),O(de,J,ie,"",function(Pt){return Pt})):de!=null&&(I(de)&&(de=se(de,ie+(de.key==null||R&&R.key===de.key?"":(""+de.key).replace(F,"$&/")+"/")+Ce)),J.push(de)),1;Ce=0;var Oe=te===""?".":te+":";if(P(R))for(var Ge=0;Ge<R.length;Ge++)te=R[Ge],pe=Oe+le(te,Ge),Ce+=O(te,J,ie,pe,de);else if(Ge=C(R),typeof Ge=="function")for(R=Ge.call(R),Ge=0;!(te=R.next()).done;)te=te.value,pe=Oe+le(te,Ge++),Ce+=O(te,J,ie,pe,de);else if(pe==="object"){if(typeof R.then=="function")return O(oe(R),J,ie,te,de);throw J=String(R),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function ee(R,J,ie){if(R==null)return R;var te=[],de=0;return O(R,te,"","",function(pe){return J.call(ie,pe,de++)}),te}function ne(R){if(R._status===-1){var J=R._result;J=J(),J.then(function(ie){(R._status===0||R._status===-1)&&(R._status=1,R._result=ie)},function(ie){(R._status===0||R._status===-1)&&(R._status=2,R._result=ie)}),R._status===-1&&(R._status=0,R._result=J)}if(R._status===1)return R._result.default;throw R._result}var ue=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},me={map:ee,forEach:function(R,J,ie){ee(R,function(){J.apply(this,arguments)},ie)},count:function(R){var J=0;return ee(R,function(){J++}),J},toArray:function(R){return ee(R,function(J){return J})||[]},only:function(R){if(!I(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return ye.Activity=b,ye.Children=me,ye.Component=A,ye.Fragment=s,ye.Profiler=u,ye.PureComponent=q,ye.StrictMode=o,ye.Suspense=x,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,ye.__COMPILER_RUNTIME={__proto__:null,c:function(R){return k.H.useMemoCache(R)}},ye.cache=function(R){return function(){return R.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(R,J,ie){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var te=E({},R.props),de=R.key;if(J!=null)for(pe in J.key!==void 0&&(de=""+J.key),J)!X.call(J,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&J.ref===void 0||(te[pe]=J[pe]);var pe=arguments.length-2;if(pe===1)te.children=ie;else if(1<pe){for(var Ce=Array(pe),Oe=0;Oe<pe;Oe++)Ce[Oe]=arguments[Oe+2];te.children=Ce}return Z(R.type,de,te)},ye.createContext=function(R){return R={$$typeof:m,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:d,_context:R},R},ye.createElement=function(R,J,ie){var te,de={},pe=null;if(J!=null)for(te in J.key!==void 0&&(pe=""+J.key),J)X.call(J,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(de[te]=J[te]);var Ce=arguments.length-2;if(Ce===1)de.children=ie;else if(1<Ce){for(var Oe=Array(Ce),Ge=0;Ge<Ce;Ge++)Oe[Ge]=arguments[Ge+2];de.children=Oe}if(R&&R.defaultProps)for(te in Ce=R.defaultProps,Ce)de[te]===void 0&&(de[te]=Ce[te]);return Z(R,pe,de)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(R){return{$$typeof:y,render:R}},ye.isValidElement=I,ye.lazy=function(R){return{$$typeof:v,_payload:{_status:-1,_result:R},_init:ne}},ye.memo=function(R,J){return{$$typeof:g,type:R,compare:J===void 0?null:J}},ye.startTransition=function(R){var J=k.T,ie={};k.T=ie;try{var te=R(),de=k.S;de!==null&&de(ie,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(V,ue)}catch(pe){ue(pe)}finally{J!==null&&ie.types!==null&&(J.types=ie.types),k.T=J}},ye.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},ye.use=function(R){return k.H.use(R)},ye.useActionState=function(R,J,ie){return k.H.useActionState(R,J,ie)},ye.useCallback=function(R,J){return k.H.useCallback(R,J)},ye.useContext=function(R){return k.H.useContext(R)},ye.useDebugValue=function(){},ye.useDeferredValue=function(R,J){return k.H.useDeferredValue(R,J)},ye.useEffect=function(R,J){return k.H.useEffect(R,J)},ye.useEffectEvent=function(R){return k.H.useEffectEvent(R)},ye.useId=function(){return k.H.useId()},ye.useImperativeHandle=function(R,J,ie){return k.H.useImperativeHandle(R,J,ie)},ye.useInsertionEffect=function(R,J){return k.H.useInsertionEffect(R,J)},ye.useLayoutEffect=function(R,J){return k.H.useLayoutEffect(R,J)},ye.useMemo=function(R,J){return k.H.useMemo(R,J)},ye.useOptimistic=function(R,J){return k.H.useOptimistic(R,J)},ye.useReducer=function(R,J,ie){return k.H.useReducer(R,J,ie)},ye.useRef=function(R){return k.H.useRef(R)},ye.useState=function(R){return k.H.useState(R)},ye.useSyncExternalStore=function(R,J,ie){return k.H.useSyncExternalStore(R,J,ie)},ye.useTransition=function(){return k.H.useTransition()},ye.version="19.2.0",ye}var $h;function ku(){return $h||($h=1,xu.exports=Ky()),xu.exports}var w=ku();const Up=Ip(w);var vu={exports:{}},us={},bu={exports:{}},Tu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh;function Fy(){return Zh||(Zh=1,(function(l){function t(O,ee){var ne=O.length;O.push(ee);e:for(;0<ne;){var ue=ne-1>>>1,me=O[ue];if(0<u(me,ee))O[ue]=ee,O[ne]=me,ne=ue;else break e}}function s(O){return O.length===0?null:O[0]}function o(O){if(O.length===0)return null;var ee=O[0],ne=O.pop();if(ne!==ee){O[0]=ne;e:for(var ue=0,me=O.length,R=me>>>1;ue<R;){var J=2*(ue+1)-1,ie=O[J],te=J+1,de=O[te];if(0>u(ie,ne))te<me&&0>u(de,ie)?(O[ue]=de,O[te]=ne,ue=te):(O[ue]=ie,O[J]=ne,ue=J);else if(te<me&&0>u(de,ne))O[ue]=de,O[te]=ne,ue=te;else break e}}return ee}function u(O,ee){var ne=O.sortIndex-ee.sortIndex;return ne!==0?ne:O.id-ee.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var m=Date,y=m.now();l.unstable_now=function(){return m.now()-y}}var x=[],g=[],v=1,b=null,N=3,C=!1,_=!1,E=!1,j=!1,A=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function G(O){for(var ee=s(g);ee!==null;){if(ee.callback===null)o(g);else if(ee.startTime<=O)o(g),ee.sortIndex=ee.expirationTime,t(x,ee);else break;ee=s(g)}}function P(O){if(E=!1,G(O),!_)if(s(x)!==null)_=!0,V||(V=!0,D());else{var ee=s(g);ee!==null&&oe(P,ee.startTime-O)}}var V=!1,k=-1,X=5,Z=-1;function se(){return j?!0:!(l.unstable_now()-Z<X)}function I(){if(j=!1,V){var O=l.unstable_now();Z=O;var ee=!0;try{e:{_=!1,E&&(E=!1,H(k),k=-1),C=!0;var ne=N;try{t:{for(G(O),b=s(x);b!==null&&!(b.expirationTime>O&&se());){var ue=b.callback;if(typeof ue=="function"){b.callback=null,N=b.priorityLevel;var me=ue(b.expirationTime<=O);if(O=l.unstable_now(),typeof me=="function"){b.callback=me,G(O),ee=!0;break t}b===s(x)&&o(x),G(O)}else o(x);b=s(x)}if(b!==null)ee=!0;else{var R=s(g);R!==null&&oe(P,R.startTime-O),ee=!1}}break e}finally{b=null,N=ne,C=!1}ee=void 0}}finally{ee?D():V=!1}}}var D;if(typeof q=="function")D=function(){q(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,le=F.port2;F.port1.onmessage=I,D=function(){le.postMessage(null)}}else D=function(){A(I,0)};function oe(O,ee){k=A(function(){O(l.unstable_now())},ee)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(O){O.callback=null},l.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<O?Math.floor(1e3/O):5},l.unstable_getCurrentPriorityLevel=function(){return N},l.unstable_next=function(O){switch(N){case 1:case 2:case 3:var ee=3;break;default:ee=N}var ne=N;N=ee;try{return O()}finally{N=ne}},l.unstable_requestPaint=function(){j=!0},l.unstable_runWithPriority=function(O,ee){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ne=N;N=O;try{return ee()}finally{N=ne}},l.unstable_scheduleCallback=function(O,ee,ne){var ue=l.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ue+ne:ue):ne=ue,O){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ne+me,O={id:v++,callback:ee,priorityLevel:O,startTime:ne,expirationTime:me,sortIndex:-1},ne>ue?(O.sortIndex=ne,t(g,O),s(x)===null&&O===s(g)&&(E?(H(k),k=-1):E=!0,oe(P,ne-ue))):(O.sortIndex=me,t(x,O),_||C||(_=!0,V||(V=!0,D()))),O},l.unstable_shouldYield=se,l.unstable_wrapCallback=function(O){var ee=N;return function(){var ne=N;N=ee;try{return O.apply(this,arguments)}finally{N=ne}}}})(Tu)),Tu}var Wh;function Jy(){return Wh||(Wh=1,bu.exports=Fy()),bu.exports}var Nu={exports:{}},at={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function Qy(){if(em)return at;em=1;var l=ku();function t(x){var g="https://react.dev/errors/"+x;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+x+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(x,g,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:x,containerInfo:g,implementation:v}}var m=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(x,g){if(x==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return at.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,at.createPortal=function(x,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return d(x,g,null,v)},at.flushSync=function(x){var g=m.T,v=o.p;try{if(m.T=null,o.p=2,x)return x()}finally{m.T=g,o.p=v,o.d.f()}},at.preconnect=function(x,g){typeof x=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(x,g))},at.prefetchDNS=function(x){typeof x=="string"&&o.d.D(x)},at.preinit=function(x,g){if(typeof x=="string"&&g&&typeof g.as=="string"){var v=g.as,b=y(v,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?o.d.S(x,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:N,fetchPriority:C}):v==="script"&&o.d.X(x,{crossOrigin:b,integrity:N,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},at.preinitModule=function(x,g){if(typeof x=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=y(g.as,g.crossOrigin);o.d.M(x,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(x)},at.preload=function(x,g){if(typeof x=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,b=y(v,g.crossOrigin);o.d.L(x,v,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},at.preloadModule=function(x,g){if(typeof x=="string")if(g){var v=y(g.as,g.crossOrigin);o.d.m(x,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(x)},at.requestFormReset=function(x){o.d.r(x)},at.unstable_batchedUpdates=function(x,g){return x(g)},at.useFormState=function(x,g,v){return m.H.useFormState(x,g,v)},at.useFormStatus=function(){return m.H.useHostTransitionStatus()},at.version="19.2.0",at}var tm;function Xy(){if(tm)return Nu.exports;tm=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),Nu.exports=Qy(),Nu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm;function $y(){if(nm)return us;nm=1;var l=Jy(),t=ku(),s=Xy();function o(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function m(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function x(e){if(d(e)!==e)throw Error(o(188))}function g(e){var n=e.alternate;if(!n){if(n=d(e),n===null)throw Error(o(188));return n!==e?null:e}for(var i=e,a=n;;){var f=i.return;if(f===null)break;var p=f.alternate;if(p===null){if(a=f.return,a!==null){i=a;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===i)return x(f),e;if(p===a)return x(f),n;p=p.sibling}throw Error(o(188))}if(i.return!==a.return)i=f,a=p;else{for(var T=!1,S=f.child;S;){if(S===i){T=!0,i=f,a=p;break}if(S===a){T=!0,a=f,i=p;break}S=S.sibling}if(!T){for(S=p.child;S;){if(S===i){T=!0,i=p,a=f;break}if(S===a){T=!0,a=p,i=f;break}S=S.sibling}if(!T)throw Error(o(189))}}if(i.alternate!==a)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:n}function v(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=v(e),n!==null)return n;e=e.sibling}return null}var b=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),q=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function D(e){return e===null||typeof e!="object"?null:(e=I&&e[I]||e["@@iterator"],typeof e=="function"?e:null)}var F=Symbol.for("react.client.reference");function le(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===F?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case A:return"Profiler";case j:return"StrictMode";case P:return"Suspense";case V:return"SuspenseList";case Z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case q:return e.displayName||"Context";case H:return(e._context.displayName||"Context")+".Consumer";case G:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return n=e.displayName||null,n!==null?n:le(e.type)||"Memo";case X:n=e._payload,e=e._init;try{return le(e(n))}catch{}}return null}var oe=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},ue=[],me=-1;function R(e){return{current:e}}function J(e){0>me||(e.current=ue[me],ue[me]=null,me--)}function ie(e,n){me++,ue[me]=e.current,e.current=n}var te=R(null),de=R(null),pe=R(null),Ce=R(null);function Oe(e,n){switch(ie(pe,n),ie(de,e),ie(te,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?yh(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=yh(n),e=xh(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(te),ie(te,e)}function Ge(){J(te),J(de),J(pe)}function Pt(e){e.memoizedState!==null&&ie(Ce,e);var n=te.current,i=xh(n,e.type);n!==i&&(ie(de,e),ie(te,i))}function zt(e){de.current===e&&(J(te),J(de)),Ce.current===e&&(J(Ce),is._currentValue=ne)}var fi,ps;function tn(e){if(fi===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);fi=n&&n[1]||"",ps=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fi+e+ps}var hi=!1;function mi(e,n){if(!e||hi)return"";hi=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(n){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(K){var Y=K}Reflect.construct(e,[],W)}else{try{W.call()}catch(K){Y=K}e.call(W.prototype)}}else{try{throw Error()}catch(K){Y=K}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=a.DetermineComponentFrameRoot(),T=p[0],S=p[1];if(T&&S){var M=T.split(`
`),z=S.split(`
`);for(f=a=0;a<M.length&&!M[a].includes("DetermineComponentFrameRoot");)a++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(a===M.length||f===z.length)for(a=M.length-1,f=z.length-1;1<=a&&0<=f&&M[a]!==z[f];)f--;for(;1<=a&&0<=f;a--,f--)if(M[a]!==z[f]){if(a!==1||f!==1)do if(a--,f--,0>f||M[a]!==z[f]){var Q=`
`+M[a].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=a&&0<=f);break}}}finally{hi=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?tn(i):""}function ia(e,n){switch(e.tag){case 26:case 27:case 5:return tn(e.type);case 16:return tn("Lazy");case 13:return e.child!==n&&n!==null?tn("Suspense Fallback"):tn("Suspense");case 19:return tn("SuspenseList");case 0:case 15:return mi(e.type,!1);case 11:return mi(e.type.render,!1);case 1:return mi(e.type,!0);case 31:return tn("Activity");default:return""}}function gs(e){try{var n="",i=null;do n+=ia(e,i),i=e,e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var pi=Object.prototype.hasOwnProperty,gi=l.unstable_scheduleCallback,vl=l.unstable_cancelCallback,ys=l.unstable_shouldYield,xs=l.unstable_requestPaint,ut=l.unstable_now,ge=l.unstable_getCurrentPriorityLevel,De=l.unstable_ImmediatePriority,Pe=l.unstable_UserBlockingPriority,wt=l.unstable_NormalPriority,nn=l.unstable_LowPriority,Dt=l.unstable_IdlePriority,vs=l.log,bs=l.unstable_setDisableYieldValue,Sn=null,ct=null;function Jt(e){if(typeof vs=="function"&&bs(e),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(Sn,e)}catch{}}var Tt=Math.clz32?Math.clz32:Dg,Mg=Math.log,wg=Math.LN2;function Dg(e){return e>>>=0,e===0?32:31-(Mg(e)/wg|0)|0}var Ts=256,Ns=262144,Ss=4194304;function Zn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Cs(e,n,i){var a=e.pendingLanes;if(a===0)return 0;var f=0,p=e.suspendedLanes,T=e.pingedLanes;e=e.warmLanes;var S=a&134217727;return S!==0?(a=S&~p,a!==0?f=Zn(a):(T&=S,T!==0?f=Zn(T):i||(i=S&~e,i!==0&&(f=Zn(i))))):(S=a&~p,S!==0?f=Zn(S):T!==0?f=Zn(T):i||(i=a&~e,i!==0&&(f=Zn(i)))),f===0?0:n!==0&&n!==f&&(n&p)===0&&(p=f&-f,i=n&-n,p>=i||p===32&&(i&4194048)!==0)?n:f}function yi(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Rg(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $u(){var e=Ss;return Ss<<=1,(Ss&62914560)===0&&(Ss=4194304),e}function sa(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function xi(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ig(e,n,i,a,f,p){var T=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var S=e.entanglements,M=e.expirationTimes,z=e.hiddenUpdates;for(i=T&~i;0<i;){var Q=31-Tt(i),W=1<<Q;S[Q]=0,M[Q]=-1;var Y=z[Q];if(Y!==null)for(z[Q]=null,Q=0;Q<Y.length;Q++){var K=Y[Q];K!==null&&(K.lane&=-536870913)}i&=~W}a!==0&&Zu(e,a,0),p!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=p&~(T&~n))}function Zu(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var a=31-Tt(n);e.entangledLanes|=n,e.entanglements[a]=e.entanglements[a]|1073741824|i&261930}function Wu(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var a=31-Tt(i),f=1<<a;f&n|e[a]&n&&(e[a]|=n),i&=~f}}function ec(e,n){var i=n&-n;return i=(i&42)!==0?1:oa(i),(i&(e.suspendedLanes|n))!==0?0:i}function oa(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function aa(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function tc(){var e=ee.p;return e!==0?e:(e=window.event,e===void 0?32:Bh(e.type))}function nc(e,n){var i=ee.p;try{return ee.p=e,n()}finally{ee.p=i}}var Cn=Math.random().toString(36).slice(2),nt="__reactFiber$"+Cn,ht="__reactProps$"+Cn,bl="__reactContainer$"+Cn,ra="__reactEvents$"+Cn,Ug="__reactListeners$"+Cn,jg="__reactHandles$"+Cn,lc="__reactResources$"+Cn,vi="__reactMarker$"+Cn;function ua(e){delete e[nt],delete e[ht],delete e[ra],delete e[Ug],delete e[jg]}function Tl(e){var n=e[nt];if(n)return n;for(var i=e.parentNode;i;){if(n=i[bl]||i[nt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Ah(e);e!==null;){if(i=e[nt])return i;e=Ah(e)}return n}e=i,i=e.parentNode}return null}function Nl(e){if(e=e[nt]||e[bl]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function bi(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(o(33))}function Sl(e){var n=e[lc];return n||(n=e[lc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function et(e){e[vi]=!0}var ic=new Set,sc={};function Wn(e,n){Cl(e,n),Cl(e+"Capture",n)}function Cl(e,n){for(sc[e]=n,e=0;e<n.length;e++)ic.add(n[e])}var Lg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),oc={},ac={};function Hg(e){return pi.call(ac,e)?!0:pi.call(oc,e)?!1:Lg.test(e)?ac[e]=!0:(oc[e]=!0,!1)}function As(e,n,i){if(Hg(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var a=n.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function Es(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function ln(e,n,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+a)}}function Rt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rc(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function kg(e,n,i){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(T){i=""+T,p.call(this,T)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return i},setValue:function(T){i=""+T},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ca(e){if(!e._valueTracker){var n=rc(e)?"checked":"value";e._valueTracker=kg(e,n,""+e[n])}}function uc(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),a="";return e&&(a=rc(e)?e.checked?"true":"false":e.value),e=a,e!==i?(n.setValue(e),!0):!1}function _s(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Gg=/[\n"\\]/g;function It(e){return e.replace(Gg,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function da(e,n,i,a,f,p,T,S){e.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.type=T:e.removeAttribute("type"),n!=null?T==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Rt(n)):e.value!==""+Rt(n)&&(e.value=""+Rt(n)):T!=="submit"&&T!=="reset"||e.removeAttribute("value"),n!=null?fa(e,T,Rt(n)):i!=null?fa(e,T,Rt(i)):a!=null&&e.removeAttribute("value"),f==null&&p!=null&&(e.defaultChecked=!!p),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Rt(S):e.removeAttribute("name")}function cc(e,n,i,a,f,p,T,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),n!=null||i!=null){if(!(p!=="submit"&&p!=="reset"||n!=null)){ca(e);return}i=i!=null?""+Rt(i):"",n=n!=null?""+Rt(n):i,S||n===e.value||(e.value=n),e.defaultValue=n}a=a??f,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=S?e.checked:!!a,e.defaultChecked=!!a,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.name=T),ca(e)}function fa(e,n,i){n==="number"&&_s(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Al(e,n,i,a){if(e=e.options,n){n={};for(var f=0;f<i.length;f++)n["$"+i[f]]=!0;for(i=0;i<e.length;i++)f=n.hasOwnProperty("$"+e[i].value),e[i].selected!==f&&(e[i].selected=f),f&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Rt(i),n=null,f=0;f<e.length;f++){if(e[f].value===i){e[f].selected=!0,a&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function dc(e,n,i){if(n!=null&&(n=""+Rt(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Rt(i):""}function fc(e,n,i,a){if(n==null){if(a!=null){if(i!=null)throw Error(o(92));if(oe(a)){if(1<a.length)throw Error(o(93));a=a[0]}i=a}i==null&&(i=""),n=i}i=Rt(n),e.defaultValue=i,a=e.textContent,a===i&&a!==""&&a!==null&&(e.value=a),ca(e)}function El(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var qg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hc(e,n,i){var a=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?a?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":a?e.setProperty(n,i):typeof i!="number"||i===0||qg.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function mc(e,n,i){if(n!=null&&typeof n!="object")throw Error(o(62));if(e=e.style,i!=null){for(var a in i)!i.hasOwnProperty(a)||n!=null&&n.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var f in n)a=n[f],n.hasOwnProperty(f)&&i[f]!==a&&hc(e,f,a)}else for(var p in n)n.hasOwnProperty(p)&&hc(e,p,n[p])}function ha(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ms(e){return Bg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function sn(){}var ma=null;function pa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _l=null,Ml=null;function pc(e){var n=Nl(e);if(n&&(e=n.stateNode)){var i=e[ht]||null;e:switch(e=n.stateNode,n.type){case"input":if(da(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+It(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var a=i[n];if(a!==e&&a.form===e.form){var f=a[ht]||null;if(!f)throw Error(o(90));da(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<i.length;n++)a=i[n],a.form===e.form&&uc(a)}break e;case"textarea":dc(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&Al(e,!!i.multiple,n,!1)}}}var ga=!1;function gc(e,n,i){if(ga)return e(n,i);ga=!0;try{var a=e(n);return a}finally{if(ga=!1,(_l!==null||Ml!==null)&&(go(),_l&&(n=_l,e=Ml,Ml=_l=null,pc(n),e)))for(n=0;n<e.length;n++)pc(e[n])}}function Ti(e,n){var i=e.stateNode;if(i===null)return null;var a=i[ht]||null;if(a===null)return null;i=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,n,typeof i));return i}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ya=!1;if(on)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){ya=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{ya=!1}var An=null,xa=null,ws=null;function yc(){if(ws)return ws;var e,n=xa,i=n.length,a,f="value"in An?An.value:An.textContent,p=f.length;for(e=0;e<i&&n[e]===f[e];e++);var T=i-e;for(a=1;a<=T&&n[i-a]===f[p-a];a++);return ws=f.slice(e,1<a?1-a:void 0)}function Ds(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Rs(){return!0}function xc(){return!1}function mt(e){function n(i,a,f,p,T){this._reactName=i,this._targetInst=f,this.type=a,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(i=e[S],this[S]=i?i(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Rs:xc,this.isPropagationStopped=xc,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),n}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=mt(el),Si=b({},el,{view:0,detail:0}),Pg=mt(Si),va,ba,Ci,Us=b({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ci&&(Ci&&e.type==="mousemove"?(va=e.screenX-Ci.screenX,ba=e.screenY-Ci.screenY):ba=va=0,Ci=e),va)},movementY:function(e){return"movementY"in e?e.movementY:ba}}),vc=mt(Us),zg=b({},Us,{dataTransfer:0}),Og=mt(zg),Yg=b({},Si,{relatedTarget:0}),Ta=mt(Yg),Kg=b({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),Fg=mt(Kg),Jg=b({},el,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qg=mt(Jg),Xg=b({},el,{data:0}),bc=mt(Xg),$g={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Wg[e])?!!n[e]:!1}function Na(){return e0}var t0=b({},Si,{key:function(e){if(e.key){var n=$g[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(e){return e.type==="keypress"?Ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),n0=mt(t0),l0=b({},Us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tc=mt(l0),i0=b({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na}),s0=mt(i0),o0=b({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),a0=mt(o0),r0=b({},Us,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),u0=mt(r0),c0=b({},el,{newState:0,oldState:0}),d0=mt(c0),f0=[9,13,27,32],Sa=on&&"CompositionEvent"in window,Ai=null;on&&"documentMode"in document&&(Ai=document.documentMode);var h0=on&&"TextEvent"in window&&!Ai,Nc=on&&(!Sa||Ai&&8<Ai&&11>=Ai),Sc=" ",Cc=!1;function Ac(e,n){switch(e){case"keyup":return f0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ec(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wl=!1;function m0(e,n){switch(e){case"compositionend":return Ec(n);case"keypress":return n.which!==32?null:(Cc=!0,Sc);case"textInput":return e=n.data,e===Sc&&Cc?null:e;default:return null}}function p0(e,n){if(wl)return e==="compositionend"||!Sa&&Ac(e,n)?(e=yc(),ws=xa=An=null,wl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Nc&&n.locale!=="ko"?null:n.data;default:return null}}var g0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _c(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!g0[e.type]:n==="textarea"}function Mc(e,n,i,a){_l?Ml?Ml.push(a):Ml=[a]:_l=a,n=So(n,"onChange"),0<n.length&&(i=new Is("onChange","change",null,i,a),e.push({event:i,listeners:n}))}var Ei=null,_i=null;function y0(e){dh(e,0)}function js(e){var n=bi(e);if(uc(n))return e}function wc(e,n){if(e==="change")return n}var Dc=!1;if(on){var Ca;if(on){var Aa="oninput"in document;if(!Aa){var Rc=document.createElement("div");Rc.setAttribute("oninput","return;"),Aa=typeof Rc.oninput=="function"}Ca=Aa}else Ca=!1;Dc=Ca&&(!document.documentMode||9<document.documentMode)}function Ic(){Ei&&(Ei.detachEvent("onpropertychange",Uc),_i=Ei=null)}function Uc(e){if(e.propertyName==="value"&&js(_i)){var n=[];Mc(n,_i,e,pa(e)),gc(y0,n)}}function x0(e,n,i){e==="focusin"?(Ic(),Ei=n,_i=i,Ei.attachEvent("onpropertychange",Uc)):e==="focusout"&&Ic()}function v0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return js(_i)}function b0(e,n){if(e==="click")return js(n)}function T0(e,n){if(e==="input"||e==="change")return js(n)}function N0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Nt=typeof Object.is=="function"?Object.is:N0;function Mi(e,n){if(Nt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),a=Object.keys(n);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var f=i[a];if(!pi.call(n,f)||!Nt(e[f],n[f]))return!1}return!0}function jc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lc(e,n){var i=jc(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=n&&a>=n)return{node:i,offset:n-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=jc(i)}}function Hc(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Hc(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function kc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=_s(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=_s(e.document)}return n}function Ea(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var S0=on&&"documentMode"in document&&11>=document.documentMode,Dl=null,_a=null,wi=null,Ma=!1;function Gc(e,n,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ma||Dl==null||Dl!==_s(a)||(a=Dl,"selectionStart"in a&&Ea(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),wi&&Mi(wi,a)||(wi=a,a=So(_a,"onSelect"),0<a.length&&(n=new Is("onSelect","select",null,n,i),e.push({event:n,listeners:a}),n.target=Dl)))}function tl(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Rl={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionrun:tl("Transition","TransitionRun"),transitionstart:tl("Transition","TransitionStart"),transitioncancel:tl("Transition","TransitionCancel"),transitionend:tl("Transition","TransitionEnd")},wa={},qc={};on&&(qc=document.createElement("div").style,"AnimationEvent"in window||(delete Rl.animationend.animation,delete Rl.animationiteration.animation,delete Rl.animationstart.animation),"TransitionEvent"in window||delete Rl.transitionend.transition);function nl(e){if(wa[e])return wa[e];if(!Rl[e])return e;var n=Rl[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in qc)return wa[e]=n[i];return e}var Vc=nl("animationend"),Bc=nl("animationiteration"),Pc=nl("animationstart"),C0=nl("transitionrun"),A0=nl("transitionstart"),E0=nl("transitioncancel"),zc=nl("transitionend"),Oc=new Map,Da="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Da.push("scrollEnd");function Ot(e,n){Oc.set(e,n),Wn(n,[e])}var Ls=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ut=[],Il=0,Ra=0;function Hs(){for(var e=Il,n=Ra=Il=0;n<e;){var i=Ut[n];Ut[n++]=null;var a=Ut[n];Ut[n++]=null;var f=Ut[n];Ut[n++]=null;var p=Ut[n];if(Ut[n++]=null,a!==null&&f!==null){var T=a.pending;T===null?f.next=f:(f.next=T.next,T.next=f),a.pending=f}p!==0&&Yc(i,f,p)}}function ks(e,n,i,a){Ut[Il++]=e,Ut[Il++]=n,Ut[Il++]=i,Ut[Il++]=a,Ra|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Ia(e,n,i,a){return ks(e,n,i,a),Gs(e)}function ll(e,n){return ks(e,null,null,n),Gs(e)}function Yc(e,n,i){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i);for(var f=!1,p=e.return;p!==null;)p.childLanes|=i,a=p.alternate,a!==null&&(a.childLanes|=i),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(f=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,f&&n!==null&&(f=31-Tt(i),e=p.hiddenUpdates,a=e[f],a===null?e[f]=[n]:a.push(n),n.lane=i|536870912),p):null}function Gs(e){if(50<$i)throw $i=0,Br=null,Error(o(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ul={};function _0(e,n,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,n,i,a){return new _0(e,n,i,a)}function Ua(e){return e=e.prototype,!(!e||!e.isReactComponent)}function an(e,n){var i=e.alternate;return i===null?(i=St(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Kc(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function qs(e,n,i,a,f,p){var T=0;if(a=e,typeof e=="function")Ua(e)&&(T=1);else if(typeof e=="string")T=Iy(e,i,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Z:return e=St(31,i,n,f),e.elementType=Z,e.lanes=p,e;case E:return il(i.children,f,p,n);case j:T=8,f|=24;break;case A:return e=St(12,i,n,f|2),e.elementType=A,e.lanes=p,e;case P:return e=St(13,i,n,f),e.elementType=P,e.lanes=p,e;case V:return e=St(19,i,n,f),e.elementType=V,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:T=10;break e;case H:T=9;break e;case G:T=11;break e;case k:T=14;break e;case X:T=16,a=null;break e}T=29,i=Error(o(130,e===null?"null":typeof e,"")),a=null}return n=St(T,i,n,f),n.elementType=e,n.type=a,n.lanes=p,n}function il(e,n,i,a){return e=St(7,e,a,n),e.lanes=i,e}function ja(e,n,i){return e=St(6,e,null,n),e.lanes=i,e}function Fc(e){var n=St(18,null,null,0);return n.stateNode=e,n}function La(e,n,i){return n=St(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Jc=new WeakMap;function jt(e,n){if(typeof e=="object"&&e!==null){var i=Jc.get(e);return i!==void 0?i:(n={value:e,source:n,stack:gs(n)},Jc.set(e,n),n)}return{value:e,source:n,stack:gs(n)}}var jl=[],Ll=0,Vs=null,Di=0,Lt=[],Ht=0,En=null,Qt=1,Xt="";function rn(e,n){jl[Ll++]=Di,jl[Ll++]=Vs,Vs=e,Di=n}function Qc(e,n,i){Lt[Ht++]=Qt,Lt[Ht++]=Xt,Lt[Ht++]=En,En=e;var a=Qt;e=Xt;var f=32-Tt(a)-1;a&=~(1<<f),i+=1;var p=32-Tt(n)+f;if(30<p){var T=f-f%5;p=(a&(1<<T)-1).toString(32),a>>=T,f-=T,Qt=1<<32-Tt(n)+f|i<<f|a,Xt=p+e}else Qt=1<<p|i<<f|a,Xt=e}function Ha(e){e.return!==null&&(rn(e,1),Qc(e,1,0))}function ka(e){for(;e===Vs;)Vs=jl[--Ll],jl[Ll]=null,Di=jl[--Ll],jl[Ll]=null;for(;e===En;)En=Lt[--Ht],Lt[Ht]=null,Xt=Lt[--Ht],Lt[Ht]=null,Qt=Lt[--Ht],Lt[Ht]=null}function Xc(e,n){Lt[Ht++]=Qt,Lt[Ht++]=Xt,Lt[Ht++]=En,Qt=n.id,Xt=n.overflow,En=e}var lt=null,qe=null,Ae=!1,_n=null,kt=!1,Ga=Error(o(519));function Mn(e){var n=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ri(jt(n,e)),Ga}function $c(e){var n=e.stateNode,i=e.type,a=e.memoizedProps;switch(n[nt]=e,n[ht]=a,i){case"dialog":Te("cancel",n),Te("close",n);break;case"iframe":case"object":case"embed":Te("load",n);break;case"video":case"audio":for(i=0;i<Wi.length;i++)Te(Wi[i],n);break;case"source":Te("error",n);break;case"img":case"image":case"link":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"input":Te("invalid",n),cc(n,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Te("invalid",n);break;case"textarea":Te("invalid",n),fc(n,a.value,a.defaultValue,a.children)}i=a.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||a.suppressHydrationWarning===!0||ph(n.textContent,i)?(a.popover!=null&&(Te("beforetoggle",n),Te("toggle",n)),a.onScroll!=null&&Te("scroll",n),a.onScrollEnd!=null&&Te("scrollend",n),a.onClick!=null&&(n.onclick=sn),n=!0):n=!1,n||Mn(e,!0)}function Zc(e){for(lt=e.return;lt;)switch(lt.tag){case 5:case 31:case 13:kt=!1;return;case 27:case 3:kt=!0;return;default:lt=lt.return}}function Hl(e){if(e!==lt)return!1;if(!Ae)return Zc(e),Ae=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||nu(e.type,e.memoizedProps)),i=!i),i&&qe&&Mn(e),Zc(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));qe=Ch(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));qe=Ch(e)}else n===27?(n=qe,Pn(e.type)?(e=au,au=null,qe=e):qe=n):qe=lt?qt(e.stateNode.nextSibling):null;return!0}function sl(){qe=lt=null,Ae=!1}function qa(){var e=_n;return e!==null&&(xt===null?xt=e:xt.push.apply(xt,e),_n=null),e}function Ri(e){_n===null?_n=[e]:_n.push(e)}var Va=R(null),ol=null,un=null;function wn(e,n,i){ie(Va,n._currentValue),n._currentValue=i}function cn(e){e._currentValue=Va.current,J(Va)}function Ba(e,n,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===i)break;e=e.return}}function Pa(e,n,i,a){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var S=p;p=f;for(var M=0;M<n.length;M++)if(S.context===n[M]){p.lanes|=i,S=p.alternate,S!==null&&(S.lanes|=i),Ba(p.return,i,e),a||(T=null);break e}p=S.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(o(341));T.lanes|=i,p=T.alternate,p!==null&&(p.lanes|=i),Ba(T,i,e),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===e){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function kl(e,n,i,a){e=null;for(var f=n,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(o(387));if(T=T.memoizedProps,T!==null){var S=f.type;Nt(f.pendingProps.value,T.value)||(e!==null?e.push(S):e=[S])}}else if(f===Ce.current){if(T=f.alternate,T===null)throw Error(o(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(is):e=[is])}f=f.return}e!==null&&Pa(n,e,i,a),n.flags|=262144}function Bs(e){for(e=e.firstContext;e!==null;){if(!Nt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function al(e){ol=e,un=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function it(e){return Wc(ol,e)}function Ps(e,n){return ol===null&&al(e),Wc(e,n)}function Wc(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},un===null){if(e===null)throw Error(o(308));un=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else un=un.next=n;return i}var M0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,a){e.push(a)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},w0=l.unstable_scheduleCallback,D0=l.unstable_NormalPriority,Qe={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function za(){return{controller:new M0,data:new Map,refCount:0}}function Ii(e){e.refCount--,e.refCount===0&&w0(D0,function(){e.controller.abort()})}var Ui=null,Oa=0,Gl=0,ql=null;function R0(e,n){if(Ui===null){var i=Ui=[];Oa=0,Gl=Fr(),ql={status:"pending",value:void 0,then:function(a){i.push(a)}}}return Oa++,n.then(ed,ed),n}function ed(){if(--Oa===0&&Ui!==null){ql!==null&&(ql.status="fulfilled");var e=Ui;Ui=null,Gl=0,ql=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function I0(e,n){var i=[],a={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return e.then(function(){a.status="fulfilled",a.value=n;for(var f=0;f<i.length;f++)(0,i[f])(n)},function(f){for(a.status="rejected",a.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),a}var td=O.S;O.S=function(e,n){qf=ut(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&R0(e,n),td!==null&&td(e,n)};var rl=R(null);function Ya(){var e=rl.current;return e!==null?e:ke.pooledCache}function zs(e,n){n===null?ie(rl,rl.current):ie(rl,n.pool)}function nd(){var e=Ya();return e===null?null:{parent:Qe._currentValue,pool:e}}var Vl=Error(o(460)),Ka=Error(o(474)),Os=Error(o(542)),Ys={then:function(){}};function ld(e){return e=e.status,e==="fulfilled"||e==="rejected"}function id(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(sn,sn),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,od(e),e;default:if(typeof n.status=="string")n.then(sn,sn);else{if(e=ke,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=n,e.status="pending",e.then(function(a){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=a}},function(a){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=a}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,od(e),e}throw cl=n,Vl}}function ul(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(cl=i,Vl):i}}var cl=null;function sd(){if(cl===null)throw Error(o(459));var e=cl;return cl=null,e}function od(e){if(e===Vl||e===Os)throw Error(o(483))}var Bl=null,ji=0;function Ks(e){var n=ji;return ji+=1,Bl===null&&(Bl=[]),id(Bl,e,n)}function Li(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Fs(e,n){throw n.$$typeof===N?Error(o(525)):(e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function ad(e){function n(L,U){if(e){var B=L.deletions;B===null?(L.deletions=[U],L.flags|=16):B.push(U)}}function i(L,U){if(!e)return null;for(;U!==null;)n(L,U),U=U.sibling;return null}function a(L){for(var U=new Map;L!==null;)L.key!==null?U.set(L.key,L):U.set(L.index,L),L=L.sibling;return U}function f(L,U){return L=an(L,U),L.index=0,L.sibling=null,L}function p(L,U,B){return L.index=B,e?(B=L.alternate,B!==null?(B=B.index,B<U?(L.flags|=67108866,U):B):(L.flags|=67108866,U)):(L.flags|=1048576,U)}function T(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function S(L,U,B,$){return U===null||U.tag!==6?(U=ja(B,L.mode,$),U.return=L,U):(U=f(U,B),U.return=L,U)}function M(L,U,B,$){var fe=B.type;return fe===E?Q(L,U,B.props.children,$,B.key):U!==null&&(U.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===X&&ul(fe)===U.type)?(U=f(U,B.props),Li(U,B),U.return=L,U):(U=qs(B.type,B.key,B.props,null,L.mode,$),Li(U,B),U.return=L,U)}function z(L,U,B,$){return U===null||U.tag!==4||U.stateNode.containerInfo!==B.containerInfo||U.stateNode.implementation!==B.implementation?(U=La(B,L.mode,$),U.return=L,U):(U=f(U,B.children||[]),U.return=L,U)}function Q(L,U,B,$,fe){return U===null||U.tag!==7?(U=il(B,L.mode,$,fe),U.return=L,U):(U=f(U,B),U.return=L,U)}function W(L,U,B){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=ja(""+U,L.mode,B),U.return=L,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case C:return B=qs(U.type,U.key,U.props,null,L.mode,B),Li(B,U),B.return=L,B;case _:return U=La(U,L.mode,B),U.return=L,U;case X:return U=ul(U),W(L,U,B)}if(oe(U)||D(U))return U=il(U,L.mode,B,null),U.return=L,U;if(typeof U.then=="function")return W(L,Ks(U),B);if(U.$$typeof===q)return W(L,Ps(L,U),B);Fs(L,U)}return null}function Y(L,U,B,$){var fe=U!==null?U.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return fe!==null?null:S(L,U,""+B,$);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return B.key===fe?M(L,U,B,$):null;case _:return B.key===fe?z(L,U,B,$):null;case X:return B=ul(B),Y(L,U,B,$)}if(oe(B)||D(B))return fe!==null?null:Q(L,U,B,$,null);if(typeof B.then=="function")return Y(L,U,Ks(B),$);if(B.$$typeof===q)return Y(L,U,Ps(L,B),$);Fs(L,B)}return null}function K(L,U,B,$,fe){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return L=L.get(B)||null,S(U,L,""+$,fe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case C:return L=L.get($.key===null?B:$.key)||null,M(U,L,$,fe);case _:return L=L.get($.key===null?B:$.key)||null,z(U,L,$,fe);case X:return $=ul($),K(L,U,B,$,fe)}if(oe($)||D($))return L=L.get(B)||null,Q(U,L,$,fe,null);if(typeof $.then=="function")return K(L,U,B,Ks($),fe);if($.$$typeof===q)return K(L,U,B,Ps(U,$),fe);Fs(U,$)}return null}function ae(L,U,B,$){for(var fe=null,Ee=null,ce=U,ve=U=0,Se=null;ce!==null&&ve<B.length;ve++){ce.index>ve?(Se=ce,ce=null):Se=ce.sibling;var _e=Y(L,ce,B[ve],$);if(_e===null){ce===null&&(ce=Se);break}e&&ce&&_e.alternate===null&&n(L,ce),U=p(_e,U,ve),Ee===null?fe=_e:Ee.sibling=_e,Ee=_e,ce=Se}if(ve===B.length)return i(L,ce),Ae&&rn(L,ve),fe;if(ce===null){for(;ve<B.length;ve++)ce=W(L,B[ve],$),ce!==null&&(U=p(ce,U,ve),Ee===null?fe=ce:Ee.sibling=ce,Ee=ce);return Ae&&rn(L,ve),fe}for(ce=a(ce);ve<B.length;ve++)Se=K(ce,L,ve,B[ve],$),Se!==null&&(e&&Se.alternate!==null&&ce.delete(Se.key===null?ve:Se.key),U=p(Se,U,ve),Ee===null?fe=Se:Ee.sibling=Se,Ee=Se);return e&&ce.forEach(function(Fn){return n(L,Fn)}),Ae&&rn(L,ve),fe}function he(L,U,B,$){if(B==null)throw Error(o(151));for(var fe=null,Ee=null,ce=U,ve=U=0,Se=null,_e=B.next();ce!==null&&!_e.done;ve++,_e=B.next()){ce.index>ve?(Se=ce,ce=null):Se=ce.sibling;var Fn=Y(L,ce,_e.value,$);if(Fn===null){ce===null&&(ce=Se);break}e&&ce&&Fn.alternate===null&&n(L,ce),U=p(Fn,U,ve),Ee===null?fe=Fn:Ee.sibling=Fn,Ee=Fn,ce=Se}if(_e.done)return i(L,ce),Ae&&rn(L,ve),fe;if(ce===null){for(;!_e.done;ve++,_e=B.next())_e=W(L,_e.value,$),_e!==null&&(U=p(_e,U,ve),Ee===null?fe=_e:Ee.sibling=_e,Ee=_e);return Ae&&rn(L,ve),fe}for(ce=a(ce);!_e.done;ve++,_e=B.next())_e=K(ce,L,ve,_e.value,$),_e!==null&&(e&&_e.alternate!==null&&ce.delete(_e.key===null?ve:_e.key),U=p(_e,U,ve),Ee===null?fe=_e:Ee.sibling=_e,Ee=_e);return e&&ce.forEach(function(zy){return n(L,zy)}),Ae&&rn(L,ve),fe}function Le(L,U,B,$){if(typeof B=="object"&&B!==null&&B.type===E&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case C:e:{for(var fe=B.key;U!==null;){if(U.key===fe){if(fe=B.type,fe===E){if(U.tag===7){i(L,U.sibling),$=f(U,B.props.children),$.return=L,L=$;break e}}else if(U.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===X&&ul(fe)===U.type){i(L,U.sibling),$=f(U,B.props),Li($,B),$.return=L,L=$;break e}i(L,U);break}else n(L,U);U=U.sibling}B.type===E?($=il(B.props.children,L.mode,$,B.key),$.return=L,L=$):($=qs(B.type,B.key,B.props,null,L.mode,$),Li($,B),$.return=L,L=$)}return T(L);case _:e:{for(fe=B.key;U!==null;){if(U.key===fe)if(U.tag===4&&U.stateNode.containerInfo===B.containerInfo&&U.stateNode.implementation===B.implementation){i(L,U.sibling),$=f(U,B.children||[]),$.return=L,L=$;break e}else{i(L,U);break}else n(L,U);U=U.sibling}$=La(B,L.mode,$),$.return=L,L=$}return T(L);case X:return B=ul(B),Le(L,U,B,$)}if(oe(B))return ae(L,U,B,$);if(D(B)){if(fe=D(B),typeof fe!="function")throw Error(o(150));return B=fe.call(B),he(L,U,B,$)}if(typeof B.then=="function")return Le(L,U,Ks(B),$);if(B.$$typeof===q)return Le(L,U,Ps(L,B),$);Fs(L,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,U!==null&&U.tag===6?(i(L,U.sibling),$=f(U,B),$.return=L,L=$):(i(L,U),$=ja(B,L.mode,$),$.return=L,L=$),T(L)):i(L,U)}return function(L,U,B,$){try{ji=0;var fe=Le(L,U,B,$);return Bl=null,fe}catch(ce){if(ce===Vl||ce===Os)throw ce;var Ee=St(29,ce,null,L.mode);return Ee.lanes=$,Ee.return=L,Ee}finally{}}}var dl=ad(!0),rd=ad(!1),Dn=!1;function Fa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ja(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Rn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function In(e,n,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(we&2)!==0){var f=a.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),a.pending=n,n=Gs(e),Yc(e,null,i),n}return ks(e,a,n,i),Gs(e)}function Hi(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var a=n.lanes;a&=e.pendingLanes,i|=a,n.lanes=i,Wu(e,i)}}function Qa(e,n){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var f=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var T={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,i=i.next}while(i!==null);p===null?f=p=n:p=p.next=n}else f=p=n;i={baseState:a.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:a.shared,callbacks:a.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Xa=!1;function ki(){if(Xa){var e=ql;if(e!==null)throw e}}function Gi(e,n,i,a){Xa=!1;var f=e.updateQueue;Dn=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var M=S,z=M.next;M.next=null,T===null?p=z:T.next=z,T=M;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==T&&(S===null?Q.firstBaseUpdate=z:S.next=z,Q.lastBaseUpdate=M))}if(p!==null){var W=f.baseState;T=0,Q=z=M=null,S=p;do{var Y=S.lane&-536870913,K=Y!==S.lane;if(K?(Ne&Y)===Y:(a&Y)===Y){Y!==0&&Y===Gl&&(Xa=!0),Q!==null&&(Q=Q.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ae=e,he=S;Y=n;var Le=i;switch(he.tag){case 1:if(ae=he.payload,typeof ae=="function"){W=ae.call(Le,W,Y);break e}W=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=he.payload,Y=typeof ae=="function"?ae.call(Le,W,Y):ae,Y==null)break e;W=b({},W,Y);break e;case 2:Dn=!0}}Y=S.callback,Y!==null&&(e.flags|=64,K&&(e.flags|=8192),K=f.callbacks,K===null?f.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(z=Q=K,M=W):Q=Q.next=K,T|=Y;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;K=S,S=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);Q===null&&(M=W),f.baseState=M,f.firstBaseUpdate=z,f.lastBaseUpdate=Q,p===null&&(f.shared.lanes=0),kn|=T,e.lanes=T,e.memoizedState=W}}function ud(e,n){if(typeof e!="function")throw Error(o(191,e));e.call(n)}function cd(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)ud(i[e],n)}var Pl=R(null),Js=R(0);function dd(e,n){e=vn,ie(Js,e),ie(Pl,n),vn=e|n.baseLanes}function $a(){ie(Js,vn),ie(Pl,Pl.current)}function Za(){vn=Js.current,J(Pl),J(Js)}var Ct=R(null),Gt=null;function Un(e){var n=e.alternate;ie(Fe,Fe.current&1),ie(Ct,e),Gt===null&&(n===null||Pl.current!==null||n.memoizedState!==null)&&(Gt=e)}function Wa(e){ie(Fe,Fe.current),ie(Ct,e),Gt===null&&(Gt=e)}function fd(e){e.tag===22?(ie(Fe,Fe.current),ie(Ct,e),Gt===null&&(Gt=e)):jn()}function jn(){ie(Fe,Fe.current),ie(Ct,Ct.current)}function At(e){J(Ct),Gt===e&&(Gt=null),J(Fe)}var Fe=R(0);function Qs(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||su(i)||ou(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var dn=0,xe=null,Ue=null,Xe=null,Xs=!1,zl=!1,fl=!1,$s=0,qi=0,Ol=null,U0=0;function Ye(){throw Error(o(321))}function er(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!Nt(e[i],n[i]))return!1;return!0}function tr(e,n,i,a,f,p){return dn=p,xe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,O.H=e===null||e.memoizedState===null?Qd:gr,fl=!1,p=i(a,f),fl=!1,zl&&(p=md(n,i,a,f)),hd(e),p}function hd(e){O.H=Pi;var n=Ue!==null&&Ue.next!==null;if(dn=0,Xe=Ue=xe=null,Xs=!1,qi=0,Ol=null,n)throw Error(o(300));e===null||$e||(e=e.dependencies,e!==null&&Bs(e)&&($e=!0))}function md(e,n,i,a){xe=e;var f=0;do{if(zl&&(Ol=null),qi=0,zl=!1,25<=f)throw Error(o(301));if(f+=1,Xe=Ue=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}O.H=Xd,p=n(i,a)}while(zl);return p}function j0(){var e=O.H,n=e.useState()[0];return n=typeof n.then=="function"?Vi(n):n,e=e.useState()[0],(Ue!==null?Ue.memoizedState:null)!==e&&(xe.flags|=1024),n}function nr(){var e=$s!==0;return $s=0,e}function lr(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function ir(e){if(Xs){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Xs=!1}dn=0,Xe=Ue=xe=null,zl=!1,qi=$s=0,Ol=null}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?xe.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Je(){if(Ue===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var n=Xe===null?xe.memoizedState:Xe.next;if(n!==null)Xe=n,Ue=e;else{if(e===null)throw xe.alternate===null?Error(o(467)):Error(o(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Xe===null?xe.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Zs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vi(e){var n=qi;return qi+=1,Ol===null&&(Ol=[]),e=id(Ol,e,n),n=xe,(Xe===null?n.memoizedState:Xe.next)===null&&(n=n.alternate,O.H=n===null||n.memoizedState===null?Qd:gr),e}function Ws(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Vi(e);if(e.$$typeof===q)return it(e)}throw Error(o(438,String(e)))}function sr(e){var n=null,i=xe.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var a=xe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(n={data:a.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Zs(),xe.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),a=0;a<e;a++)i[a]=se;return n.index++,i}function fn(e,n){return typeof n=="function"?n(e):n}function eo(e){var n=Je();return or(n,Ue,e)}function or(e,n,i){var a=e.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var f=e.baseQueue,p=a.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}n.baseQueue=f=p,a.pending=null}if(p=e.baseState,f===null)e.memoizedState=p;else{n=f.next;var S=T=null,M=null,z=n,Q=!1;do{var W=z.lane&-536870913;if(W!==z.lane?(Ne&W)===W:(dn&W)===W){var Y=z.revertLane;if(Y===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),W===Gl&&(Q=!0);else if((dn&Y)===Y){z=z.next,Y===Gl&&(Q=!0);continue}else W={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},M===null?(S=M=W,T=p):M=M.next=W,xe.lanes|=Y,kn|=Y;W=z.action,fl&&i(p,W),p=z.hasEagerState?z.eagerState:i(p,W)}else Y={lane:W,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},M===null?(S=M=Y,T=p):M=M.next=Y,xe.lanes|=W,kn|=W;z=z.next}while(z!==null&&z!==n);if(M===null?T=p:M.next=S,!Nt(p,e.memoizedState)&&($e=!0,Q&&(i=ql,i!==null)))throw i;e.memoizedState=p,e.baseState=T,e.baseQueue=M,a.lastRenderedState=p}return f===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function ar(e){var n=Je(),i=n.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var a=i.dispatch,f=i.pending,p=n.memoizedState;if(f!==null){i.pending=null;var T=f=f.next;do p=e(p,T.action),T=T.next;while(T!==f);Nt(p,n.memoizedState)||($e=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),i.lastRenderedState=p}return[p,a]}function pd(e,n,i){var a=xe,f=Je(),p=Ae;if(p){if(i===void 0)throw Error(o(407));i=i()}else i=n();var T=!Nt((Ue||f).memoizedState,i);if(T&&(f.memoizedState=i,$e=!0),f=f.queue,cr(xd.bind(null,a,f,e),[e]),f.getSnapshot!==n||T||Xe!==null&&Xe.memoizedState.tag&1){if(a.flags|=2048,Yl(9,{destroy:void 0},yd.bind(null,a,f,i,n),null),ke===null)throw Error(o(349));p||(dn&127)!==0||gd(a,n,i)}return i}function gd(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=xe.updateQueue,n===null?(n=Zs(),xe.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function yd(e,n,i,a){n.value=i,n.getSnapshot=a,vd(n)&&bd(e)}function xd(e,n,i){return i(function(){vd(n)&&bd(e)})}function vd(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!Nt(e,i)}catch{return!0}}function bd(e){var n=ll(e,2);n!==null&&vt(n,e,2)}function rr(e){var n=dt();if(typeof e=="function"){var i=e;if(e=i(),fl){Jt(!0);try{i()}finally{Jt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fn,lastRenderedState:e},n}function Td(e,n,i,a){return e.baseState=i,or(e,Ue,typeof a=="function"?a:fn)}function L0(e,n,i,a,f){if(lo(e))throw Error(o(485));if(e=n.action,e!==null){var p={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};O.T!==null?i(!0):p.isTransition=!1,a(p),i=n.pending,i===null?(p.next=n.pending=p,Nd(n,p)):(p.next=i.next,n.pending=i.next=p)}}function Nd(e,n){var i=n.action,a=n.payload,f=e.state;if(n.isTransition){var p=O.T,T={};O.T=T;try{var S=i(f,a),M=O.S;M!==null&&M(T,S),Sd(e,n,S)}catch(z){ur(e,n,z)}finally{p!==null&&T.types!==null&&(p.types=T.types),O.T=p}}else try{p=i(f,a),Sd(e,n,p)}catch(z){ur(e,n,z)}}function Sd(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(a){Cd(e,n,a)},function(a){return ur(e,n,a)}):Cd(e,n,i)}function Cd(e,n,i){n.status="fulfilled",n.value=i,Ad(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,Nd(e,i)))}function ur(e,n,i){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do n.status="rejected",n.reason=i,Ad(n),n=n.next;while(n!==a)}e.action=null}function Ad(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Ed(e,n){return n}function _d(e,n){if(Ae){var i=ke.formState;if(i!==null){e:{var a=xe;if(Ae){if(qe){t:{for(var f=qe,p=kt;f.nodeType!==8;){if(!p){f=null;break t}if(f=qt(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){qe=qt(f.nextSibling),a=f.data==="F!";break e}}Mn(a)}a=!1}a&&(n=i[0])}}return i=dt(),i.memoizedState=i.baseState=n,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ed,lastRenderedState:n},i.queue=a,i=Kd.bind(null,xe,a),a.dispatch=i,a=rr(!1),p=pr.bind(null,xe,!1,a.queue),a=dt(),f={state:n,dispatch:null,action:e,pending:null},a.queue=f,i=L0.bind(null,xe,f,p,i),f.dispatch=i,a.memoizedState=e,[n,i,!1]}function Md(e){var n=Je();return wd(n,Ue,e)}function wd(e,n,i){if(n=or(e,n,Ed)[0],e=eo(fn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var a=Vi(n)}catch(T){throw T===Vl?Os:T}else a=n;n=Je();var f=n.queue,p=f.dispatch;return i!==n.memoizedState&&(xe.flags|=2048,Yl(9,{destroy:void 0},H0.bind(null,f,i),null)),[a,p,e]}function H0(e,n){e.action=n}function Dd(e){var n=Je(),i=Ue;if(i!==null)return wd(n,i,e);Je(),n=n.memoizedState,i=Je();var a=i.queue.dispatch;return i.memoizedState=e,[n,a,!1]}function Yl(e,n,i,a){return e={tag:e,create:i,deps:a,inst:n,next:null},n=xe.updateQueue,n===null&&(n=Zs(),xe.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,n.lastEffect=e),e}function Rd(){return Je().memoizedState}function to(e,n,i,a){var f=dt();xe.flags|=e,f.memoizedState=Yl(1|n,{destroy:void 0},i,a===void 0?null:a)}function no(e,n,i,a){var f=Je();a=a===void 0?null:a;var p=f.memoizedState.inst;Ue!==null&&a!==null&&er(a,Ue.memoizedState.deps)?f.memoizedState=Yl(n,p,i,a):(xe.flags|=e,f.memoizedState=Yl(1|n,p,i,a))}function Id(e,n){to(8390656,8,e,n)}function cr(e,n){no(2048,8,e,n)}function k0(e){xe.flags|=4;var n=xe.updateQueue;if(n===null)n=Zs(),xe.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function Ud(e){var n=Je().memoizedState;return k0({ref:n,nextImpl:e}),function(){if((we&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}function jd(e,n){return no(4,2,e,n)}function Ld(e,n){return no(4,4,e,n)}function Hd(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function kd(e,n,i){i=i!=null?i.concat([e]):null,no(4,4,Hd.bind(null,n,e),i)}function dr(){}function Gd(e,n){var i=Je();n=n===void 0?null:n;var a=i.memoizedState;return n!==null&&er(n,a[1])?a[0]:(i.memoizedState=[e,n],e)}function qd(e,n){var i=Je();n=n===void 0?null:n;var a=i.memoizedState;if(n!==null&&er(n,a[1]))return a[0];if(a=e(),fl){Jt(!0);try{e()}finally{Jt(!1)}}return i.memoizedState=[a,n],a}function fr(e,n,i){return i===void 0||(dn&1073741824)!==0&&(Ne&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Bf(),xe.lanes|=e,kn|=e,i)}function Vd(e,n,i,a){return Nt(i,n)?i:Pl.current!==null?(e=fr(e,i,a),Nt(e,n)||($e=!0),e):(dn&42)===0||(dn&1073741824)!==0&&(Ne&261930)===0?($e=!0,e.memoizedState=i):(e=Bf(),xe.lanes|=e,kn|=e,n)}function Bd(e,n,i,a,f){var p=ee.p;ee.p=p!==0&&8>p?p:8;var T=O.T,S={};O.T=S,pr(e,!1,n,i);try{var M=f(),z=O.S;if(z!==null&&z(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Q=I0(M,a);Bi(e,n,Q,Mt(e))}else Bi(e,n,a,Mt(e))}catch(W){Bi(e,n,{then:function(){},status:"rejected",reason:W},Mt())}finally{ee.p=p,T!==null&&S.types!==null&&(T.types=S.types),O.T=T}}function G0(){}function hr(e,n,i,a){if(e.tag!==5)throw Error(o(476));var f=Pd(e).queue;Bd(e,f,n,ne,i===null?G0:function(){return zd(e),i(a)})}function Pd(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fn,lastRenderedState:ne},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fn,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function zd(e){var n=Pd(e);n.next===null&&(n=e.alternate.memoizedState),Bi(e,n.next.queue,{},Mt())}function mr(){return it(is)}function Od(){return Je().memoizedState}function Yd(){return Je().memoizedState}function q0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=Mt();e=Rn(i);var a=In(n,e,i);a!==null&&(vt(a,n,i),Hi(a,n,i)),n={cache:za()},e.payload=n;return}n=n.return}}function V0(e,n,i){var a=Mt();i={lane:a,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},lo(e)?Fd(n,i):(i=Ia(e,n,i,a),i!==null&&(vt(i,e,a),Jd(i,n,a)))}function Kd(e,n,i){var a=Mt();Bi(e,n,i,a)}function Bi(e,n,i,a){var f={lane:a,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(lo(e))Fd(n,f);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var T=n.lastRenderedState,S=p(T,i);if(f.hasEagerState=!0,f.eagerState=S,Nt(S,T))return ks(e,n,f,0),ke===null&&Hs(),!1}catch{}finally{}if(i=Ia(e,n,f,a),i!==null)return vt(i,e,a),Jd(i,n,a),!0}return!1}function pr(e,n,i,a){if(a={lane:2,revertLane:Fr(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},lo(e)){if(n)throw Error(o(479))}else n=Ia(e,i,a,2),n!==null&&vt(n,e,2)}function lo(e){var n=e.alternate;return e===xe||n!==null&&n===xe}function Fd(e,n){zl=Xs=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Jd(e,n,i){if((i&4194048)!==0){var a=n.lanes;a&=e.pendingLanes,i|=a,n.lanes=i,Wu(e,i)}}var Pi={readContext:it,use:Ws,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye};Pi.useEffectEvent=Ye;var Qd={readContext:it,use:Ws,useCallback:function(e,n){return dt().memoizedState=[e,n===void 0?null:n],e},useContext:it,useEffect:Id,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,to(4194308,4,Hd.bind(null,n,e),i)},useLayoutEffect:function(e,n){return to(4194308,4,e,n)},useInsertionEffect:function(e,n){to(4,2,e,n)},useMemo:function(e,n){var i=dt();n=n===void 0?null:n;var a=e();if(fl){Jt(!0);try{e()}finally{Jt(!1)}}return i.memoizedState=[a,n],a},useReducer:function(e,n,i){var a=dt();if(i!==void 0){var f=i(n);if(fl){Jt(!0);try{i(n)}finally{Jt(!1)}}}else f=n;return a.memoizedState=a.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},a.queue=e,e=e.dispatch=V0.bind(null,xe,e),[a.memoizedState,e]},useRef:function(e){var n=dt();return e={current:e},n.memoizedState=e},useState:function(e){e=rr(e);var n=e.queue,i=Kd.bind(null,xe,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:dr,useDeferredValue:function(e,n){var i=dt();return fr(i,e,n)},useTransition:function(){var e=rr(!1);return e=Bd.bind(null,xe,e.queue,!0,!1),dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var a=xe,f=dt();if(Ae){if(i===void 0)throw Error(o(407));i=i()}else{if(i=n(),ke===null)throw Error(o(349));(Ne&127)!==0||gd(a,n,i)}f.memoizedState=i;var p={value:i,getSnapshot:n};return f.queue=p,Id(xd.bind(null,a,p,e),[e]),a.flags|=2048,Yl(9,{destroy:void 0},yd.bind(null,a,p,i,n),null),i},useId:function(){var e=dt(),n=ke.identifierPrefix;if(Ae){var i=Xt,a=Qt;i=(a&~(1<<32-Tt(a)-1)).toString(32)+i,n="_"+n+"R_"+i,i=$s++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=U0++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:mr,useFormState:_d,useActionState:_d,useOptimistic:function(e){var n=dt();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=pr.bind(null,xe,!0,i),i.dispatch=n,[e,n]},useMemoCache:sr,useCacheRefresh:function(){return dt().memoizedState=q0.bind(null,xe)},useEffectEvent:function(e){var n=dt(),i={impl:e};return n.memoizedState=i,function(){if((we&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},gr={readContext:it,use:Ws,useCallback:Gd,useContext:it,useEffect:cr,useImperativeHandle:kd,useInsertionEffect:jd,useLayoutEffect:Ld,useMemo:qd,useReducer:eo,useRef:Rd,useState:function(){return eo(fn)},useDebugValue:dr,useDeferredValue:function(e,n){var i=Je();return Vd(i,Ue.memoizedState,e,n)},useTransition:function(){var e=eo(fn)[0],n=Je().memoizedState;return[typeof e=="boolean"?e:Vi(e),n]},useSyncExternalStore:pd,useId:Od,useHostTransitionStatus:mr,useFormState:Md,useActionState:Md,useOptimistic:function(e,n){var i=Je();return Td(i,Ue,e,n)},useMemoCache:sr,useCacheRefresh:Yd};gr.useEffectEvent=Ud;var Xd={readContext:it,use:Ws,useCallback:Gd,useContext:it,useEffect:cr,useImperativeHandle:kd,useInsertionEffect:jd,useLayoutEffect:Ld,useMemo:qd,useReducer:ar,useRef:Rd,useState:function(){return ar(fn)},useDebugValue:dr,useDeferredValue:function(e,n){var i=Je();return Ue===null?fr(i,e,n):Vd(i,Ue.memoizedState,e,n)},useTransition:function(){var e=ar(fn)[0],n=Je().memoizedState;return[typeof e=="boolean"?e:Vi(e),n]},useSyncExternalStore:pd,useId:Od,useHostTransitionStatus:mr,useFormState:Dd,useActionState:Dd,useOptimistic:function(e,n){var i=Je();return Ue!==null?Td(i,Ue,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:sr,useCacheRefresh:Yd};Xd.useEffectEvent=Ud;function yr(e,n,i,a){n=e.memoizedState,i=i(a,n),i=i==null?n:b({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var xr={enqueueSetState:function(e,n,i){e=e._reactInternals;var a=Mt(),f=Rn(a);f.payload=n,i!=null&&(f.callback=i),n=In(e,f,a),n!==null&&(vt(n,e,a),Hi(n,e,a))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var a=Mt(),f=Rn(a);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=In(e,f,a),n!==null&&(vt(n,e,a),Hi(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Mt(),a=Rn(i);a.tag=2,n!=null&&(a.callback=n),n=In(e,a,i),n!==null&&(vt(n,e,i),Hi(n,e,i))}};function $d(e,n,i,a,f,p,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,p,T):n.prototype&&n.prototype.isPureReactComponent?!Mi(i,a)||!Mi(f,p):!0}function Zd(e,n,i,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,a),n.state!==e&&xr.enqueueReplaceState(n,n.state,null)}function hl(e,n){var i=n;if("ref"in n){i={};for(var a in n)a!=="ref"&&(i[a]=n[a])}if(e=e.defaultProps){i===n&&(i=b({},i));for(var f in e)i[f]===void 0&&(i[f]=e[f])}return i}function Wd(e){Ls(e)}function ef(e){console.error(e)}function tf(e){Ls(e)}function io(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(a){setTimeout(function(){throw a})}}function nf(e,n,i){try{var a=e.onCaughtError;a(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function vr(e,n,i){return i=Rn(i),i.tag=3,i.payload={element:null},i.callback=function(){io(e,n)},i}function lf(e){return e=Rn(e),e.tag=3,e}function sf(e,n,i,a){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var p=a.value;e.payload=function(){return f(p)},e.callback=function(){nf(n,i,a)}}var T=i.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(e.callback=function(){nf(n,i,a),typeof f!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})})}function B0(e,n,i,a,f){if(i.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(n=i.alternate,n!==null&&kl(n,i,f,!0),i=Ct.current,i!==null){switch(i.tag){case 31:case 13:return Gt===null?yo():i.alternate===null&&Ke===0&&(Ke=3),i.flags&=-257,i.flags|=65536,i.lanes=f,a===Ys?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([a]):n.add(a),Or(e,a,f)),!1;case 22:return i.flags|=65536,a===Ys?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([a])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([a]):i.add(a)),Or(e,a,f)),!1}throw Error(o(435,i.tag))}return Or(e,a,f),yo(),!1}if(Ae)return n=Ct.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,a!==Ga&&(e=Error(o(422),{cause:a}),Ri(jt(e,i)))):(a!==Ga&&(n=Error(o(423),{cause:a}),Ri(jt(n,i))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,a=jt(a,i),f=vr(e.stateNode,a,f),Qa(e,f),Ke!==4&&(Ke=2)),!1;var p=Error(o(520),{cause:a});if(p=jt(p,i),Xi===null?Xi=[p]:Xi.push(p),Ke!==4&&(Ke=2),n===null)return!0;a=jt(a,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=f&-f,i.lanes|=e,e=vr(i.stateNode,a,e),Qa(i,e),!1;case 1:if(n=i.type,p=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Gn===null||!Gn.has(p))))return i.flags|=65536,f&=-f,i.lanes|=f,f=lf(f),sf(f,e,i,a),Qa(i,f),!1}i=i.return}while(i!==null);return!1}var br=Error(o(461)),$e=!1;function st(e,n,i,a){n.child=e===null?rd(n,null,i,a):dl(n,e.child,i,a)}function of(e,n,i,a,f){i=i.render;var p=n.ref;if("ref"in a){var T={};for(var S in a)S!=="ref"&&(T[S]=a[S])}else T=a;return al(n),a=tr(e,n,i,T,p,f),S=nr(),e!==null&&!$e?(lr(e,n,f),hn(e,n,f)):(Ae&&S&&Ha(n),n.flags|=1,st(e,n,a,f),n.child)}function af(e,n,i,a,f){if(e===null){var p=i.type;return typeof p=="function"&&!Ua(p)&&p.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=p,rf(e,n,p,a,f)):(e=qs(i.type,null,a,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(p=e.child,!Mr(e,f)){var T=p.memoizedProps;if(i=i.compare,i=i!==null?i:Mi,i(T,a)&&e.ref===n.ref)return hn(e,n,f)}return n.flags|=1,e=an(p,a),e.ref=n.ref,e.return=n,n.child=e}function rf(e,n,i,a,f){if(e!==null){var p=e.memoizedProps;if(Mi(p,a)&&e.ref===n.ref)if($e=!1,n.pendingProps=a=p,Mr(e,f))(e.flags&131072)!==0&&($e=!0);else return n.lanes=e.lanes,hn(e,n,f)}return Tr(e,n,i,a,f)}function uf(e,n,i,a){var f=a.children,p=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((n.flags&128)!==0){if(p=p!==null?p.baseLanes|i:i,e!==null){for(a=n.child=e.child,f=0;a!==null;)f=f|a.lanes|a.childLanes,a=a.sibling;a=f&~p}else a=0,n.child=null;return cf(e,n,p,i,a)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&zs(n,p!==null?p.cachePool:null),p!==null?dd(n,p):$a(),fd(n);else return a=n.lanes=536870912,cf(e,n,p!==null?p.baseLanes|i:i,i,a)}else p!==null?(zs(n,p.cachePool),dd(n,p),jn(),n.memoizedState=null):(e!==null&&zs(n,null),$a(),jn());return st(e,n,f,i),n.child}function zi(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function cf(e,n,i,a,f){var p=Ya();return p=p===null?null:{parent:Qe._currentValue,pool:p},n.memoizedState={baseLanes:i,cachePool:p},e!==null&&zs(n,null),$a(),fd(n),e!==null&&kl(e,n,a,!0),n.childLanes=f,null}function so(e,n){return n=ao({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function df(e,n,i){return dl(n,e.child,null,i),e=so(n,n.pendingProps),e.flags|=2,At(n),n.memoizedState=null,e}function P0(e,n,i){var a=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Ae){if(a.mode==="hidden")return e=so(n,a),n.lanes=536870912,zi(null,e);if(Wa(n),(e=qe)?(e=Sh(e,kt),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:En!==null?{id:Qt,overflow:Xt}:null,retryLane:536870912,hydrationErrors:null},i=Fc(e),i.return=n,n.child=i,lt=n,qe=null)):e=null,e===null)throw Mn(n);return n.lanes=536870912,null}return so(n,a)}var p=e.memoizedState;if(p!==null){var T=p.dehydrated;if(Wa(n),f)if(n.flags&256)n.flags&=-257,n=df(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(o(558));else if($e||kl(e,n,i,!1),f=(i&e.childLanes)!==0,$e||f){if(a=ke,a!==null&&(T=ec(a,i),T!==0&&T!==p.retryLane))throw p.retryLane=T,ll(e,T),vt(a,e,T),br;yo(),n=df(e,n,i)}else e=p.treeContext,qe=qt(T.nextSibling),lt=n,Ae=!0,_n=null,kt=!1,e!==null&&Xc(n,e),n=so(n,a),n.flags|=4096;return n}return e=an(e.child,{mode:a.mode,children:a.children}),e.ref=n.ref,n.child=e,e.return=n,e}function oo(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Tr(e,n,i,a,f){return al(n),i=tr(e,n,i,a,void 0,f),a=nr(),e!==null&&!$e?(lr(e,n,f),hn(e,n,f)):(Ae&&a&&Ha(n),n.flags|=1,st(e,n,i,f),n.child)}function ff(e,n,i,a,f,p){return al(n),n.updateQueue=null,i=md(n,a,i,f),hd(e),a=nr(),e!==null&&!$e?(lr(e,n,p),hn(e,n,p)):(Ae&&a&&Ha(n),n.flags|=1,st(e,n,i,p),n.child)}function hf(e,n,i,a,f){if(al(n),n.stateNode===null){var p=Ul,T=i.contextType;typeof T=="object"&&T!==null&&(p=it(T)),p=new i(a,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=xr,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=a,p.state=n.memoizedState,p.refs={},Fa(n),T=i.contextType,p.context=typeof T=="object"&&T!==null?it(T):Ul,p.state=n.memoizedState,T=i.getDerivedStateFromProps,typeof T=="function"&&(yr(n,i,T,a),p.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&xr.enqueueReplaceState(p,p.state,null),Gi(n,a,p,f),ki(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),a=!0}else if(e===null){p=n.stateNode;var S=n.memoizedProps,M=hl(i,S);p.props=M;var z=p.context,Q=i.contextType;T=Ul,typeof Q=="object"&&Q!==null&&(T=it(Q));var W=i.getDerivedStateFromProps;Q=typeof W=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=n.pendingProps!==S,Q||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||z!==T)&&Zd(n,p,a,T),Dn=!1;var Y=n.memoizedState;p.state=Y,Gi(n,a,p,f),ki(),z=n.memoizedState,S||Y!==z||Dn?(typeof W=="function"&&(yr(n,i,W,a),z=n.memoizedState),(M=Dn||$d(n,i,M,a,Y,z,T))?(Q||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=z),p.props=a,p.state=z,p.context=T,a=M):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{p=n.stateNode,Ja(e,n),T=n.memoizedProps,Q=hl(i,T),p.props=Q,W=n.pendingProps,Y=p.context,z=i.contextType,M=Ul,typeof z=="object"&&z!==null&&(M=it(z)),S=i.getDerivedStateFromProps,(z=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==W||Y!==M)&&Zd(n,p,a,M),Dn=!1,Y=n.memoizedState,p.state=Y,Gi(n,a,p,f),ki();var K=n.memoizedState;T!==W||Y!==K||Dn||e!==null&&e.dependencies!==null&&Bs(e.dependencies)?(typeof S=="function"&&(yr(n,i,S,a),K=n.memoizedState),(Q=Dn||$d(n,i,Q,a,Y,K,M)||e!==null&&e.dependencies!==null&&Bs(e.dependencies))?(z||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(a,K,M),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(a,K,M)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===e.memoizedProps&&Y===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&Y===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=K),p.props=a,p.state=K,p.context=M,a=Q):(typeof p.componentDidUpdate!="function"||T===e.memoizedProps&&Y===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&Y===e.memoizedState||(n.flags|=1024),a=!1)}return p=a,oo(e,n),a=(n.flags&128)!==0,p||a?(p=n.stateNode,i=a&&typeof i.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,e!==null&&a?(n.child=dl(n,e.child,null,f),n.child=dl(n,null,i,f)):st(e,n,i,f),n.memoizedState=p.state,e=n.child):e=hn(e,n,f),e}function mf(e,n,i,a){return sl(),n.flags|=256,st(e,n,i,a),n.child}var Nr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sr(e){return{baseLanes:e,cachePool:nd()}}function Cr(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=_t),e}function pf(e,n,i){var a=n.pendingProps,f=!1,p=(n.flags&128)!==0,T;if((T=p)||(T=e!==null&&e.memoizedState===null?!1:(Fe.current&2)!==0),T&&(f=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ae){if(f?Un(n):jn(),(e=qe)?(e=Sh(e,kt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:En!==null?{id:Qt,overflow:Xt}:null,retryLane:536870912,hydrationErrors:null},i=Fc(e),i.return=n,n.child=i,lt=n,qe=null)):e=null,e===null)throw Mn(n);return ou(e)?n.lanes=32:n.lanes=536870912,null}var S=a.children;return a=a.fallback,f?(jn(),f=n.mode,S=ao({mode:"hidden",children:S},f),a=il(a,f,i,null),S.return=n,a.return=n,S.sibling=a,n.child=S,a=n.child,a.memoizedState=Sr(i),a.childLanes=Cr(e,T,i),n.memoizedState=Nr,zi(null,a)):(Un(n),Ar(n,S))}var M=e.memoizedState;if(M!==null&&(S=M.dehydrated,S!==null)){if(p)n.flags&256?(Un(n),n.flags&=-257,n=Er(e,n,i)):n.memoizedState!==null?(jn(),n.child=e.child,n.flags|=128,n=null):(jn(),S=a.fallback,f=n.mode,a=ao({mode:"visible",children:a.children},f),S=il(S,f,i,null),S.flags|=2,a.return=n,S.return=n,a.sibling=S,n.child=a,dl(n,e.child,null,i),a=n.child,a.memoizedState=Sr(i),a.childLanes=Cr(e,T,i),n.memoizedState=Nr,n=zi(null,a));else if(Un(n),ou(S)){if(T=S.nextSibling&&S.nextSibling.dataset,T)var z=T.dgst;T=z,a=Error(o(419)),a.stack="",a.digest=T,Ri({value:a,source:null,stack:null}),n=Er(e,n,i)}else if($e||kl(e,n,i,!1),T=(i&e.childLanes)!==0,$e||T){if(T=ke,T!==null&&(a=ec(T,i),a!==0&&a!==M.retryLane))throw M.retryLane=a,ll(e,a),vt(T,e,a),br;su(S)||yo(),n=Er(e,n,i)}else su(S)?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,qe=qt(S.nextSibling),lt=n,Ae=!0,_n=null,kt=!1,e!==null&&Xc(n,e),n=Ar(n,a.children),n.flags|=4096);return n}return f?(jn(),S=a.fallback,f=n.mode,M=e.child,z=M.sibling,a=an(M,{mode:"hidden",children:a.children}),a.subtreeFlags=M.subtreeFlags&65011712,z!==null?S=an(z,S):(S=il(S,f,i,null),S.flags|=2),S.return=n,a.return=n,a.sibling=S,n.child=a,zi(null,a),a=n.child,S=e.child.memoizedState,S===null?S=Sr(i):(f=S.cachePool,f!==null?(M=Qe._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=nd(),S={baseLanes:S.baseLanes|i,cachePool:f}),a.memoizedState=S,a.childLanes=Cr(e,T,i),n.memoizedState=Nr,zi(e.child,a)):(Un(n),i=e.child,e=i.sibling,i=an(i,{mode:"visible",children:a.children}),i.return=n,i.sibling=null,e!==null&&(T=n.deletions,T===null?(n.deletions=[e],n.flags|=16):T.push(e)),n.child=i,n.memoizedState=null,i)}function Ar(e,n){return n=ao({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function ao(e,n){return e=St(22,e,null,n),e.lanes=0,e}function Er(e,n,i){return dl(n,e.child,null,i),e=Ar(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function gf(e,n,i){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),Ba(e.return,n,i)}function _r(e,n,i,a,f,p){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:f,treeForkCount:p}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=a,T.tail=i,T.tailMode=f,T.treeForkCount=p)}function yf(e,n,i){var a=n.pendingProps,f=a.revealOrder,p=a.tail;a=a.children;var T=Fe.current,S=(T&2)!==0;if(S?(T=T&1|2,n.flags|=128):T&=1,ie(Fe,T),st(e,n,a,i),a=Ae?Di:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gf(e,i,n);else if(e.tag===19)gf(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(i=n.child,f=null;i!==null;)e=i.alternate,e!==null&&Qs(e)===null&&(f=i),i=i.sibling;i=f,i===null?(f=n.child,n.child=null):(f=i.sibling,i.sibling=null),_r(n,!1,f,i,p,a);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&Qs(e)===null){n.child=f;break}e=f.sibling,f.sibling=i,i=f,f=e}_r(n,!0,i,null,p,a);break;case"together":_r(n,!1,null,null,void 0,a);break;default:n.memoizedState=null}return n.child}function hn(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),kn|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(kl(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,i=an(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=an(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function Mr(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Bs(e)))}function z0(e,n,i){switch(n.tag){case 3:Oe(n,n.stateNode.containerInfo),wn(n,Qe,e.memoizedState.cache),sl();break;case 27:case 5:Pt(n);break;case 4:Oe(n,n.stateNode.containerInfo);break;case 10:wn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Wa(n),null;break;case 13:var a=n.memoizedState;if(a!==null)return a.dehydrated!==null?(Un(n),n.flags|=128,null):(i&n.child.childLanes)!==0?pf(e,n,i):(Un(n),e=hn(e,n,i),e!==null?e.sibling:null);Un(n);break;case 19:var f=(e.flags&128)!==0;if(a=(i&n.childLanes)!==0,a||(kl(e,n,i,!1),a=(i&n.childLanes)!==0),f){if(a)return yf(e,n,i);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ie(Fe,Fe.current),a)break;return null;case 22:return n.lanes=0,uf(e,n,i,n.pendingProps);case 24:wn(n,Qe,e.memoizedState.cache)}return hn(e,n,i)}function xf(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)$e=!0;else{if(!Mr(e,i)&&(n.flags&128)===0)return $e=!1,z0(e,n,i);$e=(e.flags&131072)!==0}else $e=!1,Ae&&(n.flags&1048576)!==0&&Qc(n,Di,n.index);switch(n.lanes=0,n.tag){case 16:e:{var a=n.pendingProps;if(e=ul(n.elementType),n.type=e,typeof e=="function")Ua(e)?(a=hl(e,a),n.tag=1,n=hf(null,n,e,a,i)):(n.tag=0,n=Tr(null,n,e,a,i));else{if(e!=null){var f=e.$$typeof;if(f===G){n.tag=11,n=of(null,n,e,a,i);break e}else if(f===k){n.tag=14,n=af(null,n,e,a,i);break e}}throw n=le(e)||e,Error(o(306,n,""))}}return n;case 0:return Tr(e,n,n.type,n.pendingProps,i);case 1:return a=n.type,f=hl(a,n.pendingProps),hf(e,n,a,f,i);case 3:e:{if(Oe(n,n.stateNode.containerInfo),e===null)throw Error(o(387));a=n.pendingProps;var p=n.memoizedState;f=p.element,Ja(e,n),Gi(n,a,null,i);var T=n.memoizedState;if(a=T.cache,wn(n,Qe,a),a!==p.cache&&Pa(n,[Qe],i,!0),ki(),a=T.element,p.isDehydrated)if(p={element:a,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=mf(e,n,a,i);break e}else if(a!==f){f=jt(Error(o(424)),n),Ri(f),n=mf(e,n,a,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qe=qt(e.firstChild),lt=n,Ae=!0,_n=null,kt=!0,i=rd(n,null,a,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(sl(),a===f){n=hn(e,n,i);break e}st(e,n,a,i)}n=n.child}return n;case 26:return oo(e,n),e===null?(i=wh(n.type,null,n.pendingProps,null))?n.memoizedState=i:Ae||(i=n.type,e=n.pendingProps,a=Co(pe.current).createElement(i),a[nt]=n,a[ht]=e,ot(a,i,e),et(a),n.stateNode=a):n.memoizedState=wh(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Pt(n),e===null&&Ae&&(a=n.stateNode=Eh(n.type,n.pendingProps,pe.current),lt=n,kt=!0,f=qe,Pn(n.type)?(au=f,qe=qt(a.firstChild)):qe=f),st(e,n,n.pendingProps.children,i),oo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ae&&((f=a=qe)&&(a=vy(a,n.type,n.pendingProps,kt),a!==null?(n.stateNode=a,lt=n,qe=qt(a.firstChild),kt=!1,f=!0):f=!1),f||Mn(n)),Pt(n),f=n.type,p=n.pendingProps,T=e!==null?e.memoizedProps:null,a=p.children,nu(f,p)?a=null:T!==null&&nu(f,T)&&(n.flags|=32),n.memoizedState!==null&&(f=tr(e,n,j0,null,null,i),is._currentValue=f),oo(e,n),st(e,n,a,i),n.child;case 6:return e===null&&Ae&&((e=i=qe)&&(i=by(i,n.pendingProps,kt),i!==null?(n.stateNode=i,lt=n,qe=null,e=!0):e=!1),e||Mn(n)),null;case 13:return pf(e,n,i);case 4:return Oe(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=dl(n,null,a,i):st(e,n,a,i),n.child;case 11:return of(e,n,n.type,n.pendingProps,i);case 7:return st(e,n,n.pendingProps,i),n.child;case 8:return st(e,n,n.pendingProps.children,i),n.child;case 12:return st(e,n,n.pendingProps.children,i),n.child;case 10:return a=n.pendingProps,wn(n,n.type,a.value),st(e,n,a.children,i),n.child;case 9:return f=n.type._context,a=n.pendingProps.children,al(n),f=it(f),a=a(f),n.flags|=1,st(e,n,a,i),n.child;case 14:return af(e,n,n.type,n.pendingProps,i);case 15:return rf(e,n,n.type,n.pendingProps,i);case 19:return yf(e,n,i);case 31:return P0(e,n,i);case 22:return uf(e,n,i,n.pendingProps);case 24:return al(n),a=it(Qe),e===null?(f=Ya(),f===null&&(f=ke,p=za(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=i),f=p),n.memoizedState={parent:a,cache:f},Fa(n),wn(n,Qe,f)):((e.lanes&i)!==0&&(Ja(e,n),Gi(n,null,null,i),ki()),f=e.memoizedState,p=n.memoizedState,f.parent!==a?(f={parent:a,cache:a},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),wn(n,Qe,a)):(a=p.cache,wn(n,Qe,a),a!==f.cache&&Pa(n,[Qe],i,!0))),st(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(o(156,n.tag))}function mn(e){e.flags|=4}function wr(e,n,i,a,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Yf())e.flags|=8192;else throw cl=Ys,Ka}else e.flags&=-16777217}function vf(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!jh(n))if(Yf())e.flags|=8192;else throw cl=Ys,Ka}function ro(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?$u():536870912,e.lanes|=n,Ql|=n)}function Oi(e,n){if(!Ae)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ve(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(n)for(var f=e.child;f!==null;)i|=f.lanes|f.childLanes,a|=f.subtreeFlags&65011712,a|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)i|=f.lanes|f.childLanes,a|=f.subtreeFlags,a|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=a,e.childLanes=i,n}function O0(e,n,i){var a=n.pendingProps;switch(ka(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(n),null;case 1:return Ve(n),null;case 3:return i=n.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),cn(Qe),Ge(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Hl(n)?mn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,qa())),Ve(n),null;case 26:var f=n.type,p=n.memoizedState;return e===null?(mn(n),p!==null?(Ve(n),vf(n,p)):(Ve(n),wr(n,f,null,a,i))):p?p!==e.memoizedState?(mn(n),Ve(n),vf(n,p)):(Ve(n),n.flags&=-16777217):(e=e.memoizedProps,e!==a&&mn(n),Ve(n),wr(n,f,e,a,i)),null;case 27:if(zt(n),i=pe.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&mn(n);else{if(!a){if(n.stateNode===null)throw Error(o(166));return Ve(n),null}e=te.current,Hl(n)?$c(n):(e=Eh(f,a,i),n.stateNode=e,mn(n))}return Ve(n),null;case 5:if(zt(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&mn(n);else{if(!a){if(n.stateNode===null)throw Error(o(166));return Ve(n),null}if(p=te.current,Hl(n))$c(n);else{var T=Co(pe.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof a.is=="string"?T.createElement("select",{is:a.is}):T.createElement("select"),a.multiple?p.multiple=!0:a.size&&(p.size=a.size);break;default:p=typeof a.is=="string"?T.createElement(f,{is:a.is}):T.createElement(f)}}p[nt]=n,p[ht]=a;e:for(T=n.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===n)break e;for(;T.sibling===null;){if(T.return===null||T.return===n)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}n.stateNode=p;e:switch(ot(p,f,a),f){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&mn(n)}}return Ve(n),wr(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==a&&mn(n);else{if(typeof a!="string"&&n.stateNode===null)throw Error(o(166));if(e=pe.current,Hl(n)){if(e=n.stateNode,i=n.memoizedProps,a=null,f=lt,f!==null)switch(f.tag){case 27:case 5:a=f.memoizedProps}e[nt]=n,e=!!(e.nodeValue===i||a!==null&&a.suppressHydrationWarning===!0||ph(e.nodeValue,i)),e||Mn(n,!0)}else e=Co(e).createTextNode(a),e[nt]=n,n.stateNode=e}return Ve(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(a=Hl(n),i!==null){if(e===null){if(!a)throw Error(o(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[nt]=n}else sl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ve(n),e=!1}else i=qa(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(At(n),n):(At(n),null);if((n.flags&128)!==0)throw Error(o(558))}return Ve(n),null;case 13:if(a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Hl(n),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(o(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));f[nt]=n}else sl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ve(n),f=!1}else f=qa(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(At(n),n):(At(n),null)}return At(n),(n.flags&128)!==0?(n.lanes=i,n):(i=a!==null,e=e!==null&&e.memoizedState!==null,i&&(a=n.child,f=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(f=a.alternate.memoizedState.cachePool.pool),p=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),p!==f&&(a.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),ro(n,n.updateQueue),Ve(n),null);case 4:return Ge(),e===null&&$r(n.stateNode.containerInfo),Ve(n),null;case 10:return cn(n.type),Ve(n),null;case 19:if(J(Fe),a=n.memoizedState,a===null)return Ve(n),null;if(f=(n.flags&128)!==0,p=a.rendering,p===null)if(f)Oi(a,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(p=Qs(e),p!==null){for(n.flags|=128,Oi(a,!1),e=p.updateQueue,n.updateQueue=e,ro(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Kc(i,e),i=i.sibling;return ie(Fe,Fe.current&1|2),Ae&&rn(n,a.treeForkCount),n.child}e=e.sibling}a.tail!==null&&ut()>mo&&(n.flags|=128,f=!0,Oi(a,!1),n.lanes=4194304)}else{if(!f)if(e=Qs(p),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,ro(n,e),Oi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!p.alternate&&!Ae)return Ve(n),null}else 2*ut()-a.renderingStartTime>mo&&i!==536870912&&(n.flags|=128,f=!0,Oi(a,!1),n.lanes=4194304);a.isBackwards?(p.sibling=n.child,n.child=p):(e=a.last,e!==null?e.sibling=p:n.child=p,a.last=p)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ut(),e.sibling=null,i=Fe.current,ie(Fe,f?i&1|2:i&1),Ae&&rn(n,a.treeForkCount),e):(Ve(n),null);case 22:case 23:return At(n),Za(),a=n.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(n.flags|=8192):a&&(n.flags|=8192),a?(i&536870912)!==0&&(n.flags&128)===0&&(Ve(n),n.subtreeFlags&6&&(n.flags|=8192)):Ve(n),i=n.updateQueue,i!==null&&ro(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),a=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==i&&(n.flags|=2048),e!==null&&J(rl),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),cn(Qe),Ve(n),null;case 25:return null;case 30:return null}throw Error(o(156,n.tag))}function Y0(e,n){switch(ka(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return cn(Qe),Ge(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return zt(n),null;case 31:if(n.memoizedState!==null){if(At(n),n.alternate===null)throw Error(o(340));sl()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(At(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));sl()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return J(Fe),null;case 4:return Ge(),null;case 10:return cn(n.type),null;case 22:case 23:return At(n),Za(),e!==null&&J(rl),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return cn(Qe),null;case 25:return null;default:return null}}function bf(e,n){switch(ka(n),n.tag){case 3:cn(Qe),Ge();break;case 26:case 27:case 5:zt(n);break;case 4:Ge();break;case 31:n.memoizedState!==null&&At(n);break;case 13:At(n);break;case 19:J(Fe);break;case 10:cn(n.type);break;case 22:case 23:At(n),Za(),e!==null&&J(rl);break;case 24:cn(Qe)}}function Yi(e,n){try{var i=n.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var f=a.next;i=f;do{if((i.tag&e)===e){a=void 0;var p=i.create,T=i.inst;a=p(),T.destroy=a}i=i.next}while(i!==f)}}catch(S){Ie(n,n.return,S)}}function Ln(e,n,i){try{var a=n.updateQueue,f=a!==null?a.lastEffect:null;if(f!==null){var p=f.next;a=p;do{if((a.tag&e)===e){var T=a.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,f=n;var M=i,z=S;try{z()}catch(Q){Ie(f,M,Q)}}}a=a.next}while(a!==p)}}catch(Q){Ie(n,n.return,Q)}}function Tf(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{cd(n,i)}catch(a){Ie(e,e.return,a)}}}function Nf(e,n,i){i.props=hl(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(a){Ie(e,n,a)}}function Ki(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof i=="function"?e.refCleanup=i(a):i.current=a}}catch(f){Ie(e,n,f)}}function $t(e,n){var i=e.ref,a=e.refCleanup;if(i!==null)if(typeof a=="function")try{a()}catch(f){Ie(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){Ie(e,n,f)}else i.current=null}function Sf(e){var n=e.type,i=e.memoizedProps,a=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&a.focus();break e;case"img":i.src?a.src=i.src:i.srcSet&&(a.srcset=i.srcSet)}}catch(f){Ie(e,e.return,f)}}function Dr(e,n,i){try{var a=e.stateNode;hy(a,e.type,i,n),a[ht]=n}catch(f){Ie(e,e.return,f)}}function Cf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Pn(e.type)||e.tag===4}function Rr(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Pn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ir(e,n,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=sn));else if(a!==4&&(a===27&&Pn(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(Ir(e,n,i),e=e.sibling;e!==null;)Ir(e,n,i),e=e.sibling}function uo(e,n,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(a!==4&&(a===27&&Pn(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(uo(e,n,i),e=e.sibling;e!==null;)uo(e,n,i),e=e.sibling}function Af(e){var n=e.stateNode,i=e.memoizedProps;try{for(var a=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);ot(n,a,i),n[nt]=e,n[ht]=i}catch(p){Ie(e,e.return,p)}}var pn=!1,Ze=!1,Ur=!1,Ef=typeof WeakSet=="function"?WeakSet:Set,tt=null;function K0(e,n){if(e=e.containerInfo,eu=Ro,e=kc(e),Ea(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var f=a.anchorOffset,p=a.focusNode;a=a.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var T=0,S=-1,M=-1,z=0,Q=0,W=e,Y=null;t:for(;;){for(var K;W!==i||f!==0&&W.nodeType!==3||(S=T+f),W!==p||a!==0&&W.nodeType!==3||(M=T+a),W.nodeType===3&&(T+=W.nodeValue.length),(K=W.firstChild)!==null;)Y=W,W=K;for(;;){if(W===e)break t;if(Y===i&&++z===f&&(S=T),Y===p&&++Q===a&&(M=T),(K=W.nextSibling)!==null)break;W=Y,Y=W.parentNode}W=K}i=S===-1||M===-1?null:{start:S,end:M}}else i=null}i=i||{start:0,end:0}}else i=null;for(tu={focusedElem:e,selectionRange:i},Ro=!1,tt=n;tt!==null;)if(n=tt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,tt=e;else for(;tt!==null;){switch(n=tt,p=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)f=e[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,i=n,f=p.memoizedProps,p=p.memoizedState,a=i.stateNode;try{var ae=hl(i.type,f);e=a.getSnapshotBeforeUpdate(ae,p),a.__reactInternalSnapshotBeforeUpdate=e}catch(he){Ie(i,i.return,he)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)iu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":iu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=n.sibling,e!==null){e.return=n.return,tt=e;break}tt=n.return}}function _f(e,n,i){var a=i.flags;switch(i.tag){case 0:case 11:case 15:yn(e,i),a&4&&Yi(5,i);break;case 1:if(yn(e,i),a&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(T){Ie(i,i.return,T)}else{var f=hl(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(T){Ie(i,i.return,T)}}a&64&&Tf(i),a&512&&Ki(i,i.return);break;case 3:if(yn(e,i),a&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{cd(e,n)}catch(T){Ie(i,i.return,T)}}break;case 27:n===null&&a&4&&Af(i);case 26:case 5:yn(e,i),n===null&&a&4&&Sf(i),a&512&&Ki(i,i.return);break;case 12:yn(e,i);break;case 31:yn(e,i),a&4&&Df(e,i);break;case 13:yn(e,i),a&4&&Rf(e,i),a&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=ty.bind(null,i),Ty(e,i))));break;case 22:if(a=i.memoizedState!==null||pn,!a){n=n!==null&&n.memoizedState!==null||Ze,f=pn;var p=Ze;pn=a,(Ze=n)&&!p?xn(e,i,(i.subtreeFlags&8772)!==0):yn(e,i),pn=f,Ze=p}break;case 30:break;default:yn(e,i)}}function Mf(e){var n=e.alternate;n!==null&&(e.alternate=null,Mf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&ua(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ze=null,pt=!1;function gn(e,n,i){for(i=i.child;i!==null;)wf(e,n,i),i=i.sibling}function wf(e,n,i){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(Sn,i)}catch{}switch(i.tag){case 26:Ze||$t(i,n),gn(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ze||$t(i,n);var a=ze,f=pt;Pn(i.type)&&(ze=i.stateNode,pt=!1),gn(e,n,i),ts(i.stateNode),ze=a,pt=f;break;case 5:Ze||$t(i,n);case 6:if(a=ze,f=pt,ze=null,gn(e,n,i),ze=a,pt=f,ze!==null)if(pt)try{(ze.nodeType===9?ze.body:ze.nodeName==="HTML"?ze.ownerDocument.body:ze).removeChild(i.stateNode)}catch(p){Ie(i,n,p)}else try{ze.removeChild(i.stateNode)}catch(p){Ie(i,n,p)}break;case 18:ze!==null&&(pt?(e=ze,Th(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),li(e)):Th(ze,i.stateNode));break;case 4:a=ze,f=pt,ze=i.stateNode.containerInfo,pt=!0,gn(e,n,i),ze=a,pt=f;break;case 0:case 11:case 14:case 15:Ln(2,i,n),Ze||Ln(4,i,n),gn(e,n,i);break;case 1:Ze||($t(i,n),a=i.stateNode,typeof a.componentWillUnmount=="function"&&Nf(i,n,a)),gn(e,n,i);break;case 21:gn(e,n,i);break;case 22:Ze=(a=Ze)||i.memoizedState!==null,gn(e,n,i),Ze=a;break;default:gn(e,n,i)}}function Df(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{li(e)}catch(i){Ie(n,n.return,i)}}}function Rf(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{li(e)}catch(i){Ie(n,n.return,i)}}function F0(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Ef),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Ef),n;default:throw Error(o(435,e.tag))}}function co(e,n){var i=F0(e);n.forEach(function(a){if(!i.has(a)){i.add(a);var f=ny.bind(null,e,a);a.then(f,f)}})}function gt(e,n){var i=n.deletions;if(i!==null)for(var a=0;a<i.length;a++){var f=i[a],p=e,T=n,S=T;e:for(;S!==null;){switch(S.tag){case 27:if(Pn(S.type)){ze=S.stateNode,pt=!1;break e}break;case 5:ze=S.stateNode,pt=!1;break e;case 3:case 4:ze=S.stateNode.containerInfo,pt=!0;break e}S=S.return}if(ze===null)throw Error(o(160));wf(p,T,f),ze=null,pt=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)If(n,e),n=n.sibling}var Yt=null;function If(e,n){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gt(n,e),yt(e),a&4&&(Ln(3,e,e.return),Yi(3,e),Ln(5,e,e.return));break;case 1:gt(n,e),yt(e),a&512&&(Ze||i===null||$t(i,i.return)),a&64&&pn&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?a:i.concat(a))));break;case 26:var f=Yt;if(gt(n,e),yt(e),a&512&&(Ze||i===null||$t(i,i.return)),a&4){var p=i!==null?i.memoizedState:null;if(a=e.memoizedState,i===null)if(a===null)if(e.stateNode===null){e:{a=e.type,i=e.memoizedProps,f=f.ownerDocument||f;t:switch(a){case"title":p=f.getElementsByTagName("title")[0],(!p||p[vi]||p[nt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(a),f.head.insertBefore(p,f.querySelector("head > title"))),ot(p,a,i),p[nt]=e,et(p),a=p;break e;case"link":var T=Ih("link","href",f).get(a+(i.href||""));if(T){for(var S=0;S<T.length;S++)if(p=T[S],p.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&p.getAttribute("rel")===(i.rel==null?null:i.rel)&&p.getAttribute("title")===(i.title==null?null:i.title)&&p.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){T.splice(S,1);break t}}p=f.createElement(a),ot(p,a,i),f.head.appendChild(p);break;case"meta":if(T=Ih("meta","content",f).get(a+(i.content||""))){for(S=0;S<T.length;S++)if(p=T[S],p.getAttribute("content")===(i.content==null?null:""+i.content)&&p.getAttribute("name")===(i.name==null?null:i.name)&&p.getAttribute("property")===(i.property==null?null:i.property)&&p.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&p.getAttribute("charset")===(i.charSet==null?null:i.charSet)){T.splice(S,1);break t}}p=f.createElement(a),ot(p,a,i),f.head.appendChild(p);break;default:throw Error(o(468,a))}p[nt]=e,et(p),a=p}e.stateNode=a}else Uh(f,e.type,e.stateNode);else e.stateNode=Rh(f,a,e.memoizedProps);else p!==a?(p===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):p.count--,a===null?Uh(f,e.type,e.stateNode):Rh(f,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Dr(e,e.memoizedProps,i.memoizedProps)}break;case 27:gt(n,e),yt(e),a&512&&(Ze||i===null||$t(i,i.return)),i!==null&&a&4&&Dr(e,e.memoizedProps,i.memoizedProps);break;case 5:if(gt(n,e),yt(e),a&512&&(Ze||i===null||$t(i,i.return)),e.flags&32){f=e.stateNode;try{El(f,"")}catch(ae){Ie(e,e.return,ae)}}a&4&&e.stateNode!=null&&(f=e.memoizedProps,Dr(e,f,i!==null?i.memoizedProps:f)),a&1024&&(Ur=!0);break;case 6:if(gt(n,e),yt(e),a&4){if(e.stateNode===null)throw Error(o(162));a=e.memoizedProps,i=e.stateNode;try{i.nodeValue=a}catch(ae){Ie(e,e.return,ae)}}break;case 3:if(_o=null,f=Yt,Yt=Ao(n.containerInfo),gt(n,e),Yt=f,yt(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{li(n.containerInfo)}catch(ae){Ie(e,e.return,ae)}Ur&&(Ur=!1,Uf(e));break;case 4:a=Yt,Yt=Ao(e.stateNode.containerInfo),gt(n,e),yt(e),Yt=a;break;case 12:gt(n,e),yt(e);break;case 31:gt(n,e),yt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,co(e,a)));break;case 13:gt(n,e),yt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(ho=ut()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,co(e,a)));break;case 22:f=e.memoizedState!==null;var M=i!==null&&i.memoizedState!==null,z=pn,Q=Ze;if(pn=z||f,Ze=Q||M,gt(n,e),Ze=Q,pn=z,yt(e),a&8192)e:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(i===null||M||pn||Ze||ml(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){M=i=n;try{if(p=M.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{S=M.stateNode;var W=M.memoizedProps.style,Y=W!=null&&W.hasOwnProperty("display")?W.display:null;S.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ae){Ie(M,M.return,ae)}}}else if(n.tag===6){if(i===null){M=n;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(ae){Ie(M,M.return,ae)}}}else if(n.tag===18){if(i===null){M=n;try{var K=M.stateNode;f?Nh(K,!0):Nh(M.stateNode,!1)}catch(ae){Ie(M,M.return,ae)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}a&4&&(a=e.updateQueue,a!==null&&(i=a.retryQueue,i!==null&&(a.retryQueue=null,co(e,i))));break;case 19:gt(n,e),yt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,co(e,a)));break;case 30:break;case 21:break;default:gt(n,e),yt(e)}}function yt(e){var n=e.flags;if(n&2){try{for(var i,a=e.return;a!==null;){if(Cf(a)){i=a;break}a=a.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var f=i.stateNode,p=Rr(e);uo(e,p,f);break;case 5:var T=i.stateNode;i.flags&32&&(El(T,""),i.flags&=-33);var S=Rr(e);uo(e,S,T);break;case 3:case 4:var M=i.stateNode.containerInfo,z=Rr(e);Ir(e,z,M);break;default:throw Error(o(161))}}catch(Q){Ie(e,e.return,Q)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Uf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Uf(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function yn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)_f(e,n.alternate,n),n=n.sibling}function ml(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ln(4,n,n.return),ml(n);break;case 1:$t(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&Nf(n,n.return,i),ml(n);break;case 27:ts(n.stateNode);case 26:case 5:$t(n,n.return),ml(n);break;case 22:n.memoizedState===null&&ml(n);break;case 30:ml(n);break;default:ml(n)}e=e.sibling}}function xn(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var a=n.alternate,f=e,p=n,T=p.flags;switch(p.tag){case 0:case 11:case 15:xn(f,p,i),Yi(4,p);break;case 1:if(xn(f,p,i),a=p,f=a.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){Ie(a,a.return,z)}if(a=p,f=a.updateQueue,f!==null){var S=a.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)ud(M[f],S)}catch(z){Ie(a,a.return,z)}}i&&T&64&&Tf(p),Ki(p,p.return);break;case 27:Af(p);case 26:case 5:xn(f,p,i),i&&a===null&&T&4&&Sf(p),Ki(p,p.return);break;case 12:xn(f,p,i);break;case 31:xn(f,p,i),i&&T&4&&Df(f,p);break;case 13:xn(f,p,i),i&&T&4&&Rf(f,p);break;case 22:p.memoizedState===null&&xn(f,p,i),Ki(p,p.return);break;case 30:break;default:xn(f,p,i)}n=n.sibling}}function jr(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Ii(i))}function Lr(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ii(e))}function Kt(e,n,i,a){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)jf(e,n,i,a),n=n.sibling}function jf(e,n,i,a){var f=n.flags;switch(n.tag){case 0:case 11:case 15:Kt(e,n,i,a),f&2048&&Yi(9,n);break;case 1:Kt(e,n,i,a);break;case 3:Kt(e,n,i,a),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ii(e)));break;case 12:if(f&2048){Kt(e,n,i,a),e=n.stateNode;try{var p=n.memoizedProps,T=p.id,S=p.onPostCommit;typeof S=="function"&&S(T,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){Ie(n,n.return,M)}}else Kt(e,n,i,a);break;case 31:Kt(e,n,i,a);break;case 13:Kt(e,n,i,a);break;case 23:break;case 22:p=n.stateNode,T=n.alternate,n.memoizedState!==null?p._visibility&2?Kt(e,n,i,a):Fi(e,n):p._visibility&2?Kt(e,n,i,a):(p._visibility|=2,Kl(e,n,i,a,(n.subtreeFlags&10256)!==0||!1)),f&2048&&jr(T,n);break;case 24:Kt(e,n,i,a),f&2048&&Lr(n.alternate,n);break;default:Kt(e,n,i,a)}}function Kl(e,n,i,a,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var p=e,T=n,S=i,M=a,z=T.flags;switch(T.tag){case 0:case 11:case 15:Kl(p,T,S,M,f),Yi(8,T);break;case 23:break;case 22:var Q=T.stateNode;T.memoizedState!==null?Q._visibility&2?Kl(p,T,S,M,f):Fi(p,T):(Q._visibility|=2,Kl(p,T,S,M,f)),f&&z&2048&&jr(T.alternate,T);break;case 24:Kl(p,T,S,M,f),f&&z&2048&&Lr(T.alternate,T);break;default:Kl(p,T,S,M,f)}n=n.sibling}}function Fi(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,a=n,f=a.flags;switch(a.tag){case 22:Fi(i,a),f&2048&&jr(a.alternate,a);break;case 24:Fi(i,a),f&2048&&Lr(a.alternate,a);break;default:Fi(i,a)}n=n.sibling}}var Ji=8192;function Fl(e,n,i){if(e.subtreeFlags&Ji)for(e=e.child;e!==null;)Lf(e,n,i),e=e.sibling}function Lf(e,n,i){switch(e.tag){case 26:Fl(e,n,i),e.flags&Ji&&e.memoizedState!==null&&Uy(i,Yt,e.memoizedState,e.memoizedProps);break;case 5:Fl(e,n,i);break;case 3:case 4:var a=Yt;Yt=Ao(e.stateNode.containerInfo),Fl(e,n,i),Yt=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Ji,Ji=16777216,Fl(e,n,i),Ji=a):Fl(e,n,i));break;default:Fl(e,n,i)}}function Hf(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Qi(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];tt=a,Gf(a,e)}Hf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)kf(e),e=e.sibling}function kf(e){switch(e.tag){case 0:case 11:case 15:Qi(e),e.flags&2048&&Ln(9,e,e.return);break;case 3:Qi(e);break;case 12:Qi(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,fo(e)):Qi(e);break;default:Qi(e)}}function fo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];tt=a,Gf(a,e)}Hf(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ln(8,n,n.return),fo(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,fo(n));break;default:fo(n)}e=e.sibling}}function Gf(e,n){for(;tt!==null;){var i=tt;switch(i.tag){case 0:case 11:case 15:Ln(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var a=i.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Ii(i.memoizedState.cache)}if(a=i.child,a!==null)a.return=i,tt=a;else e:for(i=e;tt!==null;){a=tt;var f=a.sibling,p=a.return;if(Mf(a),a===i){tt=null;break e}if(f!==null){f.return=p,tt=f;break e}tt=p}}}var J0={getCacheForType:function(e){var n=it(Qe),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return it(Qe).controller.signal}},Q0=typeof WeakMap=="function"?WeakMap:Map,we=0,ke=null,be=null,Ne=0,Re=0,Et=null,Hn=!1,Jl=!1,Hr=!1,vn=0,Ke=0,kn=0,pl=0,kr=0,_t=0,Ql=0,Xi=null,xt=null,Gr=!1,ho=0,qf=0,mo=1/0,po=null,Gn=null,We=0,qn=null,Xl=null,bn=0,qr=0,Vr=null,Vf=null,$i=0,Br=null;function Mt(){return(we&2)!==0&&Ne!==0?Ne&-Ne:O.T!==null?Fr():tc()}function Bf(){if(_t===0)if((Ne&536870912)===0||Ae){var e=Ns;Ns<<=1,(Ns&3932160)===0&&(Ns=262144),_t=e}else _t=536870912;return e=Ct.current,e!==null&&(e.flags|=32),_t}function vt(e,n,i){(e===ke&&(Re===2||Re===9)||e.cancelPendingCommit!==null)&&($l(e,0),Vn(e,Ne,_t,!1)),xi(e,i),((we&2)===0||e!==ke)&&(e===ke&&((we&2)===0&&(pl|=i),Ke===4&&Vn(e,Ne,_t,!1)),Zt(e))}function Pf(e,n,i){if((we&6)!==0)throw Error(o(327));var a=!i&&(n&127)===0&&(n&e.expiredLanes)===0||yi(e,n),f=a?Z0(e,n):zr(e,n,!0),p=a;do{if(f===0){Jl&&!a&&Vn(e,n,0,!1);break}else{if(i=e.current.alternate,p&&!X0(i)){f=zr(e,n,!1),p=!1;continue}if(f===2){if(p=n,e.errorRecoveryDisabledLanes&p)var T=0;else T=e.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;e:{var S=e;f=Xi;var M=S.current.memoizedState.isDehydrated;if(M&&($l(S,T).flags|=256),T=zr(S,T,!1),T!==2){if(Hr&&!M){S.errorRecoveryDisabledLanes|=p,pl|=p,f=4;break e}p=xt,xt=f,p!==null&&(xt===null?xt=p:xt.push.apply(xt,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){$l(e,0),Vn(e,n,0,!0);break}e:{switch(a=e,p=f,p){case 0:case 1:throw Error(o(345));case 4:if((n&4194048)!==n)break;case 6:Vn(a,n,_t,!Hn);break e;case 2:xt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((n&62914560)===n&&(f=ho+300-ut(),10<f)){if(Vn(a,n,_t,!Hn),Cs(a,0,!0)!==0)break e;bn=n,a.timeoutHandle=vh(zf.bind(null,a,i,xt,po,Gr,n,_t,pl,Ql,Hn,p,"Throttled",-0,0),f);break e}zf(a,i,xt,po,Gr,n,_t,pl,Ql,Hn,p,null,-0,0)}}break}while(!0);Zt(e)}function zf(e,n,i,a,f,p,T,S,M,z,Q,W,Y,K){if(e.timeoutHandle=-1,W=n.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sn},Lf(n,p,W);var ae=(p&62914560)===p?ho-ut():(p&4194048)===p?qf-ut():0;if(ae=jy(W,ae),ae!==null){bn=p,e.cancelPendingCommit=ae($f.bind(null,e,n,p,i,a,f,T,S,M,Q,W,null,Y,K)),Vn(e,p,T,!z);return}}$f(e,n,p,i,a,f,T,S,M)}function X0(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var a=0;a<i.length;a++){var f=i[a],p=f.getSnapshot;f=f.value;try{if(!Nt(p(),f))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Vn(e,n,i,a){n&=~kr,n&=~pl,e.suspendedLanes|=n,e.pingedLanes&=~n,a&&(e.warmLanes|=n),a=e.expirationTimes;for(var f=n;0<f;){var p=31-Tt(f),T=1<<p;a[p]=-1,f&=~T}i!==0&&Zu(e,i,n)}function go(){return(we&6)===0?(Zi(0),!1):!0}function Pr(){if(be!==null){if(Re===0)var e=be.return;else e=be,un=ol=null,ir(e),Bl=null,ji=0,e=be;for(;e!==null;)bf(e.alternate,e),e=e.return;be=null}}function $l(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,gy(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),bn=0,Pr(),ke=e,be=i=an(e.current,null),Ne=n,Re=0,Et=null,Hn=!1,Jl=yi(e,n),Hr=!1,Ql=_t=kr=pl=kn=Ke=0,xt=Xi=null,Gr=!1,(n&8)!==0&&(n|=n&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=n;0<a;){var f=31-Tt(a),p=1<<f;n|=e[f],a&=~p}return vn=n,Hs(),i}function Of(e,n){xe=null,O.H=Pi,n===Vl||n===Os?(n=sd(),Re=3):n===Ka?(n=sd(),Re=4):Re=n===br?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Et=n,be===null&&(Ke=1,io(e,jt(n,e.current)))}function Yf(){var e=Ct.current;return e===null?!0:(Ne&4194048)===Ne?Gt===null:(Ne&62914560)===Ne||(Ne&536870912)!==0?e===Gt:!1}function Kf(){var e=O.H;return O.H=Pi,e===null?Pi:e}function Ff(){var e=O.A;return O.A=J0,e}function yo(){Ke=4,Hn||(Ne&4194048)!==Ne&&Ct.current!==null||(Jl=!0),(kn&134217727)===0&&(pl&134217727)===0||ke===null||Vn(ke,Ne,_t,!1)}function zr(e,n,i){var a=we;we|=2;var f=Kf(),p=Ff();(ke!==e||Ne!==n)&&(po=null,$l(e,n)),n=!1;var T=Ke;e:do try{if(Re!==0&&be!==null){var S=be,M=Et;switch(Re){case 8:Pr(),T=6;break e;case 3:case 2:case 9:case 6:Ct.current===null&&(n=!0);var z=Re;if(Re=0,Et=null,Zl(e,S,M,z),i&&Jl){T=0;break e}break;default:z=Re,Re=0,Et=null,Zl(e,S,M,z)}}$0(),T=Ke;break}catch(Q){Of(e,Q)}while(!0);return n&&e.shellSuspendCounter++,un=ol=null,we=a,O.H=f,O.A=p,be===null&&(ke=null,Ne=0,Hs()),T}function $0(){for(;be!==null;)Jf(be)}function Z0(e,n){var i=we;we|=2;var a=Kf(),f=Ff();ke!==e||Ne!==n?(po=null,mo=ut()+500,$l(e,n)):Jl=yi(e,n);e:do try{if(Re!==0&&be!==null){n=be;var p=Et;t:switch(Re){case 1:Re=0,Et=null,Zl(e,n,p,1);break;case 2:case 9:if(ld(p)){Re=0,Et=null,Qf(n);break}n=function(){Re!==2&&Re!==9||ke!==e||(Re=7),Zt(e)},p.then(n,n);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:ld(p)?(Re=0,Et=null,Qf(n)):(Re=0,Et=null,Zl(e,n,p,7));break;case 5:var T=null;switch(be.tag){case 26:T=be.memoizedState;case 5:case 27:var S=be;if(T?jh(T):S.stateNode.complete){Re=0,Et=null;var M=S.sibling;if(M!==null)be=M;else{var z=S.return;z!==null?(be=z,xo(z)):be=null}break t}}Re=0,Et=null,Zl(e,n,p,5);break;case 6:Re=0,Et=null,Zl(e,n,p,6);break;case 8:Pr(),Ke=6;break e;default:throw Error(o(462))}}W0();break}catch(Q){Of(e,Q)}while(!0);return un=ol=null,O.H=a,O.A=f,we=i,be!==null?0:(ke=null,Ne=0,Hs(),Ke)}function W0(){for(;be!==null&&!ys();)Jf(be)}function Jf(e){var n=xf(e.alternate,e,vn);e.memoizedProps=e.pendingProps,n===null?xo(e):be=n}function Qf(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=ff(i,n,n.pendingProps,n.type,void 0,Ne);break;case 11:n=ff(i,n,n.pendingProps,n.type.render,n.ref,Ne);break;case 5:ir(n);default:bf(i,n),n=be=Kc(n,vn),n=xf(i,n,vn)}e.memoizedProps=e.pendingProps,n===null?xo(e):be=n}function Zl(e,n,i,a){un=ol=null,ir(n),Bl=null,ji=0;var f=n.return;try{if(B0(e,f,n,i,Ne)){Ke=1,io(e,jt(i,e.current)),be=null;return}}catch(p){if(f!==null)throw be=f,p;Ke=1,io(e,jt(i,e.current)),be=null;return}n.flags&32768?(Ae||a===1?e=!0:Jl||(Ne&536870912)!==0?e=!1:(Hn=e=!0,(a===2||a===9||a===3||a===6)&&(a=Ct.current,a!==null&&a.tag===13&&(a.flags|=16384))),Xf(n,e)):xo(n)}function xo(e){var n=e;do{if((n.flags&32768)!==0){Xf(n,Hn);return}e=n.return;var i=O0(n.alternate,n,vn);if(i!==null){be=i;return}if(n=n.sibling,n!==null){be=n;return}be=n=e}while(n!==null);Ke===0&&(Ke=5)}function Xf(e,n){do{var i=Y0(e.alternate,e);if(i!==null){i.flags&=32767,be=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){be=e;return}be=e=i}while(e!==null);Ke=6,be=null}function $f(e,n,i,a,f,p,T,S,M){e.cancelPendingCommit=null;do vo();while(We!==0);if((we&6)!==0)throw Error(o(327));if(n!==null){if(n===e.current)throw Error(o(177));if(p=n.lanes|n.childLanes,p|=Ra,Ig(e,i,p,T,S,M),e===ke&&(be=ke=null,Ne=0),Xl=n,qn=e,bn=i,qr=p,Vr=f,Vf=a,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ly(wt,function(){return nh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||a){a=O.T,O.T=null,f=ee.p,ee.p=2,T=we,we|=4;try{K0(e,n,i)}finally{we=T,ee.p=f,O.T=a}}We=1,Zf(),Wf(),eh()}}function Zf(){if(We===1){We=0;var e=qn,n=Xl,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=O.T,O.T=null;var a=ee.p;ee.p=2;var f=we;we|=4;try{If(n,e);var p=tu,T=kc(e.containerInfo),S=p.focusedElem,M=p.selectionRange;if(T!==S&&S&&S.ownerDocument&&Hc(S.ownerDocument.documentElement,S)){if(M!==null&&Ea(S)){var z=M.start,Q=M.end;if(Q===void 0&&(Q=z),"selectionStart"in S)S.selectionStart=z,S.selectionEnd=Math.min(Q,S.value.length);else{var W=S.ownerDocument||document,Y=W&&W.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),ae=S.textContent.length,he=Math.min(M.start,ae),Le=M.end===void 0?he:Math.min(M.end,ae);!K.extend&&he>Le&&(T=Le,Le=he,he=T);var L=Lc(S,he),U=Lc(S,Le);if(L&&U&&(K.rangeCount!==1||K.anchorNode!==L.node||K.anchorOffset!==L.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var B=W.createRange();B.setStart(L.node,L.offset),K.removeAllRanges(),he>Le?(K.addRange(B),K.extend(U.node,U.offset)):(B.setEnd(U.node,U.offset),K.addRange(B))}}}}for(W=[],K=S;K=K.parentNode;)K.nodeType===1&&W.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<W.length;S++){var $=W[S];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Ro=!!eu,tu=eu=null}finally{we=f,ee.p=a,O.T=i}}e.current=n,We=2}}function Wf(){if(We===2){We=0;var e=qn,n=Xl,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=O.T,O.T=null;var a=ee.p;ee.p=2;var f=we;we|=4;try{_f(e,n.alternate,n)}finally{we=f,ee.p=a,O.T=i}}We=3}}function eh(){if(We===4||We===3){We=0,xs();var e=qn,n=Xl,i=bn,a=Vf;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?We=5:(We=0,Xl=qn=null,th(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Gn=null),aa(i),n=n.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(Sn,n,void 0,(n.current.flags&128)===128)}catch{}if(a!==null){n=O.T,f=ee.p,ee.p=2,O.T=null;try{for(var p=e.onRecoverableError,T=0;T<a.length;T++){var S=a[T];p(S.value,{componentStack:S.stack})}}finally{O.T=n,ee.p=f}}(bn&3)!==0&&vo(),Zt(e),f=e.pendingLanes,(i&261930)!==0&&(f&42)!==0?e===Br?$i++:($i=0,Br=e):$i=0,Zi(0)}}function th(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ii(n)))}function vo(){return Zf(),Wf(),eh(),nh()}function nh(){if(We!==5)return!1;var e=qn,n=qr;qr=0;var i=aa(bn),a=O.T,f=ee.p;try{ee.p=32>i?32:i,O.T=null,i=Vr,Vr=null;var p=qn,T=bn;if(We=0,Xl=qn=null,bn=0,(we&6)!==0)throw Error(o(331));var S=we;if(we|=4,kf(p.current),jf(p,p.current,T,i),we=S,Zi(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(Sn,p)}catch{}return!0}finally{ee.p=f,O.T=a,th(e,n)}}function lh(e,n,i){n=jt(i,n),n=vr(e.stateNode,n,2),e=In(e,n,2),e!==null&&(xi(e,2),Zt(e))}function Ie(e,n,i){if(e.tag===3)lh(e,e,i);else for(;n!==null;){if(n.tag===3){lh(n,e,i);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Gn===null||!Gn.has(a))){e=jt(i,e),i=lf(2),a=In(n,i,2),a!==null&&(sf(i,a,n,e),xi(a,2),Zt(a));break}}n=n.return}}function Or(e,n,i){var a=e.pingCache;if(a===null){a=e.pingCache=new Q0;var f=new Set;a.set(n,f)}else f=a.get(n),f===void 0&&(f=new Set,a.set(n,f));f.has(i)||(Hr=!0,f.add(i),e=ey.bind(null,e,n,i),n.then(e,e))}function ey(e,n,i){var a=e.pingCache;a!==null&&a.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,ke===e&&(Ne&i)===i&&(Ke===4||Ke===3&&(Ne&62914560)===Ne&&300>ut()-ho?(we&2)===0&&$l(e,0):kr|=i,Ql===Ne&&(Ql=0)),Zt(e)}function ih(e,n){n===0&&(n=$u()),e=ll(e,n),e!==null&&(xi(e,n),Zt(e))}function ty(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),ih(e,i)}function ny(e,n){var i=0;switch(e.tag){case 31:case 13:var a=e.stateNode,f=e.memoizedState;f!==null&&(i=f.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(o(314))}a!==null&&a.delete(n),ih(e,i)}function ly(e,n){return gi(e,n)}var bo=null,Wl=null,Yr=!1,To=!1,Kr=!1,Bn=0;function Zt(e){e!==Wl&&e.next===null&&(Wl===null?bo=Wl=e:Wl=Wl.next=e),To=!0,Yr||(Yr=!0,sy())}function Zi(e,n){if(!Kr&&To){Kr=!0;do for(var i=!1,a=bo;a!==null;){if(e!==0){var f=a.pendingLanes;if(f===0)var p=0;else{var T=a.suspendedLanes,S=a.pingedLanes;p=(1<<31-Tt(42|e)+1)-1,p&=f&~(T&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(i=!0,rh(a,p))}else p=Ne,p=Cs(a,a===ke?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(p&3)===0||yi(a,p)||(i=!0,rh(a,p));a=a.next}while(i);Kr=!1}}function iy(){sh()}function sh(){To=Yr=!1;var e=0;Bn!==0&&py()&&(e=Bn);for(var n=ut(),i=null,a=bo;a!==null;){var f=a.next,p=oh(a,n);p===0?(a.next=null,i===null?bo=f:i.next=f,f===null&&(Wl=i)):(i=a,(e!==0||(p&3)!==0)&&(To=!0)),a=f}We!==0&&We!==5||Zi(e),Bn!==0&&(Bn=0)}function oh(e,n){for(var i=e.suspendedLanes,a=e.pingedLanes,f=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var T=31-Tt(p),S=1<<T,M=f[T];M===-1?((S&i)===0||(S&a)!==0)&&(f[T]=Rg(S,n)):M<=n&&(e.expiredLanes|=S),p&=~S}if(n=ke,i=Ne,i=Cs(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,i===0||e===n&&(Re===2||Re===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&vl(a),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||yi(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(a!==null&&vl(a),aa(i)){case 2:case 8:i=Pe;break;case 32:i=wt;break;case 268435456:i=Dt;break;default:i=wt}return a=ah.bind(null,e),i=gi(i,a),e.callbackPriority=n,e.callbackNode=i,n}return a!==null&&a!==null&&vl(a),e.callbackPriority=2,e.callbackNode=null,2}function ah(e,n){if(We!==0&&We!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(vo()&&e.callbackNode!==i)return null;var a=Ne;return a=Cs(e,e===ke?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Pf(e,a,n),oh(e,ut()),e.callbackNode!=null&&e.callbackNode===i?ah.bind(null,e):null)}function rh(e,n){if(vo())return null;Pf(e,n,!0)}function sy(){yy(function(){(we&6)!==0?gi(De,iy):sh()})}function Fr(){if(Bn===0){var e=Gl;e===0&&(e=Ts,Ts<<=1,(Ts&261888)===0&&(Ts=256)),Bn=e}return Bn}function uh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ms(""+e)}function ch(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function oy(e,n,i,a,f){if(n==="submit"&&i&&i.stateNode===f){var p=uh((f[ht]||null).action),T=a.submitter;T&&(n=(n=T[ht]||null)?uh(n.formAction):T.getAttribute("formAction"),n!==null&&(p=n,T=null));var S=new Is("action","action",null,a,f);e.push({event:S,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Bn!==0){var M=T?ch(f,T):new FormData(f);hr(i,{pending:!0,data:M,method:f.method,action:p},null,M)}}else typeof p=="function"&&(S.preventDefault(),M=T?ch(f,T):new FormData(f),hr(i,{pending:!0,data:M,method:f.method,action:p},p,M))},currentTarget:f}]})}}for(var Jr=0;Jr<Da.length;Jr++){var Qr=Da[Jr],ay=Qr.toLowerCase(),ry=Qr[0].toUpperCase()+Qr.slice(1);Ot(ay,"on"+ry)}Ot(Vc,"onAnimationEnd"),Ot(Bc,"onAnimationIteration"),Ot(Pc,"onAnimationStart"),Ot("dblclick","onDoubleClick"),Ot("focusin","onFocus"),Ot("focusout","onBlur"),Ot(C0,"onTransitionRun"),Ot(A0,"onTransitionStart"),Ot(E0,"onTransitionCancel"),Ot(zc,"onTransitionEnd"),Cl("onMouseEnter",["mouseout","mouseover"]),Cl("onMouseLeave",["mouseout","mouseover"]),Cl("onPointerEnter",["pointerout","pointerover"]),Cl("onPointerLeave",["pointerout","pointerover"]),Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wi));function dh(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],f=a.event;a=a.listeners;e:{var p=void 0;if(n)for(var T=a.length-1;0<=T;T--){var S=a[T],M=S.instance,z=S.currentTarget;if(S=S.listener,M!==p&&f.isPropagationStopped())break e;p=S,f.currentTarget=z;try{p(f)}catch(Q){Ls(Q)}f.currentTarget=null,p=M}else for(T=0;T<a.length;T++){if(S=a[T],M=S.instance,z=S.currentTarget,S=S.listener,M!==p&&f.isPropagationStopped())break e;p=S,f.currentTarget=z;try{p(f)}catch(Q){Ls(Q)}f.currentTarget=null,p=M}}}}function Te(e,n){var i=n[ra];i===void 0&&(i=n[ra]=new Set);var a=e+"__bubble";i.has(a)||(fh(n,e,2,!1),i.add(a))}function Xr(e,n,i){var a=0;n&&(a|=4),fh(i,e,a,n)}var No="_reactListening"+Math.random().toString(36).slice(2);function $r(e){if(!e[No]){e[No]=!0,ic.forEach(function(i){i!=="selectionchange"&&(uy.has(i)||Xr(i,!1,e),Xr(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[No]||(n[No]=!0,Xr("selectionchange",!1,n))}}function fh(e,n,i,a){switch(Bh(n)){case 2:var f=ky;break;case 8:f=Gy;break;default:f=fu}i=f.bind(null,n,i,e),f=void 0,!ya||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),a?f!==void 0?e.addEventListener(n,i,{capture:!0,passive:f}):e.addEventListener(n,i,!0):f!==void 0?e.addEventListener(n,i,{passive:f}):e.addEventListener(n,i,!1)}function Zr(e,n,i,a,f){var p=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var T=a.tag;if(T===3||T===4){var S=a.stateNode.containerInfo;if(S===f)break;if(T===4)for(T=a.return;T!==null;){var M=T.tag;if((M===3||M===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;S!==null;){if(T=Tl(S),T===null)return;if(M=T.tag,M===5||M===6||M===26||M===27){a=p=T;continue e}S=S.parentNode}}a=a.return}gc(function(){var z=p,Q=pa(i),W=[];e:{var Y=Oc.get(e);if(Y!==void 0){var K=Is,ae=e;switch(e){case"keypress":if(Ds(i)===0)break e;case"keydown":case"keyup":K=n0;break;case"focusin":ae="focus",K=Ta;break;case"focusout":ae="blur",K=Ta;break;case"beforeblur":case"afterblur":K=Ta;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Og;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=s0;break;case Vc:case Bc:case Pc:K=Fg;break;case zc:K=a0;break;case"scroll":case"scrollend":K=Pg;break;case"wheel":K=u0;break;case"copy":case"cut":case"paste":K=Qg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Tc;break;case"toggle":case"beforetoggle":K=d0}var he=(n&4)!==0,Le=!he&&(e==="scroll"||e==="scrollend"),L=he?Y!==null?Y+"Capture":null:Y;he=[];for(var U=z,B;U!==null;){var $=U;if(B=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||B===null||L===null||($=Ti(U,L),$!=null&&he.push(es(U,$,B))),Le)break;U=U.return}0<he.length&&(Y=new K(Y,ae,null,i,Q),W.push({event:Y,listeners:he}))}}if((n&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",Y&&i!==ma&&(ae=i.relatedTarget||i.fromElement)&&(Tl(ae)||ae[bl]))break e;if((K||Y)&&(Y=Q.window===Q?Q:(Y=Q.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(ae=i.relatedTarget||i.toElement,K=z,ae=ae?Tl(ae):null,ae!==null&&(Le=d(ae),he=ae.tag,ae!==Le||he!==5&&he!==27&&he!==6)&&(ae=null)):(K=null,ae=z),K!==ae)){if(he=vc,$="onMouseLeave",L="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(he=Tc,$="onPointerLeave",L="onPointerEnter",U="pointer"),Le=K==null?Y:bi(K),B=ae==null?Y:bi(ae),Y=new he($,U+"leave",K,i,Q),Y.target=Le,Y.relatedTarget=B,$=null,Tl(Q)===z&&(he=new he(L,U+"enter",ae,i,Q),he.target=B,he.relatedTarget=Le,$=he),Le=$,K&&ae)t:{for(he=cy,L=K,U=ae,B=0,$=L;$;$=he($))B++;$=0;for(var fe=U;fe;fe=he(fe))$++;for(;0<B-$;)L=he(L),B--;for(;0<$-B;)U=he(U),$--;for(;B--;){if(L===U||U!==null&&L===U.alternate){he=L;break t}L=he(L),U=he(U)}he=null}else he=null;K!==null&&hh(W,Y,K,he,!1),ae!==null&&Le!==null&&hh(W,Le,ae,he,!0)}}e:{if(Y=z?bi(z):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var Ee=wc;else if(_c(Y))if(Dc)Ee=T0;else{Ee=v0;var ce=x0}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?z&&ha(z.elementType)&&(Ee=wc):Ee=b0;if(Ee&&(Ee=Ee(e,z))){Mc(W,Ee,i,Q);break e}ce&&ce(e,Y,z),e==="focusout"&&z&&Y.type==="number"&&z.memoizedProps.value!=null&&fa(Y,"number",Y.value)}switch(ce=z?bi(z):window,e){case"focusin":(_c(ce)||ce.contentEditable==="true")&&(Dl=ce,_a=z,wi=null);break;case"focusout":wi=_a=Dl=null;break;case"mousedown":Ma=!0;break;case"contextmenu":case"mouseup":case"dragend":Ma=!1,Gc(W,i,Q);break;case"selectionchange":if(S0)break;case"keydown":case"keyup":Gc(W,i,Q)}var ve;if(Sa)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else wl?Ac(e,i)&&(Se="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Se="onCompositionStart");Se&&(Nc&&i.locale!=="ko"&&(wl||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&wl&&(ve=yc()):(An=Q,xa="value"in An?An.value:An.textContent,wl=!0)),ce=So(z,Se),0<ce.length&&(Se=new bc(Se,e,null,i,Q),W.push({event:Se,listeners:ce}),ve?Se.data=ve:(ve=Ec(i),ve!==null&&(Se.data=ve)))),(ve=h0?m0(e,i):p0(e,i))&&(Se=So(z,"onBeforeInput"),0<Se.length&&(ce=new bc("onBeforeInput","beforeinput",null,i,Q),W.push({event:ce,listeners:Se}),ce.data=ve)),oy(W,e,z,i,Q)}dh(W,n)})}function es(e,n,i){return{instance:e,listener:n,currentTarget:i}}function So(e,n){for(var i=n+"Capture",a=[];e!==null;){var f=e,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Ti(e,i),f!=null&&a.unshift(es(e,f,p)),f=Ti(e,n),f!=null&&a.push(es(e,f,p))),e.tag===3)return a;e=e.return}return[]}function cy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function hh(e,n,i,a,f){for(var p=n._reactName,T=[];i!==null&&i!==a;){var S=i,M=S.alternate,z=S.stateNode;if(S=S.tag,M!==null&&M===a)break;S!==5&&S!==26&&S!==27||z===null||(M=z,f?(z=Ti(i,p),z!=null&&T.unshift(es(i,z,M))):f||(z=Ti(i,p),z!=null&&T.push(es(i,z,M)))),i=i.return}T.length!==0&&e.push({event:n,listeners:T})}var dy=/\r\n?/g,fy=/\u0000|\uFFFD/g;function mh(e){return(typeof e=="string"?e:""+e).replace(dy,`
`).replace(fy,"")}function ph(e,n){return n=mh(n),mh(e)===n}function je(e,n,i,a,f,p){switch(i){case"children":typeof a=="string"?n==="body"||n==="textarea"&&a===""||El(e,a):(typeof a=="number"||typeof a=="bigint")&&n!=="body"&&El(e,""+a);break;case"className":Es(e,"class",a);break;case"tabIndex":Es(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Es(e,i,a);break;case"style":mc(e,a,p);break;case"data":if(n!=="object"){Es(e,"data",a);break}case"src":case"href":if(a===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(i);break}a=Ms(""+a),e.setAttribute(i,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(i==="formAction"?(n!=="input"&&je(e,n,"name",f.name,f,null),je(e,n,"formEncType",f.formEncType,f,null),je(e,n,"formMethod",f.formMethod,f,null),je(e,n,"formTarget",f.formTarget,f,null)):(je(e,n,"encType",f.encType,f,null),je(e,n,"method",f.method,f,null),je(e,n,"target",f.target,f,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(i);break}a=Ms(""+a),e.setAttribute(i,a);break;case"onClick":a!=null&&(e.onclick=sn);break;case"onScroll":a!=null&&Te("scroll",e);break;case"onScrollEnd":a!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(i=a.__html,i!=null){if(f.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}i=Ms(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,""+a):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":a===!0?e.setAttribute(i,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,a):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(i,a):e.removeAttribute(i);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(i):e.setAttribute(i,a);break;case"popover":Te("beforetoggle",e),Te("toggle",e),As(e,"popover",a);break;case"xlinkActuate":ln(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":ln(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":ln(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":ln(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":ln(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":ln(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":ln(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":ln(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":ln(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":As(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Vg.get(i)||i,As(e,i,a))}}function Wr(e,n,i,a,f,p){switch(i){case"style":mc(e,a,p);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(i=a.__html,i!=null){if(f.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof a=="string"?El(e,a):(typeof a=="number"||typeof a=="bigint")&&El(e,""+a);break;case"onScroll":a!=null&&Te("scroll",e);break;case"onScrollEnd":a!=null&&Te("scrollend",e);break;case"onClick":a!=null&&(e.onclick=sn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sc.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),n=i.slice(2,f?i.length-7:void 0),p=e[ht]||null,p=p!=null?p[i]:null,typeof p=="function"&&e.removeEventListener(n,p,f),typeof a=="function")){typeof p!="function"&&p!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,a,f);break e}i in e?e[i]=a:a===!0?e.setAttribute(i,""):As(e,i,a)}}}function ot(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var a=!1,f=!1,p;for(p in i)if(i.hasOwnProperty(p)){var T=i[p];if(T!=null)switch(p){case"src":a=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:je(e,n,p,T,i,null)}}f&&je(e,n,"srcSet",i.srcSet,i,null),a&&je(e,n,"src",i.src,i,null);return;case"input":Te("invalid",e);var S=p=T=f=null,M=null,z=null;for(a in i)if(i.hasOwnProperty(a)){var Q=i[a];if(Q!=null)switch(a){case"name":f=Q;break;case"type":T=Q;break;case"checked":M=Q;break;case"defaultChecked":z=Q;break;case"value":p=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,n));break;default:je(e,n,a,Q,i,null)}}cc(e,p,S,M,z,T,f,!1);return;case"select":Te("invalid",e),a=T=p=null;for(f in i)if(i.hasOwnProperty(f)&&(S=i[f],S!=null))switch(f){case"value":p=S;break;case"defaultValue":T=S;break;case"multiple":a=S;default:je(e,n,f,S,i,null)}n=p,i=T,e.multiple=!!a,n!=null?Al(e,!!a,n,!1):i!=null&&Al(e,!!a,i,!0);return;case"textarea":Te("invalid",e),p=f=a=null;for(T in i)if(i.hasOwnProperty(T)&&(S=i[T],S!=null))switch(T){case"value":a=S;break;case"defaultValue":f=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:je(e,n,T,S,i,null)}fc(e,a,f,p);return;case"option":for(M in i)if(i.hasOwnProperty(M)&&(a=i[M],a!=null))switch(M){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:je(e,n,M,a,i,null)}return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(a=0;a<Wi.length;a++)Te(Wi[a],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in i)if(i.hasOwnProperty(z)&&(a=i[z],a!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:je(e,n,z,a,i,null)}return;default:if(ha(n)){for(Q in i)i.hasOwnProperty(Q)&&(a=i[Q],a!==void 0&&Wr(e,n,Q,a,i,void 0));return}}for(S in i)i.hasOwnProperty(S)&&(a=i[S],a!=null&&je(e,n,S,a,i,null))}function hy(e,n,i,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,S=null,M=null,z=null,Q=null;for(K in i){var W=i[K];if(i.hasOwnProperty(K)&&W!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":M=W;default:a.hasOwnProperty(K)||je(e,n,K,null,a,W)}}for(var Y in a){var K=a[Y];if(W=i[Y],a.hasOwnProperty(Y)&&(K!=null||W!=null))switch(Y){case"type":p=K;break;case"name":f=K;break;case"checked":z=K;break;case"defaultChecked":Q=K;break;case"value":T=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,n));break;default:K!==W&&je(e,n,Y,K,a,W)}}da(e,T,S,M,z,Q,p,f);return;case"select":K=T=S=Y=null;for(p in i)if(M=i[p],i.hasOwnProperty(p)&&M!=null)switch(p){case"value":break;case"multiple":K=M;default:a.hasOwnProperty(p)||je(e,n,p,null,a,M)}for(f in a)if(p=a[f],M=i[f],a.hasOwnProperty(f)&&(p!=null||M!=null))switch(f){case"value":Y=p;break;case"defaultValue":S=p;break;case"multiple":T=p;default:p!==M&&je(e,n,f,p,a,M)}n=S,i=T,a=K,Y!=null?Al(e,!!i,Y,!1):!!a!=!!i&&(n!=null?Al(e,!!i,n,!0):Al(e,!!i,i?[]:"",!1));return;case"textarea":K=Y=null;for(S in i)if(f=i[S],i.hasOwnProperty(S)&&f!=null&&!a.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:je(e,n,S,null,a,f)}for(T in a)if(f=a[T],p=i[T],a.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":Y=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(o(91));break;default:f!==p&&je(e,n,T,f,a,p)}dc(e,Y,K);return;case"option":for(var ae in i)if(Y=i[ae],i.hasOwnProperty(ae)&&Y!=null&&!a.hasOwnProperty(ae))switch(ae){case"selected":e.selected=!1;break;default:je(e,n,ae,null,a,Y)}for(M in a)if(Y=a[M],K=i[M],a.hasOwnProperty(M)&&Y!==K&&(Y!=null||K!=null))switch(M){case"selected":e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:je(e,n,M,Y,a,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in i)Y=i[he],i.hasOwnProperty(he)&&Y!=null&&!a.hasOwnProperty(he)&&je(e,n,he,null,a,Y);for(z in a)if(Y=a[z],K=i[z],a.hasOwnProperty(z)&&Y!==K&&(Y!=null||K!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,n));break;default:je(e,n,z,Y,a,K)}return;default:if(ha(n)){for(var Le in i)Y=i[Le],i.hasOwnProperty(Le)&&Y!==void 0&&!a.hasOwnProperty(Le)&&Wr(e,n,Le,void 0,a,Y);for(Q in a)Y=a[Q],K=i[Q],!a.hasOwnProperty(Q)||Y===K||Y===void 0&&K===void 0||Wr(e,n,Q,Y,a,K);return}}for(var L in i)Y=i[L],i.hasOwnProperty(L)&&Y!=null&&!a.hasOwnProperty(L)&&je(e,n,L,null,a,Y);for(W in a)Y=a[W],K=i[W],!a.hasOwnProperty(W)||Y===K||Y==null&&K==null||je(e,n,W,Y,a,K)}function gh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function my(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),a=0;a<i.length;a++){var f=i[a],p=f.transferSize,T=f.initiatorType,S=f.duration;if(p&&S&&gh(T)){for(T=0,S=f.responseEnd,a+=1;a<i.length;a++){var M=i[a],z=M.startTime;if(z>S)break;var Q=M.transferSize,W=M.initiatorType;Q&&gh(W)&&(M=M.responseEnd,T+=Q*(M<S?1:(S-z)/(M-z)))}if(--a,n+=8*(p+T)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var eu=null,tu=null;function Co(e){return e.nodeType===9?e:e.ownerDocument}function yh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xh(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function nu(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var lu=null;function py(){var e=window.event;return e&&e.type==="popstate"?e===lu?!1:(lu=e,!0):(lu=null,!1)}var vh=typeof setTimeout=="function"?setTimeout:void 0,gy=typeof clearTimeout=="function"?clearTimeout:void 0,bh=typeof Promise=="function"?Promise:void 0,yy=typeof queueMicrotask=="function"?queueMicrotask:typeof bh<"u"?function(e){return bh.resolve(null).then(e).catch(xy)}:vh;function xy(e){setTimeout(function(){throw e})}function Pn(e){return e==="head"}function Th(e,n){var i=n,a=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(a===0){e.removeChild(f),li(n);return}a--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")a++;else if(i==="html")ts(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,ts(i);for(var p=i.firstChild;p;){var T=p.nextSibling,S=p.nodeName;p[vi]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&p.rel.toLowerCase()==="stylesheet"||i.removeChild(p),p=T}}else i==="body"&&ts(e.ownerDocument.body);i=f}while(i);li(n)}function Nh(e,n){var i=e;e=0;do{var a=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),a&&a.nodeType===8)if(i=a.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=a}while(i)}function iu(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":iu(i),ua(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function vy(e,n,i,a){for(;e.nodeType===1;){var f=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[vi])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=qt(e.nextSibling),e===null)break}return null}function by(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=qt(e.nextSibling),e===null))return null;return e}function Sh(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=qt(e.nextSibling),e===null))return null;return e}function su(e){return e.data==="$?"||e.data==="$~"}function ou(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ty(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var a=function(){n(),i.removeEventListener("DOMContentLoaded",a)};i.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function qt(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var au=null;function Ch(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return qt(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function Ah(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function Eh(e,n,i){switch(n=Co(i),e){case"html":if(e=n.documentElement,!e)throw Error(o(452));return e;case"head":if(e=n.head,!e)throw Error(o(453));return e;case"body":if(e=n.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function ts(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);ua(e)}var Vt=new Map,_h=new Set;function Ao(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Tn=ee.d;ee.d={f:Ny,r:Sy,D:Cy,C:Ay,L:Ey,m:_y,X:wy,S:My,M:Dy};function Ny(){var e=Tn.f(),n=go();return e||n}function Sy(e){var n=Nl(e);n!==null&&n.tag===5&&n.type==="form"?zd(n):Tn.r(e)}var ei=typeof document>"u"?null:document;function Mh(e,n,i){var a=ei;if(a&&typeof n=="string"&&n){var f=It(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),_h.has(f)||(_h.add(f),e={rel:e,crossOrigin:i,href:n},a.querySelector(f)===null&&(n=a.createElement("link"),ot(n,"link",e),et(n),a.head.appendChild(n)))}}function Cy(e){Tn.D(e),Mh("dns-prefetch",e,null)}function Ay(e,n){Tn.C(e,n),Mh("preconnect",e,n)}function Ey(e,n,i){Tn.L(e,n,i);var a=ei;if(a&&e&&n){var f='link[rel="preload"][as="'+It(n)+'"]';n==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+It(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+It(i.imageSizes)+'"]')):f+='[href="'+It(e)+'"]';var p=f;switch(n){case"style":p=ti(e);break;case"script":p=ni(e)}Vt.has(p)||(e=b({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Vt.set(p,e),a.querySelector(f)!==null||n==="style"&&a.querySelector(ns(p))||n==="script"&&a.querySelector(ls(p))||(n=a.createElement("link"),ot(n,"link",e),et(n),a.head.appendChild(n)))}}function _y(e,n){Tn.m(e,n);var i=ei;if(i&&e){var a=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+It(a)+'"][href="'+It(e)+'"]',p=f;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ni(e)}if(!Vt.has(p)&&(e=b({rel:"modulepreload",href:e},n),Vt.set(p,e),i.querySelector(f)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ls(p)))return}a=i.createElement("link"),ot(a,"link",e),et(a),i.head.appendChild(a)}}}function My(e,n,i){Tn.S(e,n,i);var a=ei;if(a&&e){var f=Sl(a).hoistableStyles,p=ti(e);n=n||"default";var T=f.get(p);if(!T){var S={loading:0,preload:null};if(T=a.querySelector(ns(p)))S.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Vt.get(p))&&ru(e,i);var M=T=a.createElement("link");et(M),ot(M,"link",e),M._p=new Promise(function(z,Q){M.onload=z,M.onerror=Q}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Eo(T,n,a)}T={type:"stylesheet",instance:T,count:1,state:S},f.set(p,T)}}}function wy(e,n){Tn.X(e,n);var i=ei;if(i&&e){var a=Sl(i).hoistableScripts,f=ni(e),p=a.get(f);p||(p=i.querySelector(ls(f)),p||(e=b({src:e,async:!0},n),(n=Vt.get(f))&&uu(e,n),p=i.createElement("script"),et(p),ot(p,"link",e),i.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},a.set(f,p))}}function Dy(e,n){Tn.M(e,n);var i=ei;if(i&&e){var a=Sl(i).hoistableScripts,f=ni(e),p=a.get(f);p||(p=i.querySelector(ls(f)),p||(e=b({src:e,async:!0,type:"module"},n),(n=Vt.get(f))&&uu(e,n),p=i.createElement("script"),et(p),ot(p,"link",e),i.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},a.set(f,p))}}function wh(e,n,i,a){var f=(f=pe.current)?Ao(f):null;if(!f)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=ti(i.href),i=Sl(f).hoistableStyles,a=i.get(n),a||(a={type:"style",instance:null,count:0,state:null},i.set(n,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=ti(i.href);var p=Sl(f).hoistableStyles,T=p.get(e);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,T),(p=f.querySelector(ns(e)))&&!p._p&&(T.instance=p,T.state.loading=5),Vt.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Vt.set(e,i),p||Ry(f,e,i,T.state))),n&&a===null)throw Error(o(528,""));return T}if(n&&a!==null)throw Error(o(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ni(i),i=Sl(f).hoistableScripts,a=i.get(n),a||(a={type:"script",instance:null,count:0,state:null},i.set(n,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function ti(e){return'href="'+It(e)+'"'}function ns(e){return'link[rel="stylesheet"]['+e+"]"}function Dh(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Ry(e,n,i,a){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?a.loading=1:(n=e.createElement("link"),a.preload=n,n.addEventListener("load",function(){return a.loading|=1}),n.addEventListener("error",function(){return a.loading|=2}),ot(n,"link",i),et(n),e.head.appendChild(n))}function ni(e){return'[src="'+It(e)+'"]'}function ls(e){return"script[async]"+e}function Rh(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var a=e.querySelector('style[data-href~="'+It(i.href)+'"]');if(a)return n.instance=a,et(a),a;var f=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),et(a),ot(a,"style",f),Eo(a,i.precedence,e),n.instance=a;case"stylesheet":f=ti(i.href);var p=e.querySelector(ns(f));if(p)return n.state.loading|=4,n.instance=p,et(p),p;a=Dh(i),(f=Vt.get(f))&&ru(a,f),p=(e.ownerDocument||e).createElement("link"),et(p);var T=p;return T._p=new Promise(function(S,M){T.onload=S,T.onerror=M}),ot(p,"link",a),n.state.loading|=4,Eo(p,i.precedence,e),n.instance=p;case"script":return p=ni(i.src),(f=e.querySelector(ls(p)))?(n.instance=f,et(f),f):(a=i,(f=Vt.get(p))&&(a=b({},i),uu(a,f)),e=e.ownerDocument||e,f=e.createElement("script"),et(f),ot(f,"link",a),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(o(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(a=n.instance,n.state.loading|=4,Eo(a,i.precedence,e));return n.instance}function Eo(e,n,i){for(var a=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=a.length?a[a.length-1]:null,p=f,T=0;T<a.length;T++){var S=a[T];if(S.dataset.precedence===n)p=S;else if(p!==f)break}p?p.parentNode.insertBefore(e,p.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function ru(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function uu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var _o=null;function Ih(e,n,i){if(_o===null){var a=new Map,f=_o=new Map;f.set(i,a)}else f=_o,a=f.get(i),a||(a=new Map,f.set(i,a));if(a.has(e))return a;for(a.set(e,null),i=i.getElementsByTagName(e),f=0;f<i.length;f++){var p=i[f];if(!(p[vi]||p[nt]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(n)||"";T=e+T;var S=a.get(T);S?S.push(p):a.set(T,[p])}}return a}function Uh(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function Iy(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function jh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Uy(e,n,i,a){if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=ti(a.href),p=n.querySelector(ns(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Mo.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=p,et(p);return}p=n.ownerDocument||n,a=Dh(a),(f=Vt.get(f))&&ru(a,f),p=p.createElement("link"),et(p);var T=p;T._p=new Promise(function(S,M){T.onload=S,T.onerror=M}),ot(p,"link",a),i.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Mo.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var cu=0;function jy(e,n){return e.stylesheets&&e.count===0&&Do(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var a=setTimeout(function(){if(e.stylesheets&&Do(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+n);0<e.imgBytes&&cu===0&&(cu=62500*my());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Do(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>cu?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(f)}}:null}function Mo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Do(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wo=null;function Do(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wo=new Map,n.forEach(Ly,e),wo=null,Mo.call(e))}function Ly(e,n){if(!(n.state.loading&4)){var i=wo.get(e);if(i)var a=i.get(null);else{i=new Map,wo.set(e,i);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(i.set(T.dataset.precedence,T),a=T)}a&&i.set(null,a)}f=n.instance,T=f.getAttribute("data-precedence"),p=i.get(T)||a,p===a&&i.set(null,f),i.set(T,f),this.count++,a=Mo.bind(this),f.addEventListener("load",a),f.addEventListener("error",a),p?p.parentNode.insertBefore(f,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var is={$$typeof:q,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function Hy(e,n,i,a,f,p,T,S,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sa(0),this.hiddenUpdates=sa(null),this.identifierPrefix=a,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Lh(e,n,i,a,f,p,T,S,M,z,Q,W){return e=new Hy(e,n,i,T,M,z,Q,W,S),n=1,p===!0&&(n|=24),p=St(3,null,null,n),e.current=p,p.stateNode=e,n=za(),n.refCount++,e.pooledCache=n,n.refCount++,p.memoizedState={element:a,isDehydrated:i,cache:n},Fa(p),e}function Hh(e){return e?(e=Ul,e):Ul}function kh(e,n,i,a,f,p){f=Hh(f),a.context===null?a.context=f:a.pendingContext=f,a=Rn(n),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=In(e,a,n),i!==null&&(vt(i,e,n),Hi(i,e,n))}function Gh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function du(e,n){Gh(e,n),(e=e.alternate)&&Gh(e,n)}function qh(e){if(e.tag===13||e.tag===31){var n=ll(e,67108864);n!==null&&vt(n,e,67108864),du(e,67108864)}}function Vh(e){if(e.tag===13||e.tag===31){var n=Mt();n=oa(n);var i=ll(e,n);i!==null&&vt(i,e,n),du(e,n)}}var Ro=!0;function ky(e,n,i,a){var f=O.T;O.T=null;var p=ee.p;try{ee.p=2,fu(e,n,i,a)}finally{ee.p=p,O.T=f}}function Gy(e,n,i,a){var f=O.T;O.T=null;var p=ee.p;try{ee.p=8,fu(e,n,i,a)}finally{ee.p=p,O.T=f}}function fu(e,n,i,a){if(Ro){var f=hu(a);if(f===null)Zr(e,n,a,Io,i),Ph(e,a);else if(Vy(f,e,n,i,a))a.stopPropagation();else if(Ph(e,a),n&4&&-1<qy.indexOf(e)){for(;f!==null;){var p=Nl(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Zn(p.pendingLanes);if(T!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var M=1<<31-Tt(T);S.entanglements[1]|=M,T&=~M}Zt(p),(we&6)===0&&(mo=ut()+500,Zi(0))}}break;case 31:case 13:S=ll(p,2),S!==null&&vt(S,p,2),go(),du(p,2)}if(p=hu(a),p===null&&Zr(e,n,a,Io,i),p===f)break;f=p}f!==null&&a.stopPropagation()}else Zr(e,n,a,null,i)}}function hu(e){return e=pa(e),mu(e)}var Io=null;function mu(e){if(Io=null,e=Tl(e),e!==null){var n=d(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=m(n),e!==null)return e;e=null}else if(i===31){if(e=y(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Io=e,null}function Bh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ge()){case De:return 2;case Pe:return 8;case wt:case nn:return 32;case Dt:return 268435456;default:return 32}default:return 32}}var pu=!1,zn=null,On=null,Yn=null,ss=new Map,os=new Map,Kn=[],qy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ph(e,n){switch(e){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":ss.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":os.delete(n.pointerId)}}function as(e,n,i,a,f,p){return e===null||e.nativeEvent!==p?(e={blockedOn:n,domEventName:i,eventSystemFlags:a,nativeEvent:p,targetContainers:[f]},n!==null&&(n=Nl(n),n!==null&&qh(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function Vy(e,n,i,a,f){switch(n){case"focusin":return zn=as(zn,e,n,i,a,f),!0;case"dragenter":return On=as(On,e,n,i,a,f),!0;case"mouseover":return Yn=as(Yn,e,n,i,a,f),!0;case"pointerover":var p=f.pointerId;return ss.set(p,as(ss.get(p)||null,e,n,i,a,f)),!0;case"gotpointercapture":return p=f.pointerId,os.set(p,as(os.get(p)||null,e,n,i,a,f)),!0}return!1}function zh(e){var n=Tl(e.target);if(n!==null){var i=d(n);if(i!==null){if(n=i.tag,n===13){if(n=m(i),n!==null){e.blockedOn=n,nc(e.priority,function(){Vh(i)});return}}else if(n===31){if(n=y(i),n!==null){e.blockedOn=n,nc(e.priority,function(){Vh(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=hu(e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);ma=a,i.target.dispatchEvent(a),ma=null}else return n=Nl(i),n!==null&&qh(n),e.blockedOn=i,!1;n.shift()}return!0}function Oh(e,n,i){Uo(e)&&i.delete(n)}function By(){pu=!1,zn!==null&&Uo(zn)&&(zn=null),On!==null&&Uo(On)&&(On=null),Yn!==null&&Uo(Yn)&&(Yn=null),ss.forEach(Oh),os.forEach(Oh)}function jo(e,n){e.blockedOn===n&&(e.blockedOn=null,pu||(pu=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,By)))}var Lo=null;function Yh(e){Lo!==e&&(Lo=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Lo===e&&(Lo=null);for(var n=0;n<e.length;n+=3){var i=e[n],a=e[n+1],f=e[n+2];if(typeof a!="function"){if(mu(a||i)===null)continue;break}var p=Nl(i);p!==null&&(e.splice(n,3),n-=3,hr(p,{pending:!0,data:f,method:i.method,action:a},a,f))}}))}function li(e){function n(M){return jo(M,e)}zn!==null&&jo(zn,e),On!==null&&jo(On,e),Yn!==null&&jo(Yn,e),ss.forEach(n),os.forEach(n);for(var i=0;i<Kn.length;i++){var a=Kn[i];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Kn.length&&(i=Kn[0],i.blockedOn===null);)zh(i),i.blockedOn===null&&Kn.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(a=0;a<i.length;a+=3){var f=i[a],p=i[a+1],T=f[ht]||null;if(typeof p=="function")T||Yh(i);else if(T){var S=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[ht]||null)S=T.formAction;else if(mu(f)!==null)continue}else S=T.action;typeof S=="function"?i[a+1]=S:(i.splice(a,3),a-=3),Yh(i)}}}function Kh(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),a||setTimeout(i,20)}function i(){if(!a&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function gu(e){this._internalRoot=e}Ho.prototype.render=gu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));var i=n.current,a=Mt();kh(i,a,e,n,null,null)},Ho.prototype.unmount=gu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;kh(e.current,2,null,e,null,null),go(),n[bl]=null}};function Ho(e){this._internalRoot=e}Ho.prototype.unstable_scheduleHydration=function(e){if(e){var n=tc();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Kn.length&&n!==0&&n<Kn[i].priority;i++);Kn.splice(i,0,e),i===0&&zh(e)}};var Fh=t.version;if(Fh!=="19.2.0")throw Error(o(527,Fh,"19.2.0"));ee.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(n),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Py={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ko.isDisabled&&ko.supportsFiber)try{Sn=ko.inject(Py),ct=ko}catch{}}return us.createRoot=function(e,n){if(!u(e))throw Error(o(299));var i=!1,a="",f=Wd,p=ef,T=tf;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=Lh(e,1,!1,null,null,i,a,null,f,p,T,Kh),e[bl]=n.current,$r(e),new gu(n)},us.hydrateRoot=function(e,n,i){if(!u(e))throw Error(o(299));var a=!1,f="",p=Wd,T=ef,S=tf,M=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(T=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.formState!==void 0&&(M=i.formState)),n=Lh(e,1,!0,n,i??null,a,f,M,p,T,S,Kh),n.context=Hh(null),i=n.current,a=Mt(),a=oa(a),f=Rn(a),f.callback=null,In(i,f,a),i=a,n.current.lanes=i,xi(n,i),Zt(n),e[bl]=n.current,$r(e),new Ho(n)},us.version="19.2.0",us}var lm;function Zy(){if(lm)return vu.exports;lm=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),vu.exports=$y(),vu.exports}var Wy=Zy();const ex=Ip(Wy),Vo=12,Bo=7.5,jp={"1: Vn  ca Khch hng":{top:"5%",left:"38%"},"2: Gii php  c sn trn th trng":{top:"16%",left:"38%"},"3: Gii php ca doanh nghip":{top:"16%",left:"55%"},"4: Gii php mi (pht trin)":{top:"16%",left:"21%"},"5: Gii php mi tim nng (nghin cu)":{top:"16%",left:"4%"},"6: Xu hng kinh t x hi":{top:"28%",left:"4%"},"7: S tng trng ca th trng":{top:"28%",left:"21%"},"8: i th cnh tranh":{top:"40%",left:"21%"},"9: Mc tiu v th phn":{top:"28%",left:"55%"},"11: S pht trin ca doanh nghip (qua thi k)":{top:"40%",left:"55%"},"10: Mc tiu Marketing":{top:"40%",left:"72%"},"13: Mc tiu v vic Gim chi ph":{top:"52%",left:"55%"},"12: Nng lc v u t":{top:"52%",left:"72%"},"15: nh gi t chc":{top:"64%",left:"55%"},"14: Mc tiu v nghin cu v pht trin":{top:"64%",left:"72%"},"16: Cn i dng tin":{top:"76%",left:"55%"},"17: Thay i dng tin thm ht chi tiu/ thng d":{top:"76%",left:"72%"},"18: K hoch cn i":{top:"76%",left:"89%"}},bt=(l,t)=>{const s=jp[l];if(!s)return{x:0,y:0};const o=parseFloat(s.left),u=parseFloat(s.top);switch(t){case"top":return{x:o+Vo/2,y:u};case"bottom":return{x:o+Vo/2,y:u+Bo};case"left":return{x:o,y:u+Bo/2};case"right":return{x:o+Vo,y:u+Bo/2}}},tx=()=>r.jsx("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:r.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#64748b"})}),ft=({startNode:l,startAnchor:t,endNode:s,endAnchor:o,dashed:u})=>{const d=bt(l,t),m=bt(s,o);return r.jsx("line",{x1:`${d.x}%`,y1:`${d.y}%`,x2:`${m.x}%`,y2:`${m.y}%`,stroke:"#94a3b8",strokeWidth:"0.15",markerEnd:"url(#arrow)",strokeDasharray:u?"0.5 0.5":"none"})},Su=({points:l,dashed:t})=>{const s=l.map(o=>`${o.x}%,${o.y}%`).join(" ");return r.jsx("polyline",{points:s,stroke:"#94a3b8",strokeWidth:"0.15",fill:"none",markerEnd:"url(#arrow)",strokeDasharray:t?"0.5 0.5":"none"})},nx=({model:l,onNodeSelect:t,selectedNodeId:s})=>r.jsxs("div",{className:"relative w-full h-full p-4 bg-slate-50",children:[r.jsx("div",{className:"absolute top-0 left-0 h-full w-[48%] bg-slate-100"}),r.jsx("div",{className:"absolute top-0 right-0 h-full w-[52%] bg-amber-50"}),r.jsx("p",{className:"absolute top-4 left-4 text-sm font-semibold text-slate-700",children:"Thng tin kinh doanh khng th kim sot"}),r.jsx("p",{className:"absolute top-4 left-[49%] text-sm font-semibold text-slate-700",children:"Thng tin kinh doanh c th kim sot"}),r.jsxs("div",{className:"relative w-full h-full",children:[r.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid meet",children:[r.jsx("defs",{children:r.jsx(tx,{})}),r.jsx("rect",{x:"3%",y:"15%",width:"48%",height:"10%",fill:"none",stroke:"#f472b6",strokeOpacity:"0.7",strokeWidth:"0.2",rx:"1"}),r.jsx("rect",{x:"20%",y:"27%",width:"25%",height:"23%",fill:"none",stroke:"#38bdf8",strokeOpacity:"0.7",strokeWidth:"0.2",strokeDasharray:"0.4 0.4",rx:"1"}),r.jsx("rect",{x:"54%",y:"75%",width:"46%",height:"10%",fill:"none",stroke:"#8b5cf6",strokeOpacity:"0.7",strokeWidth:"0.2",strokeDasharray:"0.4 0.4",rx:"1"}),r.jsx("rect",{x:"54%",y:"27%",width:"22%",height:"23%",fill:"none",stroke:"#22c55e",strokeOpacity:"0.7",strokeWidth:"0.2",strokeDasharray:"0.8 0.4",rx:"1"}),r.jsx(ft,{startNode:"1: Vn  ca Khch hng",startAnchor:"bottom",endNode:"2: Gii php  c sn trn th trng",endAnchor:"top"}),r.jsx(ft,{startNode:"2: Gii php  c sn trn th trng",startAnchor:"right",endNode:"3: Gii php ca doanh nghip",endAnchor:"left"}),r.jsx(Su,{points:[bt("3: Gii php ca doanh nghip","bottom"),{x:bt("3: Gii php ca doanh nghip","bottom").x,y:31},{x:bt("9: Mc tiu v th phn","top").x,y:31},bt("9: Mc tiu v th phn","top")]}),r.jsx(ft,{startNode:"7: S tng trng ca th trng",startAnchor:"bottom",endNode:"8: i th cnh tranh",endAnchor:"top"}),r.jsx(ft,{startNode:"7: S tng trng ca th trng",startAnchor:"right",endNode:"9: Mc tiu v th phn",endAnchor:"left"}),r.jsx(ft,{startNode:"8: i th cnh tranh",startAnchor:"right",endNode:"9: Mc tiu v th phn",endAnchor:"left"}),r.jsx(ft,{startNode:"9: Mc tiu v th phn",startAnchor:"bottom",endNode:"11: S pht trin ca doanh nghip (qua thi k)",endAnchor:"top"}),r.jsx(ft,{startNode:"11: S pht trin ca doanh nghip (qua thi k)",startAnchor:"right",endNode:"10: Mc tiu Marketing",endAnchor:"left"}),r.jsx(Su,{points:[bt("11: S pht trin ca doanh nghip (qua thi k)","bottom"),{x:bt("11: S pht trin ca doanh nghip (qua thi k)","bottom").x,y:55},{x:bt("13: Mc tiu v vic Gim chi ph","top").x,y:55},bt("13: Mc tiu v vic Gim chi ph","top")]}),r.jsx(ft,{startNode:"13: Mc tiu v vic Gim chi ph",startAnchor:"bottom",endNode:"15: nh gi t chc",endAnchor:"top"}),r.jsx(ft,{startNode:"15: nh gi t chc",startAnchor:"bottom",endNode:"16: Cn i dng tin",endAnchor:"top"}),r.jsx(ft,{startNode:"16: Cn i dng tin",startAnchor:"right",endNode:"17: Thay i dng tin thm ht chi tiu/ thng d",endAnchor:"left"}),r.jsx(ft,{startNode:"17: Thay i dng tin thm ht chi tiu/ thng d",startAnchor:"right",endNode:"18: K hoch cn i",endAnchor:"left"}),r.jsx(ft,{startNode:"12: Nng lc v u t",startAnchor:"left",endNode:"13: Mc tiu v vic Gim chi ph",endAnchor:"right"}),r.jsx(ft,{startNode:"15: nh gi t chc",startAnchor:"right",endNode:"14: Mc tiu v nghin cu v pht trin",endAnchor:"left"}),r.jsx(ft,{startNode:"6: Xu hng kinh t x hi",startAnchor:"right",endNode:"7: S tng trng ca th trng",endAnchor:"left",dashed:!0}),r.jsx(ft,{startNode:"12: Nng lc v u t",startAnchor:"bottom",endNode:"14: Mc tiu v nghin cu v pht trin",endAnchor:"top",dashed:!0}),r.jsx(Su,{points:[bt("10: Mc tiu Marketing","bottom"),{x:bt("10: Mc tiu Marketing","bottom").x,y:55},{x:bt("12: Nng lc v u t","top").x,y:55},bt("12: Nng lc v u t","top")],dashed:!0})]}),Object.entries(jp).map(([o,u])=>{var v;const d=l[o],m=(d==null?void 0:d.questionAnswers)&&d.questionAnswers.some(b=>b.answer.trim()!==""),y=s===o,x=o.split(":")[0],g=(v=o.split(":")[1])==null?void 0:v.trim();return r.jsx("button",{onClick:()=>t(o),className:`absolute flex items-center justify-center p-2 text-center rounded-md shadow-md transition-all duration-200 
                    ${m?"bg-green-100":"bg-white"}
                    ${y?"border-2 border-blue-500 ring-4 ring-blue-500/20 shadow-lg":"border border-slate-300"}
                    hover:shadow-xl hover:-translate-y-px
                    `,style:{top:u.top,left:u.left,width:`${Vo}%`,height:`${Bo}%`},title:o,children:r.jsxs("p",{className:"text-xs text-slate-800",children:[r.jsxs("span",{className:"font-bold text-slate-600",children:[x,":"]})," ",g]})},o)}),r.jsxs("div",{className:"absolute bottom-[2%] left-[2%] p-2 bg-white/90 backdrop-blur-sm border border-slate-200 rounded-lg shadow-md",style:{zIndex:30},children:[r.jsx("h4",{className:"font-bold text-xs mb-1 text-slate-700",children:"Ch thch"}),r.jsxs("div",{className:"space-y-1 text-[10px] text-slate-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{width:"30",height:"8",className:"flex-shrink-0",children:r.jsx("line",{x1:"0",y1:"4",x2:"30",y2:"4",stroke:"#f472b6",strokeWidth:"2"})}),r.jsx("span",{className:"ml-1",children:"Lnh vc chin lc kinh doanh"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{width:"30",height:"8",className:"flex-shrink-0",children:r.jsx("line",{x1:"0",y1:"4",x2:"30",y2:"4",stroke:"#38bdf8",strokeWidth:"2",strokeDasharray:"3 3"})}),r.jsx("span",{className:"ml-1",children:"ng cong thay th"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{width:"30",height:"8",className:"flex-shrink-0",children:r.jsx("line",{x1:"0",y1:"4",x2:"30",y2:"4",stroke:"#22c55e",strokeWidth:"2",strokeDasharray:"6 2"})}),r.jsx("span",{className:"ml-1",children:"ng cong th phn"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{width:"30",height:"8",className:"flex-shrink-0",children:r.jsx("line",{x1:"0",y1:"4",x2:"30",y2:"4",stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:"3 3"})}),r.jsx("span",{className:"ml-1",children:"n v kinh doanh ca cng ty"})]})]})]})]})]}),lx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARAAAAA2CAYAAABa4h5xAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAfASURBVHhe7Z1NiB1FFMc/s043LQgqghARFxQUQURcFFxcXFQUBBEFkYIbioKCIAiCg4ug4IqAIKKgIEQRxI0btyou6g5uJGIiBNGFY3ZnZne2d6and+c+b2d2Zqbnqa6b6Q8eDA+murqqe6p6+tVXX/d0FODoUaNGjRo1atSoUaNGjRo1atSoUaNGjRo1atSoUaNGjRo1atSoUaNGjf8P8A4cACACgBEAxkUEMQhC1p8FpAEC+I/v3rNnF+9e/42ePX0MDBi+O5+9+/m1I+A9dOgw/Pn7b/gHjh3Cvn36GNx/f/57hPgb1oYfBvCfvfvwI/7+6SdMnzGDLVu2MHrMGPz99z8R/qYlfgQgnz99is0bN7Jl0yZCQkIYNGgwFi5YgHnz5mHFiiUYMmRIhI6cOXOGHTt2MWDAANy7dw9r1qzhwoULDB48mF27drF06VLGjh2L73d+P0JGj57M+vXrGTFiBH788UfMnDmTmTNn4ubNm5g4cSK2b9/Ohg0bCA8Px8U+ffLkyaxdu5aZM2fi4sWLmDx5MufPn+fMmTP44YcfuHbtGj777DPMnTuXY8eO4eTJk5g7dy6mTZuGLVu2YP78+Rg9ejSmTZtGjRo1GD9+PAIDA/Hx4wd06NBhtG7dGt9//z1effVVPPvsszhy5AgePXoEjx49wtSpU7Fjxw506dKFWbNm4fTp0/D19cXhw4fx/PlzPPXUUwgNDcX169fx6NEj7N27F0+fPsXcuXORkpKC4cOH49NPP8WRI0dw6dIlvPjii+jevTuCg4ORkZGBKVOm4MyZMzh69Ch+/PFHbNmyBQD4+uuv0a5dO4SGhuLWrVvo3r07/vzzT3z99dfwer04fvw4Ro0ahdGjR2PIkCG4desWjh8/jlmzZuHbb7/FzZs3MX36dGzfvh137tyBvb09hg0bhocPH+LVV1/Fpk2b8M033+Cpp55Cr169sG/fPpw4cQL79+8Hp9OJqVOnYt68ebhy5QqWLVuGsWPHYuLEicjKyv7/c0TExuLSpUvYvXs3Jk2ahJycHISHh2Pw4MEIDAxEdnY2/vrrb8yYMYO9e/diwYIF+OGHH/DFF18gLi4OkZGRWLduHeLi4rB7924kJCSgU6dOGDRoEIYMHYoFCxbgypUr2LFjByZPnoxDhw4xaNAgbN++HStWrMDUqVN5/vw5oqKiEBkZic8++wxbNm3Cjh078PDhQ8TGxmLo0KG4dOkSSkpKkJ+fjylTpmDv3r0IDg5GQEAAnj17hsTERISEhODs2bPo168fBg0ahFatWqFGjRoYO3YstGnThvHjx2PixIk4dOgQFi9ejEuXLjFjxgxcvnyZPXv24NChQwgLC8ODBw9w6NAhHD16FOvXr0dJSQnmz5+PX3/9FcOHD8fFixexY8cOdOrUiSeffBIrV67Exo0bsXfvXnz++eeIjIzEgQMHsGfPHvj5+WHChAkYMGAArl+/jiVLlqBs2bLw8/NDenq6J2qX3W7HuXPncPbsWZSXl2Po0KHIyMhAcHAwvvnmGwQGBmLo0KE4duwYLl26BC8vL+Tl5eGNN97A559/Dp1GzY4e/d0HDt2jKioKEycOJFdu3bhxo0beP/+PVatWoWRkVFcu3aNzZs34+DBg5gxYwb8/f1x5coVLF68GAEBAZg3b55Xf6g6/vrr+Pzzz7Fz507ExMRg9uzZOHz4MM6dO4eAgADs3buXI0eO4Nq1a5g3b14ErF+/nhcvXuD69eu4desWli5dijfffJO5c+fy8OHDTJgwgffee49NmzbhxIkTCA4ORlJSEs6fP8+mTZuwZcsWPPz4EVu2bMGuXbtw5MgRXL9+HUuXLkWvXr1Qp04d9OzZE8HBwZgxYwa2bduGffv24fz587h+/XqEdN68eXh7e6Nn5/Y/k06bNo0ePXrg6uoKEydOxMSJEyE0NBTbt28HwMOHD3Hu3DmcOXMGM2fOxMWLF5kwYQK+/fZbLF68mPz8fAwcOBDTp0/H4cOHsXPnTsyaNQvr16/HmDFjsGLFCsyaNYsLFy4watQoLF26FCdOnMDx48cxatQo7Nu3D2fOnMH27dt59eoVZs+ejdDQUCwZ9T0/z/Pjxw8sWbKEXPn9+eefWLFihdd0HBUVRXx8PJKSktCtWzfMnj2bbdu24fbt2xg+fDjGjRuHI0eO4OTJk1i0aBF69OiBrVu3Ys+ePejVqxcOHz7MgQMHYNOmTRg6dCi++OILJCUl4cqVK7hy5Qp+/fVXzJw5ExMmTMDkyZN58+YN7ty5w44dO3D37l1MnTqVRYsWYfr06Rw/fpwVK1Ywf/58zJ8/H5MnT8acOXMwduxY3LhxQ+T/+eefIycnh2vXruGTTz7BtGnT8PTpUxw7dgyZmZl4+vQphg0bhteK3U7E5s2bMXXqVHzxxRcYMmQIVq5ciWHDhuHWrVv46quvcO7cOWzcuBGDBw/GggULkJubi7fffhtHjx7FoUOHcOrUKdx5+x3efPNNvH79Gt9++y2aNm2Kbdu24ejRo/jhhx8wZswYbN68ma+//hrPPfccXn/9dWzatAmrVq1CixYtcOfOHYSFheHixYv8qF0ul4uHDx+iY8eOaNq0KUJDQ/Htt9/i5s2bWLJkCdasWYMNm5+iS5cuOHv2LF599VWcOXMGK1euZMeOHUydOpXp06fjwoUL/DffhPz8fCQnJ2PHjh388ssvWLVqVbT2Tpo0CREREfDz80O/fv1w5swZHD9+nFevXuH06dNISEhA165dER4ejrKyMoSHhyMhIUF/P7quvLycf//737F9+3ZcvHgR9vb26N27N2bNmoVp06YhNTUV+/btQ3BwMLy8vHD27FkMHz4chw8fxurVqzF58mRs3ryZjRs3YuLEibx58wazZ89GmzZtEBkZicOHD+PgwYM4ePAgZs2ahdOnT2P+/Pn48ccfsWbNGgQEBGDy5MlYsmQJFi1ahPfff5/ffvsNJSUl+Pn5YfLkyThy5Aj+/PNPjB8/Hr169eLNN9/E/fv3AQCPHz/GuXPncOvWLcycORP79u3DmjVrUF5ejsWLF2PVqlWYP38+rly5QkpKCpo0aYK6devi2bNnaNWqFTp06MCDg/u/96sHDhwAAJydnTF16lQMGjSIKVOmYPfu3Rg2bBguXLhAdHQ0MjIyEBISgpiYGNTU1GDGjBmYO3cuDh8+jMWLF2PmzJnYtGkTpk6dioMHD7J3716kpKQQExODcePG4dixY/Dw4UNcunSJ6Oho7Nu3DzExMRg/fvxzNlVVVZg6dSpWrlyJ9evX4/bt25g5cybmz5+v/z7/xZdf8vK8iL/+8ssvvPzyy8uS4J///GfGjx/P0qVLGTdunLe3t/fv388DDzwwbNiwvPPOO3fccYfBYHDPnj2cO3eu+BwVFXXjjTdy+PBh7t+/f8qUKVOmTJkRI0Zw6NAhbt++zZIlS7hcbr/V33zzjSNHjjBp0qRly5bl7t27uHz5cqGoqGixfv16hg8fzv79+7l16xZz587lxIkTePr0qQULFvDKK69w//79jB49mqNHj5KTk8Phw4dZu3Yt58+f5/79+xw5coQzZ87w888/873vfY+77777zTff8NVXXzVo0CD+/Oc/88ADD/Dmm29WVlZWVFSUkJAQBQUFlixZwhlnnMHWrVtZvHhxixYteO+999555x0++OAD3njjDTZt2lRcXJyrr74aX15entXV1StWrOALL7xA9erVufnmm9mzZ0/x+bvvvsuIESO4desWb731FqdOnWL79u1ERETk5ORw5swZPvnkE2bOnMny5ctxcHC4du1a9erVs3bt2vXr19+6dYvu3bvrvL+goEBGRuazn/2so0ePsnHjRsaMGdNisYiPj+/atYuvv/66Wq1+/fXXeeihh3jooYf49a9/zSeffMLHH39clJSUlpYWj8cjk8k8Hg9fX9+cnJzGxsYqKCgcP36chIQExo0bxyuvvEIulx87dky/fv1KSkpycnJSVVVVU1NTbW1tfn7+qlevXqlSpZYuXZpIJKqqqqqqqqqpqTkyMmJmZmZra6uTk9PExMTMzEyVSi0sLKxdu3ZjY2PffvstTz/9NL/+9a+5cOHC66+/zrZt2+jTpw9PPfWU5557rqqqqpqaGnV1dcXFxdXV1XV0dOzatUv0/+uvv2bbtm28++67/OlPf+qNN97o1q1bjx49WLFiRWZm5owZM7jvvvtYuXIlN910Ey+88ELnzhXfvVevXjz55JPk5+dzxRVX8Pzzz9OhQweNHj2ahQsX8vjjj/PMM8/wwQcfkJqaSkRExLvvvtugoUOHDm3btq1atWrLli1btWpVYWGhSCSCg4N79OhRUlLS/PnzWbJkSUJCQmFhYaGhodHV1XV2drY11/vvvz8RERGZmZlRUVFZWVkVFRXt27evrq4uc+fOTUtL44tf/CI/+MEP+MY3vsGKFSuYOXMmf//731esWIGPj0/U+uUvf8nFixeZP38+Dz30kCFDhjBt2rRly5bdcccdvPTSS/zP//xP0d21a9eybds2VqxYQVlZWVpaWlpamp+fn6urq7e3V3/8/Pzc3NxCoXDVqlX+r+Srrrpql156KV988QVz5sx58sknefHFF/n9739vFofZbDZr/NefPHnyb3/7W/bu3cudO3e4e/cuL7/8MqtXr37ttdewZMkSTpw4QVhYWFxc3NDQUFZW1tTU1NTUlJaWlpeXFxcXd+zYsZaWllarVbVaXVRUlJaWxmAwGBsba2trKyws5L3/+y9+9u3v8/zzz/PYY4+tX7++uLg4Ho/n5uaWlJSUlZWlpaVVVFScPXu2uLg4PT09EAh49dVXk5KS+uUvf8nvfvcbXnvtNc466yw++eQTiouL++tf/2ry5MkMHz581apV/OxnP2PgwIF9+vSxfPlyRowYwS233MK6det4+OGH+clPftKgQYMmTZrEwMAgf/zjH/m///f/tG3bNnsTJUaNGjVq/K+h/K/sQ40aNWpU/H8c5Z/y7oA/FvLgUaPGr1gV+B/UjRo1atSoyvEfGAAQEQCMADBuuD+u/x+oRo0aNWpU/H+S3F/vHq8S/ge1W23Pzz/Gv+8bNWpUvF+qjUaNGjVq1Pjn8B+A52b/10aNGjVq1Kj4/0L0D2vQoEGDBg0b/g8A7Nl3f582rN/hPwCAgAEBAQICAoDRoEGDBg0aRjQ/4N+21atXr169evXq1as3b940P/Cn/H8BwB/83wD8AfkHDAgIEBBg/z+U/QMAkAAAAABJRU5ErkJggg==",ds={"1: Vn  ca Khch hng":["Gii thiu v cng ty bn (Tn cng ty; lnh vc hot ng, sn phm, th trng...)?","Bn ang xc nh vn  da trn phn hi thc t hay ch l gi nh ni b?","Bn  c d liu no t khch hng cha? (kho st, phn hi, khiu ni, nghin cu th trng...).","Doanh nghip c thc hin phng vn, focus group hay ch da trn phn tch s liu c sn?","Nu c d liu, bn  kim chng tnh chnh xc ca n cha?","Bn c chc rng vn  bn xc nh ng vi thc t ca khch hng?","C bng chng no ch ra khch hng sn sng chi tr  gii quyt vn  ny?"],"2: Gii php  c sn trn th trng":["Cc gii php hin c trn th trng  gii quyt vn  ca khch hng l g?","i th cnh tranh trc tip v gin tip chnh l ai?","Phn loi cc gii php trn th trng: Common, Innovative, Niche Solutions.","Gii php ca bn c im g vt tri so vi th trng (Gi tr, Gi c, Tnh kh dng, Cng ngh)?","Khong trng no trn th trng m gii php ca bn c th khai thc?","Bn c th ti u ha hoc nng cp gii php  chim u th khng?"],"3: Gii php ca doanh nghip":["Doanh nghip hin ti ang cung cp gii php g cho vn  ca khch hng?","Gii php ny c phi l s la chn hng u ca khch hng khng? Nu khng, ti sao?","im mnh, im yu, c hi, thch thc (SWOT) ca gii php so vi i th l g?","Yu t cnh tranh ct li ca gii php l g (tt hn, r hn, nhanh hn, linh hot hn)?","Gii php ca bn c thc s khc bit v mang li li ch cho khch hng khng?","Doanh nghip c th duy tr li th cnh tranh ny trong bao lu?"],"4: Gii php mi (pht trin)":["Phn tch khong trng th trng (t Yu t 2 & 3) cho thy cn ci tin hay to mi hon ton gii php?","ng lc pht trin gii php mi l g? (Nhu cu khch hng, Cng ngh mi, M hnh kinh doanh mi).","La chn hng pht trin: Ci tin gii php c, Pht trin cng ngh t ph, hay i mi m hnh kinh doanh?"," tng no c tim nng cao nht  pht trin thnh sn phm thc t?","Khch hng c phn hi tch cc vi nguyn mu th nghim (MVP) khng?"],"5: Gii php mi tim nng (nghin cu)":["Xu hng cng ngh v th trng no c tc ng ln nht n ngnh ca doanh nghip?","Lnh vc no c tim nng nghin cu  to ra gi tr di hn? (Cng ngh cha khai thc, Vn  KH cha c gii php, Li th R&D ca DN).","Doanh nghip c  ngun lc nghin cu/hp tc khng?"," tng nghin cu no c tim nng ng dng cao nht trong tng lai?","Cng ngh ny c thc s kh thi  pht trin thnh sn phm thng mi khng?"],"6: Xu hng kinh t x hi":["Cc xu hng ln v Kinh t, Cng ngh, X hi, Chnh tr ang nh hng n doanh nghip l g?","Xu hng no c kh nng tc ng mnh nht n doanh nghip?","Tc ng ca cc xu hng ny n Khch hng, Chi ph sn xut, v M hnh kinh doanh ca bn l g?","Doanh nghip  c chin lc ph hp  thch nghi v tn dng c hi t cc xu hng ny cha?"],"7: S tng trng ca th trng":["Phn tch s liu th trng (GDP, chi tiu, u t) cho thy th trng ang m rng hay thu hp?","Yu t no ang nh hng n tc  tng trng? (Xu hng KT-XH, i th, Khch hng).","V th ca doanh nghip trong chu k tng trng th trng l g? Sn phm c ph hp vi tc  tng trng khng?","Doanh nghip ang hng li t tng trng hay b cnh tranh mnh hn?"],"8: i th cnh tranh":["Xc nh i th cnh tranh trc tip, gin tip v tim nng.","Phn tch m hnh kinh doanh, chin lc gi, sn phm, phn phi ca i th.","im mnh v im yu ca i th m bn c th tn dng l g?","Li th cnh tranh bn vng ca bn so vi i th l g? (Chi ph thp, Khc bit ha, Tp trung th trng ngch).","i th c d dng sao chp chin lc ca bn khng?"],"9: Mc tiu v th phn":["Th phn hin ti ca doanh nghip l bao nhiu? (doanh thu, s lng khch hng...). ang tng hay gim?","V th th phn so vi i th (dn u, nm gia, hay tt li)? Tc  tng trng th phn ca i th?","Mc tiu th phn SMART ca bn l g? (C th, o lng c, Kh thi, Thc t, C thi hn).","Chin lc m rng th phn ca bn l g? (M rng khch hng hin ti, thm nhp th trng mi, cnh tranh trc tip...)."],"10: Mc tiu Marketing":["Mc tiu marketing c lin kt vi mc tiu kinh doanh tng th khng? (Tng nhn din, tng chuyn i, tng lng trung thnh).","KPI marketing c th ca bn l g? (ROAS, ROI, s lng khch hng mi, Brand Awareness...).","Chn dung khch hng mc tiu v thng ip marketing chnh l g?"],"11: S pht trin ca doanh nghip (qua thi k)":["Knh truyn thng ph hp  tip cn khch hng mc tiu l g? (Digital, Truyn thng, Cng ng...).","Doanh nghip ang  giai on pht trin no? (Khi nghip, Tng trng, Trng thnh, Suy gim/Chuyn i).","Yu t no ang thc y hoc cn tr s pht trin ca doanh nghip? (Th phn, Marketing, Xu hng KT-XH).","Chin lc pht trin c ph hp vi tng giai on khng?","Cc ch s o lng c phn nh ng s pht trin ca doanh nghip khng? (Tng trng li nhun, ch s ti chnh, th phn...)."],"12: Nng lc v u t":["nh gi nng lc hin ti ca doanh nghip: Ti chnh, Nhn s, Cng ngh, Qun tr.","Lnh vc u t trng tm l g? (Cng ngh, Con ngi, M rng sn xut...).","nh gi mc  ri ro v li nhun ca tng hng u t.","K hoch huy ng vn nu cn thit l g?","Quy trnh qun l nng lc v u t c ang gip ti u ha hiu sut khng?"],"13: Mc tiu v vic Gim chi ph":["Phn tch c cu chi ph hin ti: Sn xut, Vn hnh, Ti chnh, Marketing & Bn hng.","nh gi mc  cn thit ca tng khon chi ph, tm ra cc im c th ti u ha.","La chn phng php gim chi ph: Ci thin quy trnh sn xut, ti u vn hnh, m phn vi nh cung cp...","Doanh nghip c ang gim chi ph m vn duy tr cht lng tt khng?"],"14: Mc tiu v nghin cu v pht trin":["Nhu cu nghin cu v pht trin ca doanh nghip l g? (Da trn xu hng cng ngh, nhu cu th trng).","Mc tiu R&D theo tiu ch SMART l g?","La chn phng php R&D: Ni b, Hp tc vi i tc, hay Mua li cng ngh (M&A)?","Ngn sch v nhn s dnh cho R&D c   trin khai hiu qu khng?"],"15: nh gi t chc":["Tiu ch ct li  nh gi t chc l g? (Hiu sut ti chnh, Hiu qu qun l nhn s, Cu trc t chc, Kh nng i mi).","La chn m hnh nh gi ph hp: Balanced Scorecard (BSC), OKRs, 6 Sigma...","Thu thp d liu v phn tch kt qu nh gi (Bo co ti chnh, kho st nhn vin, phn hi khch hng).","Nhng ci tin no v cu trc t chc v vn hnh cn c  xut?"],"16: Cn i dng tin":["Phn tch bo co dng tin: Dng tin vo, ra, v tn qu.","Cc vn  trong dng tin l g? (Chu k thu tin > tr tin, li nhun cao nhng tin mt yu...).","K hoch qun l dng tin trong ngn v di hn (d bo thu chi, ti u cng n).","Dng tin c ang c qun l tt hay vn tim n ri ro?"],"17: Thay i dng tin thm ht chi tiu/ thng d":["Xc nh tnh trng dng tin hin ti: Thm ht hay Thng d? Tm thi hay di hn?","Nu thm ht, chin lc x l l g? (Ti u dng vo, kim sot dng ra, tn dng cng c ti chnh).","Nu thng d, chin lc tn dng l g? (Ti u t, gim n, qu d phng, mua li c phiu...).","K hoch s dng/x l dng tin c r rng v hiu qu khng?"],"18: K hoch cn i":["Phn tch bo co ti chnh: Ti sn, N, Dng tin.","Ri ro ti chnh chnh l g? (N gy p lc, ph thuc vn vay...).","Thit lp mc tiu cn i ti chnh: Gim n vay, tng vn t c, m bo dng tin lu ng.","K hoch iu chnh cu trc ti sn v ngun vn l g?"]},gl=[{id:"MarketPosition",name:"V th Th trng (Market Position)",questions:["Th phn ca chng ta so vi i th chnh l bao nhiu?","nh v thng hiu ca chng ta trong tm tr khch hng l g?"]},{id:"Innovation",name:"S i mi (Innovation)",questions:["T l doanh thu t sn phm mi trong 2 nm qua l bao nhiu?","Quy trnh pht trin  tng mi ca chng ta hiu qu n u?"]},{id:"Productivity",name:"Nng sut (Productivity)",questions:["Doanh thu trn mi nhn vin l bao nhiu?","T l s dng ti sn c nh (v d: my mc, nh xng) l bao nhiu?"]},{id:"People",name:"Con ngi & Ti sn V hnh (People & Intangible Assets)",questions:["T l ngh vic ca nhn vin ch cht l bao nhiu?","Mc  hi lng v gn kt ca nhn vin c o lng nh th no?"]},{id:"Liquidity",name:"Kh nng Thanh khon (Liquidity)",questions:["T s thanh khon hin thi (Current Ratio) l bao nhiu?","Cng ty c  tin mt  hot ng trong 6 thng ti khng?"]},{id:"Profitability",name:"Kh nng Sinh li (Profitability)",questions:["T sut li nhun gp v li nhun rng l bao nhiu?","Li nhun c ang tng trng bn vng khng?"]}],ix=()=>{const l={};return Object.entries(ds).forEach(([t,s])=>{l[t]={id:t,name:t,questionAnswers:s.map(o=>({question:o,answer:""})),initiatives:[]}}),l},sx=()=>{const l={};return gl.forEach(t=>{l[t.id]={id:t.id,name:t.name,questionAnswers:t.questions.map(s=>({question:s,answer:""})),status:"Neutral",aiAssessment:""}}),l},ox=ix(),ax=sx(),im=[{code:"BOD",name:"Ban Gim c",priority:1},{code:"MKT",name:"Marketing",priority:2},{code:"SALE",name:"Kinh doanh",priority:3},{code:"AUD",name:"Kim ton",priority:4},{code:"HR",name:"Nhn s",priority:5},{code:"FIN",name:"Ti chnh",priority:6}],sm=[{id:"role-1",name:"Nguyn Vn A",departmentCode:"BOD",title:"Gim c",email:"a.nguyen@example.com",phone:"0901234567"},{id:"role-2",name:"Trn Th B",departmentCode:"AUD",title:"Trng phng Kim ton",email:"b.tran@example.com",phone:"0901234568"},{id:"role-3",name:"L Vn C",departmentCode:"AUD",title:"Kim ton vin",email:"c.le@example.com",phone:"0901234569"},{id:"role-4",name:"Phm Th D",departmentCode:"SALE",title:"Trng phng Kinh doanh",email:"d.pham@example.com",phone:"0901234570"}],Lp=[{code:"DT-01",description:"Doanh thu bn hng",unit:"VN",category:"Doanh thu"},{code:"DT-02",description:"Doanh thu t khch hng mi",unit:"VN",category:"Doanh thu"},{code:"DS-01",description:"S lng hp ng k mi",unit:"Hp ng",category:"Doanh s"},{code:"DS-02",description:"S lng khch hng tim nng",unit:"Khch hng",category:"Doanh s"},{code:"DT-01",description:"Dng tin thu v",unit:"VN",category:"Dng tin"},{code:"KH-01",description:"T l khch hng hi lng (NPS)",unit:"%",category:"Khc"}],rx=[{goalId:"goal-1",goalDescription:"Tng trng doanh thu Qu 4",employeeId:"role-4",employeeName:"Phm Th D",departmentCode:"SALE",linkedTaskId:"task-10",linkedTaskName:"Thc hin bn hng v cht hp ng",kpis:[{kpiId:"kpi-1-1",kpiCode:"DT-01",description:"Doanh thu bn hng",unit:"VN",baseline:0,target:5e8,actual:15e7,progress:.3,history:[{id:"h1",date:new Date(2024,10,15).toISOString(),value:15e7,comment:"Doanh thu gia k"}]},{kpiId:"kpi-1-2",kpiCode:"DS-01",description:"S lng hp ng k mi",unit:"Hp ng",baseline:0,target:10,actual:4,progress:.4,history:[]}]}],ux={Good:{gradient:"from-green-500 to-emerald-600",text:"text-white",border:"border-emerald-700"},Warning:{gradient:"from-amber-400 to-amber-500",text:"text-white",border:"border-amber-600"},Bad:{gradient:"from-red-500 to-rose-600",text:"text-white",border:"border-rose-700"},Neutral:{gradient:"from-slate-500 to-slate-600",text:"text-white",border:"border-slate-700"}},cx=({variableId:l,label:t,status:s,isFilled:o,isSelected:u,onClick:d})=>{const m=ux[s],y=s==="Neutral"&&o?"from-sky-500 to-sky-600":m.gradient,x=s==="Neutral"&&o?"border-sky-700":m.border;return r.jsxs("div",{onClick:()=>d(l),className:`relative w-32 h-36 flex items-center justify-center cursor-pointer group transition-transform duration-200 ease-in-out ${u?"scale-110":"hover:scale-105 hover:-translate-y-1"}`,children:[r.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${y} ${x} border-b-4 shadow-lg transition-all duration-200 ${u?"brightness-110":"group-hover:brightness-105"}`,style:{clipPath:"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)"}}),u&&r.jsx("div",{className:"absolute inset-0 ring-4 ring-blue-400 ring-offset-2 ring-offset-white rounded-full",style:{clipPath:"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)"}}),r.jsx("div",{className:`relative z-10 p-2 text-center ${m.text}`,children:r.jsx("p",{className:"text-sm font-bold drop-shadow-sm",children:t})})]})},dx=({model:l,selectedVariableId:t,onVariableSelect:s})=>{const o=[{id:"MarketPosition",top:"0%",left:"50%"},{id:"Innovation",top:"22%",left:"85.3%"},{id:"Productivity",top:"66%",left:"85.3%"},{id:"People",top:"88%",left:"50%"},{id:"Liquidity",top:"66%",left:"14.7%"},{id:"Profitability",top:"22%",left:"14.7%"}],u={x:50,y:44};return r.jsxs("div",{className:"relative w-full mx-auto",style:{paddingTop:"75%"},children:[r.jsxs("svg",{className:"absolute inset-0 w-full h-full overflow-visible",style:{left:"0"},children:[r.jsx("defs",{children:r.jsx("marker",{id:"dot",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"5",markerHeight:"5",children:r.jsx("circle",{cx:"5",cy:"5",r:"5",fill:"#cbd5e1"})})}),o.map(d=>{const m={x:parseFloat(d.left),y:parseFloat(d.top)+9};return r.jsx("line",{x1:`${u.x}%`,y1:`${u.y}%`,x2:`${m.x}%`,y2:`${m.y}%`,stroke:"#e2e8f0",strokeWidth:"2"},`line-center-${d.id}`)}),o.map((d,m)=>{const y=(m+1)%o.length,x={x:parseFloat(d.left),y:parseFloat(d.top)+100/(1/.75)*.12},g={x:parseFloat(o[y].left),y:parseFloat(o[y].top)+100/(1/.75)*.12};return r.jsx("line",{x1:`${x.x}%`,y1:`${x.y}%`,x2:`${g.x}%`,y2:`${g.y}%`,stroke:"#e2e8f0",strokeWidth:"2"},`line-outer-${d.id}`)})]}),r.jsx("div",{className:"absolute",style:{top:"44%",left:"50%",transform:"translate(-50%, -50%)"},children:r.jsxs("div",{className:"relative w-32 h-36 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-slate-200",style:{clipPath:"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)"}}),r.jsx("div",{className:"relative z-10 p-2 text-center",children:r.jsx("p",{className:"text-sm font-bold text-slate-600",children:"6 BIN S"})})]})}),o.map(d=>{const m=gl.find(g=>g.id===d.id);if(!m)return null;const y=l[d.id],x=y.questionAnswers.some(g=>g.answer.trim()!=="");return r.jsx("div",{className:"absolute",style:{top:d.top,left:d.left,transform:"translate(-50%, -50%)"},children:r.jsx(cx,{variableId:d.id,label:m.name.split("(")[0].trim(),status:y.status,isFilled:x,isSelected:t===d.id,onClick:s})},d.id)})]})},fx=({strategicModel:l,sixVariablesModel:t,selectedNodeId:s,selectedVariableId:o,onNodeSelect:u,onVariableSelect:d})=>r.jsxs("div",{className:"h-full w-full overflow-y-auto p-4",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden min-h-[500px]",children:r.jsx(nx,{model:l,onNodeSelect:u,selectedNodeId:s})}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mt-24",children:r.jsx("div",{className:"max-w-sm mx-auto pt-20 pb-12",children:r.jsx(dx,{model:t,onVariableSelect:d,selectedVariableId:o})})})]}),hx=({strategicModel:l,onUpdateNode:t,onEditInitiative:s,onLogProgress:o})=>{const u=y=>{switch(y){case"Hon thnh":return"bg-green-100 text-green-800";case"ang thc hin":return"bg-blue-100 text-blue-800";case"Tm dng":return"bg-yellow-100 text-yellow-800";case"Mi to":default:return"bg-slate-100 text-slate-800"}},d=(y,x)=>{if(window.confirm("Bn c chc mun xa sng kin ny khng?")){const v=l[y].initiatives.filter(b=>b.id!==x);t(y,{initiatives:v})}},m=Object.values(l).flatMap(y=>y.initiatives.map(x=>({...x,nodeId:y.id})));return r.jsxs("div",{className:"p-6 bg-slate-50 h-full overflow-y-auto",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-slate-800",children:"K hoch Hnh ng"}),m.length===0?r.jsxs("div",{className:"text-center p-8 border-2 border-dashed rounded-lg mt-10",children:[r.jsx("p",{className:"text-slate-500",children:"Cha c sng kin no c to."}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:'Hy chn mt Yu t trong tab "Bn  & Chn on" v s dng C vn AI hoc nt "+ To Sng kin".'})]}):r.jsx("div",{className:"space-y-6",children:Object.keys(l).map(y=>{const x=l[y];return!x||x.initiatives.length===0?null:r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-slate-200",children:[r.jsx("h3",{className:"font-bold text-blue-800 mb-3 text-base border-b pb-2",children:y}),r.jsx("div",{className:"space-y-3",children:x.initiatives.map(g=>r.jsxs("div",{className:"border border-slate-200 p-3 rounded-md hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex justify-between items-start gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-900",children:g.name}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Ngi ph trch: ",g.owner||"N/A"," | Thi hn: ",g.dueDate||"N/A"]})]}),r.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${u(g.status)}`,children:g.status})})]}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:g.description}),r.jsxs("div",{className:"mt-3",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Tin "}),r.jsxs("span",{className:"text-xs font-bold text-slate-800",children:[g.currentProgress,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${g.currentProgress}%`}})}),g.latestStatusComment&&r.jsxs("p",{className:"text-xs text-slate-500 mt-1 italic",children:["Cp nht mi nht: ",g.latestStatusComment]})]}),r.jsxs("div",{className:"mt-4 text-right space-x-2",children:[r.jsx("button",{onClick:()=>o(y,g),className:"text-xs bg-slate-200 px-3 py-1 rounded hover:bg-slate-300",children:"Ghi nhn"}),r.jsx("button",{onClick:()=>s(y,g),className:"text-xs text-blue-600 hover:underline",children:"Sa"}),r.jsx("button",{onClick:()=>d(y,g.id),className:"text-xs text-red-600 hover:underline",children:"Xa"})]})]},g.id))})]},y)})})]})},He=l=>({className:s="w-6 h-6"})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:l}),en=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.5 21.75l-.398-1.188a3.375 3.375 0 00-2.923-2.923L12 17.25l1.188-.398a3.375 3.375 0 002.923-2.923L16.5 12.75l.398 1.188a3.375 3.375 0 002.923 2.923L21 17.25l-1.188.398a3.375 3.375 0 00-2.923 2.923z"})),Gu=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})),mx=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-2.474-1.99-1.916 2.46-.362L13.684 12l1.096 2.248 2.46.362-1.99 1.916.569 2.474-2.51-2.225z"})),px=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),gx=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9a9 9 0 119 0zM16.5 18.75a9 9 0 00-9 0m9 0h.008v.008h-.008v-.008zM12 15a3 3 0 100-6 3 3 0 000 6z"})),Hp=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})),hs=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.122 2.122l7.81-7.81"})),Qn=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})),Wt=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.033-2.134H8.033c-1.12 0-2.033.954-2.033 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})),kp=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15M9 12l3 3m0 0l3-3m-3 3V2.25"})),ri=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})),Gp=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503-6.998l-6.878 2.292m6.878-2.292l-2.292 6.878m2.292-6.878L15 12l-2.497 1.748m.503-6.998L12 9l-2.497 1.748m0 0l-2.292 6.878m2.292-6.878l-6.878 2.292m6.878 2.292L9 15"})),qu=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})),Vu=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),qp=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0015 0m-15 0a7.5 7.5 0 1115 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077l1.414 1.414m11.314-11.314l1.414 1.414m-11.314 0l-1.414-1.414m11.314 11.314l-1.414-1.414M12 6.75v.007v.007v.007v.007v.007"})),yx=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})),xx=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})),vx=He(r.jsxs(r.Fragment,{children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 10v2a7 7 0 01-14 0v-2"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19v3"})]})),Oo=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})),bx=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0-3-3m0 0 3-3m-3 3H6.75"})),Vp=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6.026a2.25 2.25 0 012.245 2.255v1.011a2.25 2.25 0 01-2.245 2.255H9m0-4.522v4.522m0-4.522a2.246 2.246 0 00-1.123-1.977l-.27-.135A2.25 2.25 0 005.25 6.75v1.011c0 .61.264 1.17.703 1.562l.27.135m0-1.722v1.722"})),Tx=He(r.jsxs(r.Fragment,{children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.432 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})),Nx=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})),Sx=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.742-.584M18 18.72V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V18.72m13.5 0A2.25 2.25 0 0019.5 16.5v-1.5a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 15v1.5A2.25 2.25 0 006.75 18.75m11.25 0h.243A2.25 2.25 0 0119.5 15v-1.5a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 15v1.5a2.25 2.25 0 012.25 2.25m4.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})),Cx=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75c-.621 0-1.125-.504-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5 .124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.375m0 0c0 .621.504 1.125 1.125 1.125h3.375m-3.375 0h-3.375a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75"})),om=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})),Ax=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})),Bp=He(r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193l-3.722.372c-.516.052-.975-.183-1.348-.55l-1.43-1.43a1.875 1.875 0 00-2.652 0l-1.43 1.43c-.373.367-.832.602-1.348.55l-3.722-.372c-1.133-.1-1.98-1.057-1.98-2.192V12.607c0-.969.616-1.813 1.5-2.097m14.25-3.866l-.02-.02a1.875 1.875 0 00-2.652 0l-1.43 1.43c-.373.367-.832.602-1.348.55l-3.722-.372-3.722.372c-.516.052-.975-.183-1.348-.55l-1.43-1.43a1.875 1.875 0 00-2.652 0l-.02.02"}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ex,_x;function Mx(){return{geminiUrl:Ex,vertexUrl:_x}}function wx(l,t,s,o){var u,d;if(!(l!=null&&l.baseUrl)){const m=Mx();return t?(u=m.vertexUrl)!==null&&u!==void 0?u:s:(d=m.geminiUrl)!==null&&d!==void 0?d:o}return l.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xl{}function re(l,t){const s=/\{([^}]+)\}/g;return l.replace(s,(o,u)=>{if(Object.prototype.hasOwnProperty.call(t,u)){const d=t[u];return d!=null?String(d):""}else throw new Error(`Key '${u}' not found in valueMap.`)})}function h(l,t,s){for(let d=0;d<t.length-1;d++){const m=t[d];if(m.endsWith("[]")){const y=m.slice(0,-2);if(!(y in l))if(Array.isArray(s))l[y]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${m}`);if(Array.isArray(l[y])){const x=l[y];if(Array.isArray(s))for(let g=0;g<x.length;g++){const v=x[g];h(v,t.slice(d+1),s[g])}else for(const g of x)h(g,t.slice(d+1),s)}return}else if(m.endsWith("[0]")){const y=m.slice(0,-3);y in l||(l[y]=[{}]);const x=l[y];h(x[0],t.slice(d+1),s);return}(!l[m]||typeof l[m]!="object")&&(l[m]={}),l=l[m]}const o=t[t.length-1],u=l[o];if(u!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===u)return;if(typeof u=="object"&&typeof s=="object"&&u!==null&&s!==null)Object.assign(u,s);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof s=="object"&&s!==null&&!Array.isArray(s)?Object.assign(l,s):l[o]=s}function c(l,t,s=void 0){try{if(t.length===1&&t[0]==="_self")return l;for(let o=0;o<t.length;o++){if(typeof l!="object"||l===null)return s;const u=t[o];if(u.endsWith("[]")){const d=u.slice(0,-2);if(d in l){const m=l[d];return Array.isArray(m)?m.map(y=>c(y,t.slice(o+1),s)):s}else return s}else l=l[u]}return l}catch(o){if(o instanceof TypeError)return s;throw o}}function Dx(l,t){for(const[s,o]of Object.entries(t)){const u=s.split("."),d=o.split("."),m=new Set;let y=-1;for(let x=0;x<u.length;x++)if(u[x]==="*"){y=x;break}if(y!==-1&&d.length>y)for(let x=y;x<d.length;x++){const g=d[x];g!=="*"&&!g.endsWith("[]")&&!g.endsWith("[0]")&&m.add(g)}_u(l,u,d,0,m)}}function _u(l,t,s,o,u){if(o>=t.length||typeof l!="object"||l===null)return;const d=t[o];if(d.endsWith("[]")){const m=d.slice(0,-2),y=l;if(m in y&&Array.isArray(y[m]))for(const x of y[m])_u(x,t,s,o+1,u)}else if(d==="*"){if(typeof l=="object"&&l!==null&&!Array.isArray(l)){const m=l,y=Object.keys(m).filter(g=>!g.startsWith("_")&&!u.has(g)),x={};for(const g of y)x[g]=m[g];for(const[g,v]of Object.entries(x)){const b=[];for(const N of s.slice(o))N==="*"?b.push(g):b.push(N);h(m,b,v)}for(const g of y)delete m[g]}}else{const m=l;d in m&&_u(m[d],t,s,o+1,u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bu(l){if(typeof l!="string")throw new Error("fromImageBytes must be a string");return l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rx(l){const t={},s=c(l,["operationName"]);s!=null&&h(t,["operationName"],s);const o=c(l,["resourceName"]);return o!=null&&h(t,["_url","resourceName"],o),t}function Ix(l){const t={},s=c(l,["name"]);s!=null&&h(t,["name"],s);const o=c(l,["metadata"]);o!=null&&h(t,["metadata"],o);const u=c(l,["done"]);u!=null&&h(t,["done"],u);const d=c(l,["error"]);d!=null&&h(t,["error"],d);const m=c(l,["response","generateVideoResponse"]);return m!=null&&h(t,["response"],jx(m)),t}function Ux(l){const t={},s=c(l,["name"]);s!=null&&h(t,["name"],s);const o=c(l,["metadata"]);o!=null&&h(t,["metadata"],o);const u=c(l,["done"]);u!=null&&h(t,["done"],u);const d=c(l,["error"]);d!=null&&h(t,["error"],d);const m=c(l,["response"]);return m!=null&&h(t,["response"],Lx(m)),t}function jx(l){const t={},s=c(l,["generatedSamples"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(m=>Hx(m))),h(t,["generatedVideos"],d)}const o=c(l,["raiMediaFilteredCount"]);o!=null&&h(t,["raiMediaFilteredCount"],o);const u=c(l,["raiMediaFilteredReasons"]);return u!=null&&h(t,["raiMediaFilteredReasons"],u),t}function Lx(l){const t={},s=c(l,["videos"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(m=>kx(m))),h(t,["generatedVideos"],d)}const o=c(l,["raiMediaFilteredCount"]);o!=null&&h(t,["raiMediaFilteredCount"],o);const u=c(l,["raiMediaFilteredReasons"]);return u!=null&&h(t,["raiMediaFilteredReasons"],u),t}function Hx(l){const t={},s=c(l,["video"]);return s!=null&&h(t,["video"],Vx(s)),t}function kx(l){const t={},s=c(l,["_self"]);return s!=null&&h(t,["video"],Bx(s)),t}function Gx(l){const t={},s=c(l,["operationName"]);return s!=null&&h(t,["_url","operationName"],s),t}function qx(l){const t={},s=c(l,["operationName"]);return s!=null&&h(t,["_url","operationName"],s),t}function Vx(l){const t={},s=c(l,["uri"]);s!=null&&h(t,["uri"],s);const o=c(l,["encodedVideo"]);o!=null&&h(t,["videoBytes"],Bu(o));const u=c(l,["encoding"]);return u!=null&&h(t,["mimeType"],u),t}function Bx(l){const t={},s=c(l,["gcsUri"]);s!=null&&h(t,["uri"],s);const o=c(l,["bytesBase64Encoded"]);o!=null&&h(t,["videoBytes"],Bu(o));const u=c(l,["mimeType"]);return u!=null&&h(t,["mimeType"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var am;(function(l){l.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",l.OUTCOME_OK="OUTCOME_OK",l.OUTCOME_FAILED="OUTCOME_FAILED",l.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(am||(am={}));var rm;(function(l){l.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",l.PYTHON="PYTHON"})(rm||(rm={}));var um;(function(l){l.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",l.SILENT="SILENT",l.WHEN_IDLE="WHEN_IDLE",l.INTERRUPT="INTERRUPT"})(um||(um={}));var Jn;(function(l){l.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",l.STRING="STRING",l.NUMBER="NUMBER",l.INTEGER="INTEGER",l.BOOLEAN="BOOLEAN",l.ARRAY="ARRAY",l.OBJECT="OBJECT",l.NULL="NULL"})(Jn||(Jn={}));var cm;(function(l){l.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",l.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",l.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",l.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",l.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",l.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",l.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",l.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",l.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",l.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",l.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(cm||(cm={}));var dm;(function(l){l.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",l.SEVERITY="SEVERITY",l.PROBABILITY="PROBABILITY"})(dm||(dm={}));var fm;(function(l){l.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",l.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",l.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",l.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",l.BLOCK_NONE="BLOCK_NONE",l.OFF="OFF"})(fm||(fm={}));var hm;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.MODE_DYNAMIC="MODE_DYNAMIC"})(hm||(hm={}));var mm;(function(l){l.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",l.NO_AUTH="NO_AUTH",l.API_KEY_AUTH="API_KEY_AUTH",l.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",l.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",l.OAUTH="OAUTH",l.OIDC_AUTH="OIDC_AUTH"})(mm||(mm={}));var pm;(function(l){l.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",l.SIMPLE_SEARCH="SIMPLE_SEARCH",l.ELASTIC_SEARCH="ELASTIC_SEARCH"})(pm||(pm={}));var gm;(function(l){l.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",l.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",l.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",l.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",l.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(gm||(gm={}));var ym;(function(l){l.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",l.STOP="STOP",l.MAX_TOKENS="MAX_TOKENS",l.SAFETY="SAFETY",l.RECITATION="RECITATION",l.LANGUAGE="LANGUAGE",l.OTHER="OTHER",l.BLOCKLIST="BLOCKLIST",l.PROHIBITED_CONTENT="PROHIBITED_CONTENT",l.SPII="SPII",l.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",l.IMAGE_SAFETY="IMAGE_SAFETY",l.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",l.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",l.NO_IMAGE="NO_IMAGE"})(ym||(ym={}));var xm;(function(l){l.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",l.NEGLIGIBLE="NEGLIGIBLE",l.LOW="LOW",l.MEDIUM="MEDIUM",l.HIGH="HIGH"})(xm||(xm={}));var vm;(function(l){l.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",l.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",l.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",l.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",l.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(vm||(vm={}));var bm;(function(l){l.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",l.SAFETY="SAFETY",l.OTHER="OTHER",l.BLOCKLIST="BLOCKLIST",l.PROHIBITED_CONTENT="PROHIBITED_CONTENT",l.IMAGE_SAFETY="IMAGE_SAFETY",l.MODEL_ARMOR="MODEL_ARMOR",l.JAILBREAK="JAILBREAK"})(bm||(bm={}));var Tm;(function(l){l.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",l.ON_DEMAND="ON_DEMAND",l.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Tm||(Tm={}));var Yo;(function(l){l.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",l.TEXT="TEXT",l.IMAGE="IMAGE",l.AUDIO="AUDIO"})(Yo||(Yo={}));var Nm;(function(l){l.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",l.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",l.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",l.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Nm||(Nm={}));var Mu;(function(l){l.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",l.JOB_STATE_QUEUED="JOB_STATE_QUEUED",l.JOB_STATE_PENDING="JOB_STATE_PENDING",l.JOB_STATE_RUNNING="JOB_STATE_RUNNING",l.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",l.JOB_STATE_FAILED="JOB_STATE_FAILED",l.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",l.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",l.JOB_STATE_PAUSED="JOB_STATE_PAUSED",l.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",l.JOB_STATE_UPDATING="JOB_STATE_UPDATING",l.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Mu||(Mu={}));var Sm;(function(l){l.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",l.TUNING_MODE_FULL="TUNING_MODE_FULL",l.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Sm||(Sm={}));var Cm;(function(l){l.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",l.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",l.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",l.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",l.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",l.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",l.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Cm||(Cm={}));var Am;(function(l){l.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",l.TUNING_TASK_I2V="TUNING_TASK_I2V",l.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Am||(Am={}));var Em;(function(l){l.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",l.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",l.BALANCED="BALANCED",l.PRIORITIZE_COST="PRIORITIZE_COST"})(Em||(Em={}));var _m;(function(l){l.UNSPECIFIED="UNSPECIFIED",l.BLOCKING="BLOCKING",l.NON_BLOCKING="NON_BLOCKING"})(_m||(_m={}));var Mm;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.MODE_DYNAMIC="MODE_DYNAMIC"})(Mm||(Mm={}));var wm;(function(l){l.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",l.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(wm||(wm={}));var Dm;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.AUTO="AUTO",l.ANY="ANY",l.NONE="NONE",l.VALIDATED="VALIDATED"})(Dm||(Dm={}));var Rm;(function(l){l.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",l.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",l.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",l.BLOCK_NONE="BLOCK_NONE"})(Rm||(Rm={}));var Im;(function(l){l.DONT_ALLOW="DONT_ALLOW",l.ALLOW_ADULT="ALLOW_ADULT",l.ALLOW_ALL="ALLOW_ALL"})(Im||(Im={}));var Um;(function(l){l.auto="auto",l.en="en",l.ja="ja",l.ko="ko",l.hi="hi",l.zh="zh",l.pt="pt",l.es="es"})(Um||(Um={}));var jm;(function(l){l.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",l.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",l.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",l.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",l.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(jm||(jm={}));var Lm;(function(l){l.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",l.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",l.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",l.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Lm||(Lm={}));var Hm;(function(l){l.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",l.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",l.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",l.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Hm||(Hm={}));var km;(function(l){l.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",l.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",l.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",l.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",l.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",l.EDIT_MODE_STYLE="EDIT_MODE_STYLE",l.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",l.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(km||(km={}));var Gm;(function(l){l.FOREGROUND="FOREGROUND",l.BACKGROUND="BACKGROUND",l.PROMPT="PROMPT",l.SEMANTIC="SEMANTIC",l.INTERACTIVE="INTERACTIVE"})(Gm||(Gm={}));var qm;(function(l){l.ASSET="ASSET",l.STYLE="STYLE"})(qm||(qm={}));var Vm;(function(l){l.INSERT="INSERT",l.REMOVE="REMOVE",l.REMOVE_STATIC="REMOVE_STATIC",l.OUTPAINT="OUTPAINT"})(Vm||(Vm={}));var Bm;(function(l){l.OPTIMIZED="OPTIMIZED",l.LOSSLESS="LOSSLESS"})(Bm||(Bm={}));var Pm;(function(l){l.STATE_UNSPECIFIED="STATE_UNSPECIFIED",l.PROCESSING="PROCESSING",l.ACTIVE="ACTIVE",l.FAILED="FAILED"})(Pm||(Pm={}));var zm;(function(l){l.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",l.UPLOADED="UPLOADED",l.GENERATED="GENERATED"})(zm||(zm={}));var Om;(function(l){l.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",l.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",l.RESPONSE_REJECTED="RESPONSE_REJECTED",l.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Om||(Om={}));var Ym;(function(l){l.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",l.TEXT="TEXT",l.IMAGE="IMAGE",l.VIDEO="VIDEO",l.AUDIO="AUDIO",l.DOCUMENT="DOCUMENT"})(Ym||(Ym={}));var Km;(function(l){l.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",l.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",l.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Km||(Km={}));var Fm;(function(l){l.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",l.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",l.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Fm||(Fm={}));var Jm;(function(l){l.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",l.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",l.NO_INTERRUPTION="NO_INTERRUPTION"})(Jm||(Jm={}));var Qm;(function(l){l.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",l.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",l.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Qm||(Qm={}));var Xm;(function(l){l.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",l.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",l.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",l.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",l.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",l.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",l.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",l.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",l.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",l.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",l.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",l.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",l.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Xm||(Xm={}));var $m;(function(l){l.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",l.QUALITY="QUALITY",l.DIVERSITY="DIVERSITY",l.VOCALIZATION="VOCALIZATION"})($m||($m={}));var ii;(function(l){l.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",l.PLAY="PLAY",l.PAUSE="PAUSE",l.STOP="STOP",l.RESET_CONTEXT="RESET_CONTEXT"})(ii||(ii={}));class wu{constructor(t){const s={};for(const o of t.headers.entries())s[o[0]]=o[1];this.headers=s,this.responseInternal=t}json(){return this.responseInternal.json()}}class cs{get text(){var t,s,o,u,d,m,y,x;if(((u=(o=(s=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",v=!1;const b=[];for(const N of(x=(y=(m=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||m===void 0?void 0:m.content)===null||y===void 0?void 0:y.parts)!==null&&x!==void 0?x:[]){for(const[C,_]of Object.entries(N))C!=="text"&&C!=="thought"&&(_!==null||_!==void 0)&&b.push(C);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;v=!0,g+=N.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?g:void 0}get data(){var t,s,o,u,d,m,y,x;if(((u=(o=(s=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const v=[];for(const b of(x=(y=(m=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||m===void 0?void 0:m.content)===null||y===void 0?void 0:y.parts)!==null&&x!==void 0?x:[]){for(const[N,C]of Object.entries(b))N!=="inlineData"&&(C!==null||C!==void 0)&&v.push(N);b.inlineData&&typeof b.inlineData.data=="string"&&(g+=atob(b.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var t,s,o,u,d,m,y,x;if(((u=(o=(s=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(x=(y=(m=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||m===void 0?void 0:m.content)===null||y===void 0?void 0:y.parts)===null||x===void 0?void 0:x.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var t,s,o,u,d,m,y,x,g;if(((u=(o=(s=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(x=(y=(m=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||m===void 0?void 0:m.content)===null||y===void 0?void 0:y.parts)===null||x===void 0?void 0:x.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(g=v==null?void 0:v[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var t,s,o,u,d,m,y,x,g;if(((u=(o=(s=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(x=(y=(m=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||m===void 0?void 0:m.content)===null||y===void 0?void 0:y.parts)===null||x===void 0?void 0:x.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(g=v==null?void 0:v[0])===null||g===void 0?void 0:g.output}}class Zm{}class Wm{}class Px{}class zx{}class Ox{}class Yx{}class ep{}class tp{}class np{}class Kx{}class Ko{_fromAPIResponse({apiResponse:t,isVertexAI:s}){const o=new Ko;let u;const d=t;return s?u=Ux(d):u=Ix(d),Object.assign(o,u),o}}class lp{}class ip{}class sp{}class Fx{}class Jx{}class Qx{}class op{}class Xx{get text(){var t,s,o;let u="",d=!1;const m=[];for(const y of(o=(s=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&o!==void 0?o:[]){for(const[x,g]of Object.entries(y))x!=="text"&&x!=="thought"&&g!==null&&m.push(x);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;d=!0,u+=y.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var t,s,o;let u="";const d=[];for(const m of(o=(s=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&o!==void 0?o:[]){for(const[y,x]of Object.entries(m))y!=="inlineData"&&x!==null&&d.push(y);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}}class $x{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Me(l,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(l.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const s=t.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Pp(l,t){const s=Me(l,t);return s?s.startsWith("publishers/")&&l.isVertexAI()?`projects/${l.getProject()}/locations/${l.getLocation()}/${s}`:s.startsWith("models/")&&l.isVertexAI()?`projects/${l.getProject()}/locations/${l.getLocation()}/publishers/google/${s}`:s:""}function zp(l){return Array.isArray(l)?l.map(t=>Fo(t)):[Fo(l)]}function Fo(l){if(typeof l=="object"&&l!==null)return l;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof l}`)}function Op(l){const t=Fo(l);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Yp(l){const t=Fo(l);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ap(l){if(l==null)throw new Error("PartUnion is required");if(typeof l=="object")return l;if(typeof l=="string")return{text:l};throw new Error(`Unsupported part type: ${typeof l}`)}function Kp(l){if(l==null||Array.isArray(l)&&l.length===0)throw new Error("PartListUnion is required");return Array.isArray(l)?l.map(t=>ap(t)):[ap(l)]}function Du(l){return l!=null&&typeof l=="object"&&"parts"in l&&Array.isArray(l.parts)}function rp(l){return l!=null&&typeof l=="object"&&"functionCall"in l}function up(l){return l!=null&&typeof l=="object"&&"functionResponse"in l}function rt(l){if(l==null)throw new Error("ContentUnion is required");return Du(l)?l:{role:"user",parts:Kp(l)}}function Pu(l,t){if(!t)return[];if(l.isVertexAI()&&Array.isArray(t))return t.flatMap(s=>{const o=rt(s);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(l.isVertexAI()){const s=rt(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(t)?t.map(s=>rt(s)):[rt(t)]}function Bt(l){if(l==null||Array.isArray(l)&&l.length===0)throw new Error("contents are required");if(!Array.isArray(l)){if(rp(l)||up(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rt(l)]}const t=[],s=[],o=Du(l[0]);for(const u of l){const d=Du(u);if(d!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(d)t.push(u);else{if(rp(u)||up(u))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(u)}}return o||t.push({role:"user",parts:Kp(s)}),t}function Zx(l,t){l.includes("null")&&(t.nullable=!0);const s=l.filter(o=>o!=="null");if(s.length===1)t.type=Object.values(Jn).includes(s[0].toUpperCase())?s[0].toUpperCase():Jn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of s)t.anyOf.push({type:Object.values(Jn).includes(o.toUpperCase())?o.toUpperCase():Jn.TYPE_UNSPECIFIED})}}function si(l){const t={},s=["items"],o=["anyOf"],u=["properties"];if(l.type&&l.anyOf)throw new Error("type and anyOf cannot be both populated.");const d=l.anyOf;d!=null&&d.length==2&&(d[0].type==="null"?(t.nullable=!0,l=d[1]):d[1].type==="null"&&(t.nullable=!0,l=d[0])),l.type instanceof Array&&Zx(l.type,t);for(const[m,y]of Object.entries(l))if(y!=null)if(m=="type"){if(y==="null")throw new Error("type: null can not be the only possible type for the field.");if(y instanceof Array)continue;t.type=Object.values(Jn).includes(y.toUpperCase())?y.toUpperCase():Jn.TYPE_UNSPECIFIED}else if(s.includes(m))t[m]=si(y);else if(o.includes(m)){const x=[];for(const g of y){if(g.type=="null"){t.nullable=!0;continue}x.push(si(g))}t[m]=x}else if(u.includes(m)){const x={};for(const[g,v]of Object.entries(y))x[g]=si(v);t[m]=x}else{if(m==="additionalProperties")continue;t[m]=y}return t}function zu(l){return si(l)}function Ou(l){if(typeof l=="object")return l;if(typeof l=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:l}}};throw new Error(`Unsupported speechConfig type: ${typeof l}`)}function Yu(l){if("multiSpeakerVoiceConfig"in l)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return l}function ui(l){if(l.functionDeclarations)for(const t of l.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=si(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=si(t.response));return l}function ci(l){if(l==null)throw new Error("tools is required");if(!Array.isArray(l))throw new Error("tools is required and must be an array of Tools");const t=[];for(const s of l)t.push(s);return t}function Wx(l,t,s,o=1){const u=!t.startsWith(`${s}/`)&&t.split("/").length===o;return l.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${l.getProject()}/${t}`:t.startsWith(`${s}/`)?`projects/${l.getProject()}/locations/${l.getLocation()}/${t}`:u?`projects/${l.getProject()}/locations/${l.getLocation()}/${s}/${t}`:t:u?`${s}/${t}`:t}function Nn(l,t){if(typeof t!="string")throw new Error("name must be a string");return Wx(l,t,"cachedContents")}function Fp(l){switch(l){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return l}}function Xn(l){return Bu(l)}function ev(l){return l!=null&&typeof l=="object"&&"name"in l}function tv(l){return l!=null&&typeof l=="object"&&"video"in l}function nv(l){return l!=null&&typeof l=="object"&&"uri"in l}function Jp(l){var t;let s;if(ev(l)&&(s=l.name),!(nv(l)&&(s=l.uri,s===void 0))&&!(tv(l)&&(s=(t=l.video)===null||t===void 0?void 0:t.uri,s===void 0))){if(typeof l=="string"&&(s=l),s===void 0)throw new Error("Could not extract file name from the provided input.");if(s.startsWith("https://")){const u=s.split("files/")[1].match(/[a-z0-9]+/);if(u===null)throw new Error(`Could not extract file name from URI ${s}`);s=u[0]}else s.startsWith("files/")&&(s=s.split("files/")[1]);return s}}function Qp(l,t){let s;return l.isVertexAI()?s=t?"publishers/google/models":"models":s=t?"models":"tunedModels",s}function Xp(l){for(const t of["models","tunedModels","publisherModels"])if(lv(l,t))return l[t];return[]}function lv(l,t){return l!==null&&typeof l=="object"&&t in l}function iv(l,t={}){const s=l,o={name:s.name,description:s.description,parametersJsonSchema:s.inputSchema};return s.outputSchema&&(o.responseJsonSchema=s.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function sv(l,t={}){const s=[],o=new Set;for(const u of l){const d=u.name;if(o.has(d))throw new Error(`Duplicate function name ${d} found in MCP tools. Please ensure function names are unique.`);o.add(d);const m=iv(u,t);m.functionDeclarations&&s.push(...m.functionDeclarations)}return{functionDeclarations:s}}function $p(l,t){let s;if(typeof t=="string")if(l.isVertexAI())if(t.startsWith("gs://"))s={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))s={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))s={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(l.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");s={inlinedRequests:t}}else s=t;const o=[s.gcsUri,s.bigqueryUri].filter(Boolean).length,u=[s.inlinedRequests,s.fileName].filter(Boolean).length;if(l.isVertexAI()){if(u>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||u!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return s}function ov(l){if(typeof l!="string")return l;const t=l;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Zp(l){if(typeof l!="object"||l===null)return{};const t=l,s=t.inlinedResponses;if(typeof s!="object"||s===null)return l;const u=s.inlinedResponses;if(!Array.isArray(u)||u.length===0)return l;let d=!1;for(const m of u){if(typeof m!="object"||m===null)continue;const x=m.response;if(typeof x!="object"||x===null)continue;if(x.embedding!==void 0){d=!0;break}}return d&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),l}function di(l,t){const s=t;if(!l.isVertexAI()){if(/batches\/[^/]+$/.test(s))return s.split("/").pop();throw new Error(`Invalid batch job name: ${s}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(s))return s.split("/").pop();if(/^\d+$/.test(s))return s;throw new Error(`Invalid batch job name: ${s}.`)}function Wp(l){const t=l;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function av(l){const t={},s=c(l,["responsesFile"]);s!=null&&h(t,["fileName"],s);const o=c(l,["inlinedResponses","inlinedResponses"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(m=>Gv(m))),h(t,["inlinedResponses"],d)}const u=c(l,["inlinedEmbedContentResponses","inlinedResponses"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(m=>m)),h(t,["inlinedEmbedContentResponses"],d)}return t}function rv(l){const t={},s=c(l,["predictionsFormat"]);s!=null&&h(t,["format"],s);const o=c(l,["gcsDestination","outputUriPrefix"]);o!=null&&h(t,["gcsUri"],o);const u=c(l,["bigqueryDestination","outputUri"]);return u!=null&&h(t,["bigqueryUri"],u),t}function uv(l){const t={},s=c(l,["format"]);s!=null&&h(t,["predictionsFormat"],s);const o=c(l,["gcsUri"]);o!=null&&h(t,["gcsDestination","outputUriPrefix"],o);const u=c(l,["bigqueryUri"]);if(u!=null&&h(t,["bigqueryDestination","outputUri"],u),c(l,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(l,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(l,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Po(l){const t={},s=c(l,["name"]);s!=null&&h(t,["name"],s);const o=c(l,["metadata","displayName"]);o!=null&&h(t,["displayName"],o);const u=c(l,["metadata","state"]);u!=null&&h(t,["state"],Wp(u));const d=c(l,["metadata","createTime"]);d!=null&&h(t,["createTime"],d);const m=c(l,["metadata","endTime"]);m!=null&&h(t,["endTime"],m);const y=c(l,["metadata","updateTime"]);y!=null&&h(t,["updateTime"],y);const x=c(l,["metadata","model"]);x!=null&&h(t,["model"],x);const g=c(l,["metadata","output"]);return g!=null&&h(t,["dest"],av(Zp(g))),t}function Ru(l){const t={},s=c(l,["name"]);s!=null&&h(t,["name"],s);const o=c(l,["displayName"]);o!=null&&h(t,["displayName"],o);const u=c(l,["state"]);u!=null&&h(t,["state"],Wp(u));const d=c(l,["error"]);d!=null&&h(t,["error"],d);const m=c(l,["createTime"]);m!=null&&h(t,["createTime"],m);const y=c(l,["startTime"]);y!=null&&h(t,["startTime"],y);const x=c(l,["endTime"]);x!=null&&h(t,["endTime"],x);const g=c(l,["updateTime"]);g!=null&&h(t,["updateTime"],g);const v=c(l,["model"]);v!=null&&h(t,["model"],v);const b=c(l,["inputConfig"]);b!=null&&h(t,["src"],cv(b));const N=c(l,["outputConfig"]);return N!=null&&h(t,["dest"],rv(Zp(N))),t}function cv(l){const t={},s=c(l,["instancesFormat"]);s!=null&&h(t,["format"],s);const o=c(l,["gcsSource","uris"]);o!=null&&h(t,["gcsUri"],o);const u=c(l,["bigquerySource","inputUri"]);return u!=null&&h(t,["bigqueryUri"],u),t}function dv(l,t){const s={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=c(t,["fileName"]);o!=null&&h(s,["fileName"],o);const u=c(t,["inlinedRequests"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(m=>kv(l,m))),h(s,["requests","requests"],d)}return s}function fv(l){const t={},s=c(l,["format"]);s!=null&&h(t,["instancesFormat"],s);const o=c(l,["gcsUri"]);o!=null&&h(t,["gcsSource","uris"],o);const u=c(l,["bigqueryUri"]);if(u!=null&&h(t,["bigquerySource","inputUri"],u),c(l,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(l,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function hv(l){const t={};if(c(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(l,["data"]);s!=null&&h(t,["data"],s);const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function mv(l,t){const s={},o=c(t,["name"]);return o!=null&&h(s,["_url","name"],di(l,o)),s}function pv(l,t){const s={},o=c(t,["name"]);return o!=null&&h(s,["_url","name"],di(l,o)),s}function gv(l){const t={},s=c(l,["content"]);s!=null&&h(t,["content"],s);const o=c(l,["citationMetadata"]);o!=null&&h(t,["citationMetadata"],yv(o));const u=c(l,["tokenCount"]);u!=null&&h(t,["tokenCount"],u);const d=c(l,["finishReason"]);d!=null&&h(t,["finishReason"],d);const m=c(l,["urlContextMetadata"]);m!=null&&h(t,["urlContextMetadata"],m);const y=c(l,["avgLogprobs"]);y!=null&&h(t,["avgLogprobs"],y);const x=c(l,["groundingMetadata"]);x!=null&&h(t,["groundingMetadata"],x);const g=c(l,["index"]);g!=null&&h(t,["index"],g);const v=c(l,["logprobsResult"]);v!=null&&h(t,["logprobsResult"],v);const b=c(l,["safetyRatings"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(C=>C)),h(t,["safetyRatings"],N)}return t}function yv(l){const t={},s=c(l,["citationSources"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),h(t,["citations"],o)}return t}function eg(l){const t={},s=c(l,["parts"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Yv(d))),h(t,["parts"],u)}const o=c(l,["role"]);return o!=null&&h(t,["role"],o),t}function xv(l,t){const s={},o=c(l,["displayName"]);if(t!==void 0&&o!=null&&h(t,["batch","displayName"],o),c(l,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return s}function vv(l,t){const s={},o=c(l,["displayName"]);t!==void 0&&o!=null&&h(t,["displayName"],o);const u=c(l,["dest"]);return t!==void 0&&u!=null&&h(t,["outputConfig"],uv(ov(u))),s}function cp(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["src"]);u!=null&&h(s,["batch","inputConfig"],dv(l,$p(l,u)));const d=c(t,["config"]);return d!=null&&xv(d,s),s}function bv(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["model"],Me(l,o));const u=c(t,["src"]);u!=null&&h(s,["inputConfig"],fv($p(l,u)));const d=c(t,["config"]);return d!=null&&vv(d,s),s}function Tv(l,t){const s={},o=c(l,["displayName"]);return t!==void 0&&o!=null&&h(t,["batch","displayName"],o),s}function Nv(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["src"]);u!=null&&h(s,["batch","inputConfig"],wv(l,u));const d=c(t,["config"]);return d!=null&&Tv(d,s),s}function Sv(l,t){const s={},o=c(t,["name"]);return o!=null&&h(s,["_url","name"],di(l,o)),s}function Cv(l,t){const s={},o=c(t,["name"]);return o!=null&&h(s,["_url","name"],di(l,o)),s}function Av(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["name"]);o!=null&&h(t,["name"],o);const u=c(l,["done"]);u!=null&&h(t,["done"],u);const d=c(l,["error"]);return d!=null&&h(t,["error"],d),t}function Ev(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["name"]);o!=null&&h(t,["name"],o);const u=c(l,["done"]);u!=null&&h(t,["done"],u);const d=c(l,["error"]);return d!=null&&h(t,["error"],d),t}function _v(l,t){const s={},o=c(t,["contents"]);if(o!=null){let d=Pu(l,o);Array.isArray(d)&&(d=d.map(m=>m)),h(s,["requests[]","request","content"],d)}const u=c(t,["config"]);return u!=null&&(h(s,["_self"],Mv(u,s)),Dx(s,{"requests[].*":"requests[].request.*"})),s}function Mv(l,t){const s={},o=c(l,["taskType"]);t!==void 0&&o!=null&&h(t,["requests[]","taskType"],o);const u=c(l,["title"]);t!==void 0&&u!=null&&h(t,["requests[]","title"],u);const d=c(l,["outputDimensionality"]);if(t!==void 0&&d!=null&&h(t,["requests[]","outputDimensionality"],d),c(l,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(l,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function wv(l,t){const s={},o=c(t,["fileName"]);o!=null&&h(s,["file_name"],o);const u=c(t,["inlinedRequests"]);return u!=null&&h(s,["requests"],_v(l,u)),s}function Dv(l){const t={};if(c(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(l,["fileUri"]);s!=null&&h(t,["fileUri"],s);const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function Rv(l,t,s){const o={},u=c(t,["systemInstruction"]);s!==void 0&&u!=null&&h(s,["systemInstruction"],eg(rt(u)));const d=c(t,["temperature"]);d!=null&&h(o,["temperature"],d);const m=c(t,["topP"]);m!=null&&h(o,["topP"],m);const y=c(t,["topK"]);y!=null&&h(o,["topK"],y);const x=c(t,["candidateCount"]);x!=null&&h(o,["candidateCount"],x);const g=c(t,["maxOutputTokens"]);g!=null&&h(o,["maxOutputTokens"],g);const v=c(t,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const b=c(t,["responseLogprobs"]);b!=null&&h(o,["responseLogprobs"],b);const N=c(t,["logprobs"]);N!=null&&h(o,["logprobs"],N);const C=c(t,["presencePenalty"]);C!=null&&h(o,["presencePenalty"],C);const _=c(t,["frequencyPenalty"]);_!=null&&h(o,["frequencyPenalty"],_);const E=c(t,["seed"]);E!=null&&h(o,["seed"],E);const j=c(t,["responseMimeType"]);j!=null&&h(o,["responseMimeType"],j);const A=c(t,["responseSchema"]);A!=null&&h(o,["responseSchema"],zu(A));const H=c(t,["responseJsonSchema"]);if(H!=null&&h(o,["responseJsonSchema"],H),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=c(t,["safetySettings"]);if(s!==void 0&&q!=null){let D=q;Array.isArray(D)&&(D=D.map(F=>Kv(F))),h(s,["safetySettings"],D)}const G=c(t,["tools"]);if(s!==void 0&&G!=null){let D=ci(G);Array.isArray(D)&&(D=D.map(F=>Fv(ui(F)))),h(s,["tools"],D)}const P=c(t,["toolConfig"]);if(s!==void 0&&P!=null&&h(s,["toolConfig"],P),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=c(t,["cachedContent"]);s!==void 0&&V!=null&&h(s,["cachedContent"],Nn(l,V));const k=c(t,["responseModalities"]);k!=null&&h(o,["responseModalities"],k);const X=c(t,["mediaResolution"]);X!=null&&h(o,["mediaResolution"],X);const Z=c(t,["speechConfig"]);if(Z!=null&&h(o,["speechConfig"],Ou(Z)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const se=c(t,["thinkingConfig"]);se!=null&&h(o,["thinkingConfig"],se);const I=c(t,["imageConfig"]);return I!=null&&h(o,["imageConfig"],I),o}function Iv(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["candidates"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(g=>gv(g))),h(t,["candidates"],x)}const u=c(l,["modelVersion"]);u!=null&&h(t,["modelVersion"],u);const d=c(l,["promptFeedback"]);d!=null&&h(t,["promptFeedback"],d);const m=c(l,["responseId"]);m!=null&&h(t,["responseId"],m);const y=c(l,["usageMetadata"]);return y!=null&&h(t,["usageMetadata"],y),t}function Uv(l,t){const s={},o=c(t,["name"]);return o!=null&&h(s,["_url","name"],di(l,o)),s}function jv(l,t){const s={},o=c(t,["name"]);return o!=null&&h(s,["_url","name"],di(l,o)),s}function Lv(l){const t={};if(c(l,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(l,["enableWidget"]);return s!=null&&h(t,["enableWidget"],s),t}function Hv(l){const t={},s=c(l,["timeRangeFilter"]);if(s!=null&&h(t,["timeRangeFilter"],s),c(l,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function kv(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["request","model"],Me(l,o));const u=c(t,["contents"]);if(u!=null){let y=Bt(u);Array.isArray(y)&&(y=y.map(x=>eg(x))),h(s,["request","contents"],y)}const d=c(t,["metadata"]);d!=null&&h(s,["metadata"],d);const m=c(t,["config"]);return m!=null&&h(s,["request","generationConfig"],Rv(l,m,c(s,["request"],{}))),s}function Gv(l){const t={},s=c(l,["response"]);s!=null&&h(t,["response"],Iv(s));const o=c(l,["error"]);return o!=null&&h(t,["error"],o),t}function qv(l,t){const s={},o=c(l,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const u=c(l,["pageToken"]);if(t!==void 0&&u!=null&&h(t,["_query","pageToken"],u),c(l,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return s}function Vv(l,t){const s={},o=c(l,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const u=c(l,["pageToken"]);t!==void 0&&u!=null&&h(t,["_query","pageToken"],u);const d=c(l,["filter"]);return t!==void 0&&d!=null&&h(t,["_query","filter"],d),s}function Bv(l){const t={},s=c(l,["config"]);return s!=null&&qv(s,t),t}function Pv(l){const t={},s=c(l,["config"]);return s!=null&&Vv(s,t),t}function zv(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const u=c(l,["operations"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(m=>Po(m))),h(t,["batchJobs"],d)}return t}function Ov(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const u=c(l,["batchPredictionJobs"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(m=>Ru(m))),h(t,["batchJobs"],d)}return t}function Yv(l){const t={},s=c(l,["videoMetadata"]);s!=null&&h(t,["videoMetadata"],s);const o=c(l,["thought"]);o!=null&&h(t,["thought"],o);const u=c(l,["inlineData"]);u!=null&&h(t,["inlineData"],hv(u));const d=c(l,["fileData"]);d!=null&&h(t,["fileData"],Dv(d));const m=c(l,["thoughtSignature"]);m!=null&&h(t,["thoughtSignature"],m);const y=c(l,["functionCall"]);y!=null&&h(t,["functionCall"],y);const x=c(l,["codeExecutionResult"]);x!=null&&h(t,["codeExecutionResult"],x);const g=c(l,["executableCode"]);g!=null&&h(t,["executableCode"],g);const v=c(l,["functionResponse"]);v!=null&&h(t,["functionResponse"],v);const b=c(l,["text"]);return b!=null&&h(t,["text"],b),t}function Kv(l){const t={};if(c(l,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(l,["category"]);s!=null&&h(t,["category"],s);const o=c(l,["threshold"]);return o!=null&&h(t,["threshold"],o),t}function Fv(l){const t={},s=c(l,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),h(t,["functionDeclarations"],g)}if(c(l,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(l,["googleSearch"]);o!=null&&h(t,["googleSearch"],Hv(o));const u=c(l,["googleSearchRetrieval"]);if(u!=null&&h(t,["googleSearchRetrieval"],u),c(l,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(l,["googleMaps"]);d!=null&&h(t,["googleMaps"],Lv(d));const m=c(l,["urlContext"]);m!=null&&h(t,["urlContext"],m);const y=c(l,["computerUse"]);y!=null&&h(t,["computerUse"],y);const x=c(l,["codeExecution"]);return x!=null&&h(t,["codeExecution"],x),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yl;(function(l){l.PAGED_ITEM_BATCH_JOBS="batchJobs",l.PAGED_ITEM_MODELS="models",l.PAGED_ITEM_TUNING_JOBS="tuningJobs",l.PAGED_ITEM_FILES="files",l.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(yl||(yl={}));class ms{constructor(t,s,o,u){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(t,o,u)}init(t,s,o){var u,d;this.nameInternal=t,this.pageInternal=s[this.nameInternal]||[],this.sdkHttpResponseInternal=s==null?void 0:s.sdkHttpResponse,this.idxInternal=0;let m={config:{}};!o||Object.keys(o).length===0?m={config:{}}:typeof o=="object"?m=Object.assign({},o):m=o,m.config&&(m.config.pageToken=s.nextPageToken),this.paramsInternal=m,this.pageInternalSize=(d=(u=m.config)===null||u===void 0?void 0:u.pageSize)!==null&&d!==void 0?d:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jv extends xl{constructor(t){super(),this.apiClient=t,this.create=async s=>(this.apiClient.isVertexAI()&&(s.config=this.formatDestination(s.src,s.config)),this.createInternal(s)),this.createEmbeddings=async s=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(s)},this.list=async(s={})=>new ms(yl.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(s),s)}createInlinedGenerateContentRequest(t){const s=cp(this.apiClient,t),o=s._url,u=re("{model}:batchGenerateContent",o),y=s.batch.inputConfig.requests,x=y.requests,g=[];for(const v of x){const b=Object.assign({},v);if(b.systemInstruction){const N=b.systemInstruction;delete b.systemInstruction;const C=b.request;C.systemInstruction=N,b.request=C}g.push(b)}return y.requests=g,delete s.config,delete s._url,delete s._query,{path:u,body:s}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,s){const o=s?Object.assign({},s):{},u=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${u}`),o.dest===void 0){const d=this.getGcsUri(t),m=this.getBigqueryUri(t);if(d)d.endsWith(".jsonl")?o.dest=`${d.slice(0,-6)}/dest`:o.dest=`${d}_dest_${u}`;else if(m)o.dest=`${m}_dest_${u}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=bv(this.apiClient,t);return y=re("batchPredictionJobs",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>Ru(v))}else{const g=cp(this.apiClient,t);return y=re("{model}:batchGenerateContent",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),m.then(v=>Po(v))}}async createEmbeddingsInternal(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=Nv(this.apiClient,t);return d=re("{model}:asyncBatchEmbedContent",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>Po(x))}}async get(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=jv(this.apiClient,t);return y=re("batchPredictionJobs/{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>Ru(v))}else{const g=Uv(this.apiClient,t);return y=re("batches/{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),m.then(v=>Po(v))}}async cancel(t){var s,o,u,d;let m="",y={};if(this.apiClient.isVertexAI()){const x=pv(this.apiClient,t);m=re("batchPredictionJobs/{name}:cancel",x._url),y=x._query,delete x._url,delete x._query,await this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const x=mv(this.apiClient,t);m=re("batches/{name}:cancel",x._url),y=x._query,delete x._url,delete x._query,await this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal})}}async listInternal(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=Pv(t);return y=re("batchPredictionJobs",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=Ov(v),N=new op;return Object.assign(N,b),N})}else{const g=Bv(t);return y=re("batches",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=zv(v),N=new op;return Object.assign(N,b),N})}}async delete(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=Cv(this.apiClient,t);return y=re("batchPredictionJobs/{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>Ev(v))}else{const g=Sv(this.apiClient,t);return y=re("batches/{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>Av(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qv(l){const t={};if(c(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(l,["data"]);s!=null&&h(t,["data"],s);const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function dp(l){const t={},s=c(l,["parts"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>gb(d))),h(t,["parts"],u)}const o=c(l,["role"]);return o!=null&&h(t,["role"],o),t}function Xv(l,t){const s={},o=c(l,["ttl"]);t!==void 0&&o!=null&&h(t,["ttl"],o);const u=c(l,["expireTime"]);t!==void 0&&u!=null&&h(t,["expireTime"],u);const d=c(l,["displayName"]);t!==void 0&&d!=null&&h(t,["displayName"],d);const m=c(l,["contents"]);if(t!==void 0&&m!=null){let v=Bt(m);Array.isArray(v)&&(v=v.map(b=>dp(b))),h(t,["contents"],v)}const y=c(l,["systemInstruction"]);t!==void 0&&y!=null&&h(t,["systemInstruction"],dp(rt(y)));const x=c(l,["tools"]);if(t!==void 0&&x!=null){let v=x;Array.isArray(v)&&(v=v.map(b=>yb(b))),h(t,["tools"],v)}const g=c(l,["toolConfig"]);if(t!==void 0&&g!=null&&h(t,["toolConfig"],g),c(l,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return s}function $v(l,t){const s={},o=c(l,["ttl"]);t!==void 0&&o!=null&&h(t,["ttl"],o);const u=c(l,["expireTime"]);t!==void 0&&u!=null&&h(t,["expireTime"],u);const d=c(l,["displayName"]);t!==void 0&&d!=null&&h(t,["displayName"],d);const m=c(l,["contents"]);if(t!==void 0&&m!=null){let b=Bt(m);Array.isArray(b)&&(b=b.map(N=>N)),h(t,["contents"],b)}const y=c(l,["systemInstruction"]);t!==void 0&&y!=null&&h(t,["systemInstruction"],rt(y));const x=c(l,["tools"]);if(t!==void 0&&x!=null){let b=x;Array.isArray(b)&&(b=b.map(N=>xb(N))),h(t,["tools"],b)}const g=c(l,["toolConfig"]);t!==void 0&&g!=null&&h(t,["toolConfig"],g);const v=c(l,["kmsKeyName"]);return t!==void 0&&v!=null&&h(t,["encryption_spec","kmsKeyName"],v),s}function Zv(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["model"],Pp(l,o));const u=c(t,["config"]);return u!=null&&Xv(u,s),s}function Wv(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["model"],Pp(l,o));const u=c(t,["config"]);return u!=null&&$v(u,s),s}function eb(l,t){const s={},o=c(t,["name"]);return o!=null&&h(s,["_url","name"],Nn(l,o)),s}function tb(l,t){const s={},o=c(t,["name"]);return o!=null&&h(s,["_url","name"],Nn(l,o)),s}function nb(l){const t={},s=c(l,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function lb(l){const t={},s=c(l,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function ib(l){const t={};if(c(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(l,["fileUri"]);s!=null&&h(t,["fileUri"],s);const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function sb(l){const t={};if(c(l,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=c(l,["description"]);s!=null&&h(t,["description"],s);const o=c(l,["name"]);o!=null&&h(t,["name"],o);const u=c(l,["parameters"]);u!=null&&h(t,["parameters"],u);const d=c(l,["parametersJsonSchema"]);d!=null&&h(t,["parametersJsonSchema"],d);const m=c(l,["response"]);m!=null&&h(t,["response"],m);const y=c(l,["responseJsonSchema"]);return y!=null&&h(t,["responseJsonSchema"],y),t}function ob(l,t){const s={},o=c(t,["name"]);return o!=null&&h(s,["_url","name"],Nn(l,o)),s}function ab(l,t){const s={},o=c(t,["name"]);return o!=null&&h(s,["_url","name"],Nn(l,o)),s}function rb(l){const t={};if(c(l,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(l,["enableWidget"]);return s!=null&&h(t,["enableWidget"],s),t}function ub(l){const t={},s=c(l,["timeRangeFilter"]);if(s!=null&&h(t,["timeRangeFilter"],s),c(l,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function cb(l,t){const s={},o=c(l,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const u=c(l,["pageToken"]);return t!==void 0&&u!=null&&h(t,["_query","pageToken"],u),s}function db(l,t){const s={},o=c(l,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const u=c(l,["pageToken"]);return t!==void 0&&u!=null&&h(t,["_query","pageToken"],u),s}function fb(l){const t={},s=c(l,["config"]);return s!=null&&cb(s,t),t}function hb(l){const t={},s=c(l,["config"]);return s!=null&&db(s,t),t}function mb(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const u=c(l,["cachedContents"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(m=>m)),h(t,["cachedContents"],d)}return t}function pb(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const u=c(l,["cachedContents"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(m=>m)),h(t,["cachedContents"],d)}return t}function gb(l){const t={},s=c(l,["videoMetadata"]);s!=null&&h(t,["videoMetadata"],s);const o=c(l,["thought"]);o!=null&&h(t,["thought"],o);const u=c(l,["inlineData"]);u!=null&&h(t,["inlineData"],Qv(u));const d=c(l,["fileData"]);d!=null&&h(t,["fileData"],ib(d));const m=c(l,["thoughtSignature"]);m!=null&&h(t,["thoughtSignature"],m);const y=c(l,["functionCall"]);y!=null&&h(t,["functionCall"],y);const x=c(l,["codeExecutionResult"]);x!=null&&h(t,["codeExecutionResult"],x);const g=c(l,["executableCode"]);g!=null&&h(t,["executableCode"],g);const v=c(l,["functionResponse"]);v!=null&&h(t,["functionResponse"],v);const b=c(l,["text"]);return b!=null&&h(t,["text"],b),t}function yb(l){const t={},s=c(l,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),h(t,["functionDeclarations"],g)}if(c(l,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(l,["googleSearch"]);o!=null&&h(t,["googleSearch"],ub(o));const u=c(l,["googleSearchRetrieval"]);if(u!=null&&h(t,["googleSearchRetrieval"],u),c(l,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(l,["googleMaps"]);d!=null&&h(t,["googleMaps"],rb(d));const m=c(l,["urlContext"]);m!=null&&h(t,["urlContext"],m);const y=c(l,["computerUse"]);y!=null&&h(t,["computerUse"],y);const x=c(l,["codeExecution"]);return x!=null&&h(t,["codeExecution"],x),t}function xb(l){const t={},s=c(l,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(N=>sb(N))),h(t,["functionDeclarations"],b)}const o=c(l,["retrieval"]);o!=null&&h(t,["retrieval"],o);const u=c(l,["googleSearch"]);u!=null&&h(t,["googleSearch"],u);const d=c(l,["googleSearchRetrieval"]);d!=null&&h(t,["googleSearchRetrieval"],d);const m=c(l,["enterpriseWebSearch"]);m!=null&&h(t,["enterpriseWebSearch"],m);const y=c(l,["googleMaps"]);y!=null&&h(t,["googleMaps"],y);const x=c(l,["urlContext"]);x!=null&&h(t,["urlContext"],x);const g=c(l,["computerUse"]);g!=null&&h(t,["computerUse"],g);const v=c(l,["codeExecution"]);return v!=null&&h(t,["codeExecution"],v),t}function vb(l,t){const s={},o=c(l,["ttl"]);t!==void 0&&o!=null&&h(t,["ttl"],o);const u=c(l,["expireTime"]);return t!==void 0&&u!=null&&h(t,["expireTime"],u),s}function bb(l,t){const s={},o=c(l,["ttl"]);t!==void 0&&o!=null&&h(t,["ttl"],o);const u=c(l,["expireTime"]);return t!==void 0&&u!=null&&h(t,["expireTime"],u),s}function Tb(l,t){const s={},o=c(t,["name"]);o!=null&&h(s,["_url","name"],Nn(l,o));const u=c(t,["config"]);return u!=null&&vb(u,s),s}function Nb(l,t){const s={},o=c(t,["name"]);o!=null&&h(s,["_url","name"],Nn(l,o));const u=c(t,["config"]);return u!=null&&bb(u,s),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sb extends xl{constructor(t){super(),this.apiClient=t,this.list=async(s={})=>new ms(yl.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(s),s)}async create(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=Wv(this.apiClient,t);return y=re("cachedContents",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>v)}else{const g=Zv(this.apiClient,t);return y=re("cachedContents",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),m.then(v=>v)}}async get(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=ab(this.apiClient,t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>v)}else{const g=ob(this.apiClient,t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),m.then(v=>v)}}async delete(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=tb(this.apiClient,t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=lb(v),N=new ip;return Object.assign(N,b),N})}else{const g=eb(this.apiClient,t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=nb(v),N=new ip;return Object.assign(N,b),N})}}async update(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=Nb(this.apiClient,t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>v)}else{const g=Tb(this.apiClient,t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),m.then(v=>v)}}async listInternal(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=hb(t);return y=re("cachedContents",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=pb(v),N=new sp;return Object.assign(N,b),N})}else{const g=fb(t);return y=re("cachedContents",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=mb(v),N=new sp;return Object.assign(N,b),N})}}}function fp(l){var t=typeof Symbol=="function"&&Symbol.iterator,s=t&&l[t],o=0;if(s)return s.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&o>=l.length&&(l=void 0),{value:l&&l[o++],done:!l}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(l){return this instanceof Be?(this.v=l,this):new Be(l)}function oi(l,t,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=s.apply(l,t||[]),u,d=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),y("next"),y("throw"),y("return",m),u[Symbol.asyncIterator]=function(){return this},u;function m(C){return function(_){return Promise.resolve(_).then(C,b)}}function y(C,_){o[C]&&(u[C]=function(E){return new Promise(function(j,A){d.push([C,E,j,A])>1||x(C,E)})},_&&(u[C]=_(u[C])))}function x(C,_){try{g(o[C](_))}catch(E){N(d[0][3],E)}}function g(C){C.value instanceof Be?Promise.resolve(C.value.v).then(v,b):N(d[0][2],C)}function v(C){x("next",C)}function b(C){x("throw",C)}function N(C,_){C(_),d.shift(),d.length&&x(d[0][0],d[0][1])}}function fs(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=l[Symbol.asyncIterator],s;return t?t.call(l):(l=typeof fp=="function"?fp(l):l[Symbol.iterator](),s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s);function o(d){s[d]=l[d]&&function(m){return new Promise(function(y,x){m=l[d](m),u(y,x,m.done,m.value)})}}function u(d,m,y,x){Promise.resolve(x).then(function(g){d({value:g,done:y})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cb(l){var t;if(l.candidates==null||l.candidates.length===0)return!1;const s=(t=l.candidates[0])===null||t===void 0?void 0:t.content;return s===void 0?!1:tg(s)}function tg(l){if(l.parts===void 0||l.parts.length===0)return!1;for(const t of l.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function Ab(l){if(l.length!==0){for(const t of l)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function hp(l){if(l===void 0||l.length===0)return[];const t=[],s=l.length;let o=0;for(;o<s;)if(l[o].role==="user")t.push(l[o]),o++;else{const u=[];let d=!0;for(;o<s&&l[o].role==="model";)u.push(l[o]),d&&!tg(l[o])&&(d=!1),o++;d?t.push(...u):t.pop()}return t}class Eb{constructor(t,s){this.modelsModule=t,this.apiClient=s}create(t){return new _b(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class _b{constructor(t,s,o,u={},d=[]){this.apiClient=t,this.modelsModule=s,this.model=o,this.config=u,this.history=d,this.sendPromise=Promise.resolve(),Ab(d)}async sendMessage(t){var s;await this.sendPromise;const o=rt(t.message),u=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(s=t.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var d,m,y;const x=await u,g=(m=(d=x.candidates)===null||d===void 0?void 0:d[0])===null||m===void 0?void 0:m.content,v=x.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let N=[];v!=null&&(N=(y=v.slice(b))!==null&&y!==void 0?y:[]);const C=g?[g]:[];this.recordHistory(o,C,N)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),u}async sendMessageStream(t){var s;await this.sendPromise;const o=rt(t.message),u=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(s=t.config)!==null&&s!==void 0?s:this.config});this.sendPromise=u.then(()=>{}).catch(()=>{});const d=await u;return this.processStreamResponse(d,o)}getHistory(t=!1){const s=t?hp(this.history):this.history;return structuredClone(s)}processStreamResponse(t,s){var o,u;return oi(this,arguments,function*(){var m,y,x,g;const v=[];try{for(var b=!0,N=fs(t),C;C=yield Be(N.next()),m=C.done,!m;b=!0){g=C.value,b=!1;const _=g;if(Cb(_)){const E=(u=(o=_.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content;E!==void 0&&v.push(E)}yield yield Be(_)}}catch(_){y={error:_}}finally{try{!b&&!m&&(x=N.return)&&(yield Be(x.call(N)))}finally{if(y)throw y.error}}this.recordHistory(s,v)})}recordHistory(t,s,o){let u=[];s.length>0&&s.every(d=>d.role!==void 0)?u=s:u.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...hp(o)):this.history.push(t),this.history.push(...u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qo extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Qo.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mb(l){const t={},s=c(l,["file"]);return s!=null&&h(t,["file"],s),t}function wb(l){const t={},s=c(l,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function Db(l){const t={},s=c(l,["name"]);return s!=null&&h(t,["_url","file"],Jp(s)),t}function Rb(l){const t={},s=c(l,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function Ib(l){const t={},s=c(l,["name"]);return s!=null&&h(t,["_url","file"],Jp(s)),t}function Ub(l,t){const s={},o=c(l,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const u=c(l,["pageToken"]);return t!==void 0&&u!=null&&h(t,["_query","pageToken"],u),s}function jb(l){const t={},s=c(l,["config"]);return s!=null&&Ub(s,t),t}function Lb(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const u=c(l,["files"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(m=>m)),h(t,["files"],d)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hb extends xl{constructor(t){super(),this.apiClient=t,this.list=async(s={})=>new ms(yl.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(s),s)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(s=>s)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=jb(t);return d=re("files",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:x.headers},v})),u.then(x=>{const g=Lb(x),v=new Fx;return Object.assign(v,g),v})}}async createInternal(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=Mb(t);return d=re("upload/v1beta/files",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>{const g=wb(x),v=new Jx;return Object.assign(v,g),v})}}async get(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=Ib(t);return d=re("files/{file}",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>x)}}async delete(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=Db(t);return d=re("files/{file}",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:x.headers},v})),u.then(x=>{const g=Rb(x),v=new Qx;return Object.assign(v,g),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zo(l){const t={};if(c(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(l,["data"]);s!=null&&h(t,["data"],s);const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function kb(l){const t={},s=c(l,["parts"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Zb(d))),h(t,["parts"],u)}const o=c(l,["role"]);return o!=null&&h(t,["role"],o),t}function Gb(l){const t={};if(c(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(l,["fileUri"]);s!=null&&h(t,["fileUri"],s);const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function qb(l){const t={};if(c(l,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=c(l,["description"]);s!=null&&h(t,["description"],s);const o=c(l,["name"]);o!=null&&h(t,["name"],o);const u=c(l,["parameters"]);u!=null&&h(t,["parameters"],u);const d=c(l,["parametersJsonSchema"]);d!=null&&h(t,["parametersJsonSchema"],d);const m=c(l,["response"]);m!=null&&h(t,["response"],m);const y=c(l,["responseJsonSchema"]);return y!=null&&h(t,["responseJsonSchema"],y),t}function Vb(l){const t={},s=c(l,["modelSelectionConfig"]);s!=null&&h(t,["modelConfig"],s);const o=c(l,["audioTimestamp"]);o!=null&&h(t,["audioTimestamp"],o);const u=c(l,["candidateCount"]);u!=null&&h(t,["candidateCount"],u);const d=c(l,["enableAffectiveDialog"]);d!=null&&h(t,["enableAffectiveDialog"],d);const m=c(l,["frequencyPenalty"]);m!=null&&h(t,["frequencyPenalty"],m);const y=c(l,["logprobs"]);y!=null&&h(t,["logprobs"],y);const x=c(l,["maxOutputTokens"]);x!=null&&h(t,["maxOutputTokens"],x);const g=c(l,["mediaResolution"]);g!=null&&h(t,["mediaResolution"],g);const v=c(l,["presencePenalty"]);v!=null&&h(t,["presencePenalty"],v);const b=c(l,["responseJsonSchema"]);b!=null&&h(t,["responseJsonSchema"],b);const N=c(l,["responseLogprobs"]);N!=null&&h(t,["responseLogprobs"],N);const C=c(l,["responseMimeType"]);C!=null&&h(t,["responseMimeType"],C);const _=c(l,["responseModalities"]);_!=null&&h(t,["responseModalities"],_);const E=c(l,["responseSchema"]);E!=null&&h(t,["responseSchema"],E);const j=c(l,["routingConfig"]);j!=null&&h(t,["routingConfig"],j);const A=c(l,["seed"]);A!=null&&h(t,["seed"],A);const H=c(l,["speechConfig"]);H!=null&&h(t,["speechConfig"],ng(H));const q=c(l,["stopSequences"]);q!=null&&h(t,["stopSequences"],q);const G=c(l,["temperature"]);G!=null&&h(t,["temperature"],G);const P=c(l,["thinkingConfig"]);P!=null&&h(t,["thinkingConfig"],P);const V=c(l,["topK"]);V!=null&&h(t,["topK"],V);const k=c(l,["topP"]);if(k!=null&&h(t,["topP"],k),c(l,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Bb(l){const t={};if(c(l,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(l,["enableWidget"]);return s!=null&&h(t,["enableWidget"],s),t}function Pb(l){const t={},s=c(l,["timeRangeFilter"]);if(s!=null&&h(t,["timeRangeFilter"],s),c(l,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function zb(l,t){const s={},o=c(l,["generationConfig"]);t!==void 0&&o!=null&&h(t,["setup","generationConfig"],o);const u=c(l,["responseModalities"]);t!==void 0&&u!=null&&h(t,["setup","generationConfig","responseModalities"],u);const d=c(l,["temperature"]);t!==void 0&&d!=null&&h(t,["setup","generationConfig","temperature"],d);const m=c(l,["topP"]);t!==void 0&&m!=null&&h(t,["setup","generationConfig","topP"],m);const y=c(l,["topK"]);t!==void 0&&y!=null&&h(t,["setup","generationConfig","topK"],y);const x=c(l,["maxOutputTokens"]);t!==void 0&&x!=null&&h(t,["setup","generationConfig","maxOutputTokens"],x);const g=c(l,["mediaResolution"]);t!==void 0&&g!=null&&h(t,["setup","generationConfig","mediaResolution"],g);const v=c(l,["seed"]);t!==void 0&&v!=null&&h(t,["setup","generationConfig","seed"],v);const b=c(l,["speechConfig"]);t!==void 0&&b!=null&&h(t,["setup","generationConfig","speechConfig"],Yu(b));const N=c(l,["thinkingConfig"]);t!==void 0&&N!=null&&h(t,["setup","generationConfig","thinkingConfig"],N);const C=c(l,["enableAffectiveDialog"]);t!==void 0&&C!=null&&h(t,["setup","generationConfig","enableAffectiveDialog"],C);const _=c(l,["systemInstruction"]);t!==void 0&&_!=null&&h(t,["setup","systemInstruction"],kb(rt(_)));const E=c(l,["tools"]);if(t!==void 0&&E!=null){let V=ci(E);Array.isArray(V)&&(V=V.map(k=>eT(ui(k)))),h(t,["setup","tools"],V)}const j=c(l,["sessionResumption"]);t!==void 0&&j!=null&&h(t,["setup","sessionResumption"],Wb(j));const A=c(l,["inputAudioTranscription"]);t!==void 0&&A!=null&&h(t,["setup","inputAudioTranscription"],A);const H=c(l,["outputAudioTranscription"]);t!==void 0&&H!=null&&h(t,["setup","outputAudioTranscription"],H);const q=c(l,["realtimeInputConfig"]);t!==void 0&&q!=null&&h(t,["setup","realtimeInputConfig"],q);const G=c(l,["contextWindowCompression"]);t!==void 0&&G!=null&&h(t,["setup","contextWindowCompression"],G);const P=c(l,["proactivity"]);return t!==void 0&&P!=null&&h(t,["setup","proactivity"],P),s}function Ob(l,t){const s={},o=c(l,["generationConfig"]);t!==void 0&&o!=null&&h(t,["setup","generationConfig"],Vb(o));const u=c(l,["responseModalities"]);t!==void 0&&u!=null&&h(t,["setup","generationConfig","responseModalities"],u);const d=c(l,["temperature"]);t!==void 0&&d!=null&&h(t,["setup","generationConfig","temperature"],d);const m=c(l,["topP"]);t!==void 0&&m!=null&&h(t,["setup","generationConfig","topP"],m);const y=c(l,["topK"]);t!==void 0&&y!=null&&h(t,["setup","generationConfig","topK"],y);const x=c(l,["maxOutputTokens"]);t!==void 0&&x!=null&&h(t,["setup","generationConfig","maxOutputTokens"],x);const g=c(l,["mediaResolution"]);t!==void 0&&g!=null&&h(t,["setup","generationConfig","mediaResolution"],g);const v=c(l,["seed"]);t!==void 0&&v!=null&&h(t,["setup","generationConfig","seed"],v);const b=c(l,["speechConfig"]);t!==void 0&&b!=null&&h(t,["setup","generationConfig","speechConfig"],ng(Yu(b)));const N=c(l,["thinkingConfig"]);t!==void 0&&N!=null&&h(t,["setup","generationConfig","thinkingConfig"],N);const C=c(l,["enableAffectiveDialog"]);t!==void 0&&C!=null&&h(t,["setup","generationConfig","enableAffectiveDialog"],C);const _=c(l,["systemInstruction"]);t!==void 0&&_!=null&&h(t,["setup","systemInstruction"],rt(_));const E=c(l,["tools"]);if(t!==void 0&&E!=null){let V=ci(E);Array.isArray(V)&&(V=V.map(k=>tT(ui(k)))),h(t,["setup","tools"],V)}const j=c(l,["sessionResumption"]);t!==void 0&&j!=null&&h(t,["setup","sessionResumption"],j);const A=c(l,["inputAudioTranscription"]);t!==void 0&&A!=null&&h(t,["setup","inputAudioTranscription"],A);const H=c(l,["outputAudioTranscription"]);t!==void 0&&H!=null&&h(t,["setup","outputAudioTranscription"],H);const q=c(l,["realtimeInputConfig"]);t!==void 0&&q!=null&&h(t,["setup","realtimeInputConfig"],q);const G=c(l,["contextWindowCompression"]);t!==void 0&&G!=null&&h(t,["setup","contextWindowCompression"],G);const P=c(l,["proactivity"]);return t!==void 0&&P!=null&&h(t,["setup","proactivity"],P),s}function Yb(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["setup","model"],Me(l,o));const u=c(t,["config"]);return u!=null&&h(s,["config"],zb(u,s)),s}function Kb(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["setup","model"],Me(l,o));const u=c(t,["config"]);return u!=null&&h(s,["config"],Ob(u,s)),s}function Fb(l){const t={},s=c(l,["musicGenerationConfig"]);return s!=null&&h(t,["musicGenerationConfig"],s),t}function Jb(l){const t={},s=c(l,["weightedPrompts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),h(t,["weightedPrompts"],o)}return t}function Qb(l){const t={},s=c(l,["media"]);if(s!=null){let g=zp(s);Array.isArray(g)&&(g=g.map(v=>zo(v))),h(t,["mediaChunks"],g)}const o=c(l,["audio"]);o!=null&&h(t,["audio"],zo(Yp(o)));const u=c(l,["audioStreamEnd"]);u!=null&&h(t,["audioStreamEnd"],u);const d=c(l,["video"]);d!=null&&h(t,["video"],zo(Op(d)));const m=c(l,["text"]);m!=null&&h(t,["text"],m);const y=c(l,["activityStart"]);y!=null&&h(t,["activityStart"],y);const x=c(l,["activityEnd"]);return x!=null&&h(t,["activityEnd"],x),t}function Xb(l){const t={},s=c(l,["media"]);if(s!=null){let g=zp(s);Array.isArray(g)&&(g=g.map(v=>v)),h(t,["mediaChunks"],g)}const o=c(l,["audio"]);o!=null&&h(t,["audio"],Yp(o));const u=c(l,["audioStreamEnd"]);u!=null&&h(t,["audioStreamEnd"],u);const d=c(l,["video"]);d!=null&&h(t,["video"],Op(d));const m=c(l,["text"]);m!=null&&h(t,["text"],m);const y=c(l,["activityStart"]);y!=null&&h(t,["activityStart"],y);const x=c(l,["activityEnd"]);return x!=null&&h(t,["activityEnd"],x),t}function $b(l){const t={},s=c(l,["setupComplete"]);s!=null&&h(t,["setupComplete"],s);const o=c(l,["serverContent"]);o!=null&&h(t,["serverContent"],o);const u=c(l,["toolCall"]);u!=null&&h(t,["toolCall"],u);const d=c(l,["toolCallCancellation"]);d!=null&&h(t,["toolCallCancellation"],d);const m=c(l,["usageMetadata"]);m!=null&&h(t,["usageMetadata"],nT(m));const y=c(l,["goAway"]);y!=null&&h(t,["goAway"],y);const x=c(l,["sessionResumptionUpdate"]);return x!=null&&h(t,["sessionResumptionUpdate"],x),t}function Zb(l){const t={},s=c(l,["videoMetadata"]);s!=null&&h(t,["videoMetadata"],s);const o=c(l,["thought"]);o!=null&&h(t,["thought"],o);const u=c(l,["inlineData"]);u!=null&&h(t,["inlineData"],zo(u));const d=c(l,["fileData"]);d!=null&&h(t,["fileData"],Gb(d));const m=c(l,["thoughtSignature"]);m!=null&&h(t,["thoughtSignature"],m);const y=c(l,["functionCall"]);y!=null&&h(t,["functionCall"],y);const x=c(l,["codeExecutionResult"]);x!=null&&h(t,["codeExecutionResult"],x);const g=c(l,["executableCode"]);g!=null&&h(t,["executableCode"],g);const v=c(l,["functionResponse"]);v!=null&&h(t,["functionResponse"],v);const b=c(l,["text"]);return b!=null&&h(t,["text"],b),t}function Wb(l){const t={},s=c(l,["handle"]);if(s!=null&&h(t,["handle"],s),c(l,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function ng(l){const t={},s=c(l,["voiceConfig"]);if(s!=null&&h(t,["voiceConfig"],s),c(l,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=c(l,["languageCode"]);return o!=null&&h(t,["languageCode"],o),t}function eT(l){const t={},s=c(l,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),h(t,["functionDeclarations"],g)}if(c(l,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(l,["googleSearch"]);o!=null&&h(t,["googleSearch"],Pb(o));const u=c(l,["googleSearchRetrieval"]);if(u!=null&&h(t,["googleSearchRetrieval"],u),c(l,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(l,["googleMaps"]);d!=null&&h(t,["googleMaps"],Bb(d));const m=c(l,["urlContext"]);m!=null&&h(t,["urlContext"],m);const y=c(l,["computerUse"]);y!=null&&h(t,["computerUse"],y);const x=c(l,["codeExecution"]);return x!=null&&h(t,["codeExecution"],x),t}function tT(l){const t={},s=c(l,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(N=>qb(N))),h(t,["functionDeclarations"],b)}const o=c(l,["retrieval"]);o!=null&&h(t,["retrieval"],o);const u=c(l,["googleSearch"]);u!=null&&h(t,["googleSearch"],u);const d=c(l,["googleSearchRetrieval"]);d!=null&&h(t,["googleSearchRetrieval"],d);const m=c(l,["enterpriseWebSearch"]);m!=null&&h(t,["enterpriseWebSearch"],m);const y=c(l,["googleMaps"]);y!=null&&h(t,["googleMaps"],y);const x=c(l,["urlContext"]);x!=null&&h(t,["urlContext"],x);const g=c(l,["computerUse"]);g!=null&&h(t,["computerUse"],g);const v=c(l,["codeExecution"]);return v!=null&&h(t,["codeExecution"],v),t}function nT(l){const t={},s=c(l,["promptTokenCount"]);s!=null&&h(t,["promptTokenCount"],s);const o=c(l,["cachedContentTokenCount"]);o!=null&&h(t,["cachedContentTokenCount"],o);const u=c(l,["candidatesTokenCount"]);u!=null&&h(t,["responseTokenCount"],u);const d=c(l,["toolUsePromptTokenCount"]);d!=null&&h(t,["toolUsePromptTokenCount"],d);const m=c(l,["thoughtsTokenCount"]);m!=null&&h(t,["thoughtsTokenCount"],m);const y=c(l,["totalTokenCount"]);y!=null&&h(t,["totalTokenCount"],y);const x=c(l,["promptTokensDetails"]);if(x!=null){let C=x;Array.isArray(C)&&(C=C.map(_=>_)),h(t,["promptTokensDetails"],C)}const g=c(l,["cacheTokensDetails"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(_=>_)),h(t,["cacheTokensDetails"],C)}const v=c(l,["candidatesTokensDetails"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(_=>_)),h(t,["responseTokensDetails"],C)}const b=c(l,["toolUsePromptTokensDetails"]);if(b!=null){let C=b;Array.isArray(C)&&(C=C.map(_=>_)),h(t,["toolUsePromptTokensDetails"],C)}const N=c(l,["trafficType"]);return N!=null&&h(t,["trafficType"],N),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lT(l){const t={};if(c(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(l,["data"]);s!=null&&h(t,["data"],s);const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function iT(l){const t={},s=c(l,["content"]);s!=null&&h(t,["content"],s);const o=c(l,["citationMetadata"]);o!=null&&h(t,["citationMetadata"],sT(o));const u=c(l,["tokenCount"]);u!=null&&h(t,["tokenCount"],u);const d=c(l,["finishReason"]);d!=null&&h(t,["finishReason"],d);const m=c(l,["urlContextMetadata"]);m!=null&&h(t,["urlContextMetadata"],m);const y=c(l,["avgLogprobs"]);y!=null&&h(t,["avgLogprobs"],y);const x=c(l,["groundingMetadata"]);x!=null&&h(t,["groundingMetadata"],x);const g=c(l,["index"]);g!=null&&h(t,["index"],g);const v=c(l,["logprobsResult"]);v!=null&&h(t,["logprobsResult"],v);const b=c(l,["safetyRatings"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(C=>C)),h(t,["safetyRatings"],N)}return t}function sT(l){const t={},s=c(l,["citationSources"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),h(t,["citations"],o)}return t}function oT(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["contents"]);if(u!=null){let d=Bt(u);Array.isArray(d)&&(d=d.map(m=>m)),h(s,["contents"],d)}return s}function aT(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["tokensInfo"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),h(t,["tokensInfo"],u)}return t}function rT(l){const t={},s=c(l,["values"]);s!=null&&h(t,["values"],s);const o=c(l,["statistics"]);return o!=null&&h(t,["statistics"],uT(o)),t}function uT(l){const t={},s=c(l,["truncated"]);s!=null&&h(t,["truncated"],s);const o=c(l,["token_count"]);return o!=null&&h(t,["tokenCount"],o),t}function Xo(l){const t={},s=c(l,["parts"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>mN(d))),h(t,["parts"],u)}const o=c(l,["role"]);return o!=null&&h(t,["role"],o),t}function cT(l){const t={},s=c(l,["controlType"]);s!=null&&h(t,["controlType"],s);const o=c(l,["enableControlImageComputation"]);return o!=null&&h(t,["computeControl"],o),t}function dT(l){const t={};if(c(l,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(l,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(l,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function fT(l,t){const s={},o=c(l,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],rt(o));const u=c(l,["tools"]);if(t!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(y=>ag(y))),h(t,["tools"],m)}const d=c(l,["generationConfig"]);return t!==void 0&&d!=null&&h(t,["generationConfig"],tN(d)),s}function hT(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["contents"]);if(u!=null){let m=Bt(u);Array.isArray(m)&&(m=m.map(y=>Xo(y))),h(s,["contents"],m)}const d=c(t,["config"]);return d!=null&&dT(d),s}function mT(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["contents"]);if(u!=null){let m=Bt(u);Array.isArray(m)&&(m=m.map(y=>y)),h(s,["contents"],m)}const d=c(t,["config"]);return d!=null&&fT(d,s),s}function pT(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["totalTokens"]);o!=null&&h(t,["totalTokens"],o);const u=c(l,["cachedContentTokenCount"]);return u!=null&&h(t,["cachedContentTokenCount"],u),t}function gT(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["totalTokens"]);return o!=null&&h(t,["totalTokens"],o),t}function yT(l,t){const s={},o=c(t,["model"]);return o!=null&&h(s,["_url","name"],Me(l,o)),s}function xT(l,t){const s={},o=c(t,["model"]);return o!=null&&h(s,["_url","name"],Me(l,o)),s}function vT(l){const t={},s=c(l,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function bT(l){const t={},s=c(l,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function TT(l,t){const s={},o=c(l,["outputGcsUri"]);t!==void 0&&o!=null&&h(t,["parameters","storageUri"],o);const u=c(l,["negativePrompt"]);t!==void 0&&u!=null&&h(t,["parameters","negativePrompt"],u);const d=c(l,["numberOfImages"]);t!==void 0&&d!=null&&h(t,["parameters","sampleCount"],d);const m=c(l,["aspectRatio"]);t!==void 0&&m!=null&&h(t,["parameters","aspectRatio"],m);const y=c(l,["guidanceScale"]);t!==void 0&&y!=null&&h(t,["parameters","guidanceScale"],y);const x=c(l,["seed"]);t!==void 0&&x!=null&&h(t,["parameters","seed"],x);const g=c(l,["safetyFilterLevel"]);t!==void 0&&g!=null&&h(t,["parameters","safetySetting"],g);const v=c(l,["personGeneration"]);t!==void 0&&v!=null&&h(t,["parameters","personGeneration"],v);const b=c(l,["includeSafetyAttributes"]);t!==void 0&&b!=null&&h(t,["parameters","includeSafetyAttributes"],b);const N=c(l,["includeRaiReason"]);t!==void 0&&N!=null&&h(t,["parameters","includeRaiReason"],N);const C=c(l,["language"]);t!==void 0&&C!=null&&h(t,["parameters","language"],C);const _=c(l,["outputMimeType"]);t!==void 0&&_!=null&&h(t,["parameters","outputOptions","mimeType"],_);const E=c(l,["outputCompressionQuality"]);t!==void 0&&E!=null&&h(t,["parameters","outputOptions","compressionQuality"],E);const j=c(l,["addWatermark"]);t!==void 0&&j!=null&&h(t,["parameters","addWatermark"],j);const A=c(l,["labels"]);t!==void 0&&A!=null&&h(t,["labels"],A);const H=c(l,["editMode"]);t!==void 0&&H!=null&&h(t,["parameters","editMode"],H);const q=c(l,["baseSteps"]);return t!==void 0&&q!=null&&h(t,["parameters","editConfig","baseSteps"],q),s}function NT(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["prompt"]);u!=null&&h(s,["instances[0]","prompt"],u);const d=c(t,["referenceImages"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(x=>bN(x))),h(s,["instances[0]","referenceImages"],y)}const m=c(t,["config"]);return m!=null&&TT(m,s),s}function ST(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["predictions"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>$o(d))),h(t,["generatedImages"],u)}return t}function CT(l,t){const s={},o=c(l,["taskType"]);t!==void 0&&o!=null&&h(t,["requests[]","taskType"],o);const u=c(l,["title"]);t!==void 0&&u!=null&&h(t,["requests[]","title"],u);const d=c(l,["outputDimensionality"]);if(t!==void 0&&d!=null&&h(t,["requests[]","outputDimensionality"],d),c(l,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(l,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function AT(l,t){const s={},o=c(l,["taskType"]);t!==void 0&&o!=null&&h(t,["instances[]","task_type"],o);const u=c(l,["title"]);t!==void 0&&u!=null&&h(t,["instances[]","title"],u);const d=c(l,["outputDimensionality"]);t!==void 0&&d!=null&&h(t,["parameters","outputDimensionality"],d);const m=c(l,["mimeType"]);t!==void 0&&m!=null&&h(t,["instances[]","mimeType"],m);const y=c(l,["autoTruncate"]);return t!==void 0&&y!=null&&h(t,["parameters","autoTruncate"],y),s}function ET(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["contents"]);if(u!=null){let y=Pu(l,u);Array.isArray(y)&&(y=y.map(x=>x)),h(s,["requests[]","content"],y)}const d=c(t,["config"]);d!=null&&CT(d,s);const m=c(t,["model"]);return m!==void 0&&h(s,["requests[]","model"],Me(l,m)),s}function _T(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["contents"]);if(u!=null){let m=Pu(l,u);Array.isArray(m)&&(m=m.map(y=>y)),h(s,["instances[]","content"],m)}const d=c(t,["config"]);return d!=null&&AT(d,s),s}function MT(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["embeddings"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(m=>m)),h(t,["embeddings"],d)}const u=c(l,["metadata"]);return u!=null&&h(t,["metadata"],u),t}function wT(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["predictions[]","embeddings"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(m=>rT(m))),h(t,["embeddings"],d)}const u=c(l,["metadata"]);return u!=null&&h(t,["metadata"],u),t}function DT(l){const t={},s=c(l,["endpoint"]);s!=null&&h(t,["name"],s);const o=c(l,["deployedModelId"]);return o!=null&&h(t,["deployedModelId"],o),t}function RT(l){const t={};if(c(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(l,["fileUri"]);s!=null&&h(t,["fileUri"],s);const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function IT(l){const t={};if(c(l,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=c(l,["description"]);s!=null&&h(t,["description"],s);const o=c(l,["name"]);o!=null&&h(t,["name"],o);const u=c(l,["parameters"]);u!=null&&h(t,["parameters"],u);const d=c(l,["parametersJsonSchema"]);d!=null&&h(t,["parametersJsonSchema"],d);const m=c(l,["response"]);m!=null&&h(t,["response"],m);const y=c(l,["responseJsonSchema"]);return y!=null&&h(t,["responseJsonSchema"],y),t}function UT(l,t,s){const o={},u=c(t,["systemInstruction"]);s!==void 0&&u!=null&&h(s,["systemInstruction"],Xo(rt(u)));const d=c(t,["temperature"]);d!=null&&h(o,["temperature"],d);const m=c(t,["topP"]);m!=null&&h(o,["topP"],m);const y=c(t,["topK"]);y!=null&&h(o,["topK"],y);const x=c(t,["candidateCount"]);x!=null&&h(o,["candidateCount"],x);const g=c(t,["maxOutputTokens"]);g!=null&&h(o,["maxOutputTokens"],g);const v=c(t,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const b=c(t,["responseLogprobs"]);b!=null&&h(o,["responseLogprobs"],b);const N=c(t,["logprobs"]);N!=null&&h(o,["logprobs"],N);const C=c(t,["presencePenalty"]);C!=null&&h(o,["presencePenalty"],C);const _=c(t,["frequencyPenalty"]);_!=null&&h(o,["frequencyPenalty"],_);const E=c(t,["seed"]);E!=null&&h(o,["seed"],E);const j=c(t,["responseMimeType"]);j!=null&&h(o,["responseMimeType"],j);const A=c(t,["responseSchema"]);A!=null&&h(o,["responseSchema"],zu(A));const H=c(t,["responseJsonSchema"]);if(H!=null&&h(o,["responseJsonSchema"],H),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=c(t,["safetySettings"]);if(s!==void 0&&q!=null){let D=q;Array.isArray(D)&&(D=D.map(F=>TN(F))),h(s,["safetySettings"],D)}const G=c(t,["tools"]);if(s!==void 0&&G!=null){let D=ci(G);Array.isArray(D)&&(D=D.map(F=>_N(ui(F)))),h(s,["tools"],D)}const P=c(t,["toolConfig"]);if(s!==void 0&&P!=null&&h(s,["toolConfig"],P),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=c(t,["cachedContent"]);s!==void 0&&V!=null&&h(s,["cachedContent"],Nn(l,V));const k=c(t,["responseModalities"]);k!=null&&h(o,["responseModalities"],k);const X=c(t,["mediaResolution"]);X!=null&&h(o,["mediaResolution"],X);const Z=c(t,["speechConfig"]);if(Z!=null&&h(o,["speechConfig"],Ou(Z)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const se=c(t,["thinkingConfig"]);se!=null&&h(o,["thinkingConfig"],se);const I=c(t,["imageConfig"]);return I!=null&&h(o,["imageConfig"],I),o}function jT(l,t,s){const o={},u=c(t,["systemInstruction"]);s!==void 0&&u!=null&&h(s,["systemInstruction"],rt(u));const d=c(t,["temperature"]);d!=null&&h(o,["temperature"],d);const m=c(t,["topP"]);m!=null&&h(o,["topP"],m);const y=c(t,["topK"]);y!=null&&h(o,["topK"],y);const x=c(t,["candidateCount"]);x!=null&&h(o,["candidateCount"],x);const g=c(t,["maxOutputTokens"]);g!=null&&h(o,["maxOutputTokens"],g);const v=c(t,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const b=c(t,["responseLogprobs"]);b!=null&&h(o,["responseLogprobs"],b);const N=c(t,["logprobs"]);N!=null&&h(o,["logprobs"],N);const C=c(t,["presencePenalty"]);C!=null&&h(o,["presencePenalty"],C);const _=c(t,["frequencyPenalty"]);_!=null&&h(o,["frequencyPenalty"],_);const E=c(t,["seed"]);E!=null&&h(o,["seed"],E);const j=c(t,["responseMimeType"]);j!=null&&h(o,["responseMimeType"],j);const A=c(t,["responseSchema"]);A!=null&&h(o,["responseSchema"],zu(A));const H=c(t,["responseJsonSchema"]);H!=null&&h(o,["responseJsonSchema"],H);const q=c(t,["routingConfig"]);q!=null&&h(o,["routingConfig"],q);const G=c(t,["modelSelectionConfig"]);G!=null&&h(o,["modelConfig"],G);const P=c(t,["safetySettings"]);if(s!==void 0&&P!=null){let O=P;Array.isArray(O)&&(O=O.map(ee=>ee)),h(s,["safetySettings"],O)}const V=c(t,["tools"]);if(s!==void 0&&V!=null){let O=ci(V);Array.isArray(O)&&(O=O.map(ee=>ag(ui(ee)))),h(s,["tools"],O)}const k=c(t,["toolConfig"]);s!==void 0&&k!=null&&h(s,["toolConfig"],k);const X=c(t,["labels"]);s!==void 0&&X!=null&&h(s,["labels"],X);const Z=c(t,["cachedContent"]);s!==void 0&&Z!=null&&h(s,["cachedContent"],Nn(l,Z));const se=c(t,["responseModalities"]);se!=null&&h(o,["responseModalities"],se);const I=c(t,["mediaResolution"]);I!=null&&h(o,["mediaResolution"],I);const D=c(t,["speechConfig"]);D!=null&&h(o,["speechConfig"],og(Ou(D)));const F=c(t,["audioTimestamp"]);F!=null&&h(o,["audioTimestamp"],F);const le=c(t,["thinkingConfig"]);le!=null&&h(o,["thinkingConfig"],le);const oe=c(t,["imageConfig"]);return oe!=null&&h(o,["imageConfig"],oe),o}function mp(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["contents"]);if(u!=null){let m=Bt(u);Array.isArray(m)&&(m=m.map(y=>Xo(y))),h(s,["contents"],m)}const d=c(t,["config"]);return d!=null&&h(s,["generationConfig"],UT(l,d,s)),s}function pp(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["contents"]);if(u!=null){let m=Bt(u);Array.isArray(m)&&(m=m.map(y=>y)),h(s,["contents"],m)}const d=c(t,["config"]);return d!=null&&h(s,["generationConfig"],jT(l,d,s)),s}function gp(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["candidates"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(g=>iT(g))),h(t,["candidates"],x)}const u=c(l,["modelVersion"]);u!=null&&h(t,["modelVersion"],u);const d=c(l,["promptFeedback"]);d!=null&&h(t,["promptFeedback"],d);const m=c(l,["responseId"]);m!=null&&h(t,["responseId"],m);const y=c(l,["usageMetadata"]);return y!=null&&h(t,["usageMetadata"],y),t}function yp(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(v=>v)),h(t,["candidates"],g)}const u=c(l,["createTime"]);u!=null&&h(t,["createTime"],u);const d=c(l,["modelVersion"]);d!=null&&h(t,["modelVersion"],d);const m=c(l,["promptFeedback"]);m!=null&&h(t,["promptFeedback"],m);const y=c(l,["responseId"]);y!=null&&h(t,["responseId"],y);const x=c(l,["usageMetadata"]);return x!=null&&h(t,["usageMetadata"],x),t}function LT(l,t){const s={};if(c(l,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(l,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=c(l,["numberOfImages"]);t!==void 0&&o!=null&&h(t,["parameters","sampleCount"],o);const u=c(l,["aspectRatio"]);t!==void 0&&u!=null&&h(t,["parameters","aspectRatio"],u);const d=c(l,["guidanceScale"]);if(t!==void 0&&d!=null&&h(t,["parameters","guidanceScale"],d),c(l,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=c(l,["safetyFilterLevel"]);t!==void 0&&m!=null&&h(t,["parameters","safetySetting"],m);const y=c(l,["personGeneration"]);t!==void 0&&y!=null&&h(t,["parameters","personGeneration"],y);const x=c(l,["includeSafetyAttributes"]);t!==void 0&&x!=null&&h(t,["parameters","includeSafetyAttributes"],x);const g=c(l,["includeRaiReason"]);t!==void 0&&g!=null&&h(t,["parameters","includeRaiReason"],g);const v=c(l,["language"]);t!==void 0&&v!=null&&h(t,["parameters","language"],v);const b=c(l,["outputMimeType"]);t!==void 0&&b!=null&&h(t,["parameters","outputOptions","mimeType"],b);const N=c(l,["outputCompressionQuality"]);if(t!==void 0&&N!=null&&h(t,["parameters","outputOptions","compressionQuality"],N),c(l,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(l,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=c(l,["imageSize"]);if(t!==void 0&&C!=null&&h(t,["parameters","sampleImageSize"],C),c(l,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function HT(l,t){const s={},o=c(l,["outputGcsUri"]);t!==void 0&&o!=null&&h(t,["parameters","storageUri"],o);const u=c(l,["negativePrompt"]);t!==void 0&&u!=null&&h(t,["parameters","negativePrompt"],u);const d=c(l,["numberOfImages"]);t!==void 0&&d!=null&&h(t,["parameters","sampleCount"],d);const m=c(l,["aspectRatio"]);t!==void 0&&m!=null&&h(t,["parameters","aspectRatio"],m);const y=c(l,["guidanceScale"]);t!==void 0&&y!=null&&h(t,["parameters","guidanceScale"],y);const x=c(l,["seed"]);t!==void 0&&x!=null&&h(t,["parameters","seed"],x);const g=c(l,["safetyFilterLevel"]);t!==void 0&&g!=null&&h(t,["parameters","safetySetting"],g);const v=c(l,["personGeneration"]);t!==void 0&&v!=null&&h(t,["parameters","personGeneration"],v);const b=c(l,["includeSafetyAttributes"]);t!==void 0&&b!=null&&h(t,["parameters","includeSafetyAttributes"],b);const N=c(l,["includeRaiReason"]);t!==void 0&&N!=null&&h(t,["parameters","includeRaiReason"],N);const C=c(l,["language"]);t!==void 0&&C!=null&&h(t,["parameters","language"],C);const _=c(l,["outputMimeType"]);t!==void 0&&_!=null&&h(t,["parameters","outputOptions","mimeType"],_);const E=c(l,["outputCompressionQuality"]);t!==void 0&&E!=null&&h(t,["parameters","outputOptions","compressionQuality"],E);const j=c(l,["addWatermark"]);t!==void 0&&j!=null&&h(t,["parameters","addWatermark"],j);const A=c(l,["labels"]);t!==void 0&&A!=null&&h(t,["labels"],A);const H=c(l,["imageSize"]);t!==void 0&&H!=null&&h(t,["parameters","sampleImageSize"],H);const q=c(l,["enhancePrompt"]);return t!==void 0&&q!=null&&h(t,["parameters","enhancePrompt"],q),s}function kT(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["prompt"]);u!=null&&h(s,["instances[0]","prompt"],u);const d=c(t,["config"]);return d!=null&&LT(d,s),s}function GT(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["prompt"]);u!=null&&h(s,["instances[0]","prompt"],u);const d=c(t,["config"]);return d!=null&&HT(d,s),s}function qT(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["predictions"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(m=>$T(m))),h(t,["generatedImages"],d)}const u=c(l,["positivePromptSafetyAttributes"]);return u!=null&&h(t,["positivePromptSafetyAttributes"],ig(u)),t}function VT(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["predictions"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(m=>$o(m))),h(t,["generatedImages"],d)}const u=c(l,["positivePromptSafetyAttributes"]);return u!=null&&h(t,["positivePromptSafetyAttributes"],sg(u)),t}function BT(l,t){const s={},o=c(l,["numberOfVideos"]);if(t!==void 0&&o!=null&&h(t,["parameters","sampleCount"],o),c(l,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(l,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=c(l,["durationSeconds"]);if(t!==void 0&&u!=null&&h(t,["parameters","durationSeconds"],u),c(l,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=c(l,["aspectRatio"]);t!==void 0&&d!=null&&h(t,["parameters","aspectRatio"],d);const m=c(l,["resolution"]);t!==void 0&&m!=null&&h(t,["parameters","resolution"],m);const y=c(l,["personGeneration"]);if(t!==void 0&&y!=null&&h(t,["parameters","personGeneration"],y),c(l,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const x=c(l,["negativePrompt"]);t!==void 0&&x!=null&&h(t,["parameters","negativePrompt"],x);const g=c(l,["enhancePrompt"]);if(t!==void 0&&g!=null&&h(t,["parameters","enhancePrompt"],g),c(l,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=c(l,["lastFrame"]);t!==void 0&&v!=null&&h(t,["instances[0]","lastFrame"],Zo(v));const b=c(l,["referenceImages"]);if(t!==void 0&&b!=null){let N=b;Array.isArray(N)&&(N=N.map(C=>VN(C))),h(t,["instances[0]","referenceImages"],N)}if(c(l,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(l,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function PT(l,t){const s={},o=c(l,["numberOfVideos"]);t!==void 0&&o!=null&&h(t,["parameters","sampleCount"],o);const u=c(l,["outputGcsUri"]);t!==void 0&&u!=null&&h(t,["parameters","storageUri"],u);const d=c(l,["fps"]);t!==void 0&&d!=null&&h(t,["parameters","fps"],d);const m=c(l,["durationSeconds"]);t!==void 0&&m!=null&&h(t,["parameters","durationSeconds"],m);const y=c(l,["seed"]);t!==void 0&&y!=null&&h(t,["parameters","seed"],y);const x=c(l,["aspectRatio"]);t!==void 0&&x!=null&&h(t,["parameters","aspectRatio"],x);const g=c(l,["resolution"]);t!==void 0&&g!=null&&h(t,["parameters","resolution"],g);const v=c(l,["personGeneration"]);t!==void 0&&v!=null&&h(t,["parameters","personGeneration"],v);const b=c(l,["pubsubTopic"]);t!==void 0&&b!=null&&h(t,["parameters","pubsubTopic"],b);const N=c(l,["negativePrompt"]);t!==void 0&&N!=null&&h(t,["parameters","negativePrompt"],N);const C=c(l,["enhancePrompt"]);t!==void 0&&C!=null&&h(t,["parameters","enhancePrompt"],C);const _=c(l,["generateAudio"]);t!==void 0&&_!=null&&h(t,["parameters","generateAudio"],_);const E=c(l,["lastFrame"]);t!==void 0&&E!=null&&h(t,["instances[0]","lastFrame"],Ft(E));const j=c(l,["referenceImages"]);if(t!==void 0&&j!=null){let q=j;Array.isArray(q)&&(q=q.map(G=>BN(G))),h(t,["instances[0]","referenceImages"],q)}const A=c(l,["mask"]);t!==void 0&&A!=null&&h(t,["instances[0]","mask"],qN(A));const H=c(l,["compressionQuality"]);return t!==void 0&&H!=null&&h(t,["parameters","compressionQuality"],H),s}function zT(l){const t={},s=c(l,["name"]);s!=null&&h(t,["name"],s);const o=c(l,["metadata"]);o!=null&&h(t,["metadata"],o);const u=c(l,["done"]);u!=null&&h(t,["done"],u);const d=c(l,["error"]);d!=null&&h(t,["error"],d);const m=c(l,["response","generateVideoResponse"]);return m!=null&&h(t,["response"],FT(m)),t}function OT(l){const t={},s=c(l,["name"]);s!=null&&h(t,["name"],s);const o=c(l,["metadata"]);o!=null&&h(t,["metadata"],o);const u=c(l,["done"]);u!=null&&h(t,["done"],u);const d=c(l,["error"]);d!=null&&h(t,["error"],d);const m=c(l,["response"]);return m!=null&&h(t,["response"],JT(m)),t}function YT(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["prompt"]);u!=null&&h(s,["instances[0]","prompt"],u);const d=c(t,["image"]);d!=null&&h(s,["instances[0]","image"],Zo(d));const m=c(t,["video"]);m!=null&&h(s,["instances[0]","video"],rg(m));const y=c(t,["source"]);y!=null&&QT(y,s);const x=c(t,["config"]);return x!=null&&BT(x,s),s}function KT(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["prompt"]);u!=null&&h(s,["instances[0]","prompt"],u);const d=c(t,["image"]);d!=null&&h(s,["instances[0]","image"],Ft(d));const m=c(t,["video"]);m!=null&&h(s,["instances[0]","video"],ug(m));const y=c(t,["source"]);y!=null&&XT(y,s);const x=c(t,["config"]);return x!=null&&PT(x,s),s}function FT(l){const t={},s=c(l,["generatedSamples"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(m=>WT(m))),h(t,["generatedVideos"],d)}const o=c(l,["raiMediaFilteredCount"]);o!=null&&h(t,["raiMediaFilteredCount"],o);const u=c(l,["raiMediaFilteredReasons"]);return u!=null&&h(t,["raiMediaFilteredReasons"],u),t}function JT(l){const t={},s=c(l,["videos"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(m=>eN(m))),h(t,["generatedVideos"],d)}const o=c(l,["raiMediaFilteredCount"]);o!=null&&h(t,["raiMediaFilteredCount"],o);const u=c(l,["raiMediaFilteredReasons"]);return u!=null&&h(t,["raiMediaFilteredReasons"],u),t}function QT(l,t){const s={},o=c(l,["prompt"]);t!==void 0&&o!=null&&h(t,["instances[0]","prompt"],o);const u=c(l,["image"]);t!==void 0&&u!=null&&h(t,["instances[0]","image"],Zo(u));const d=c(l,["video"]);return t!==void 0&&d!=null&&h(t,["instances[0]","video"],rg(d)),s}function XT(l,t){const s={},o=c(l,["prompt"]);t!==void 0&&o!=null&&h(t,["instances[0]","prompt"],o);const u=c(l,["image"]);t!==void 0&&u!=null&&h(t,["instances[0]","image"],Ft(u));const d=c(l,["video"]);return t!==void 0&&d!=null&&h(t,["instances[0]","video"],ug(d)),s}function $T(l){const t={},s=c(l,["_self"]);s!=null&&h(t,["image"],oN(s));const o=c(l,["raiFilteredReason"]);o!=null&&h(t,["raiFilteredReason"],o);const u=c(l,["_self"]);return u!=null&&h(t,["safetyAttributes"],ig(u)),t}function $o(l){const t={},s=c(l,["_self"]);s!=null&&h(t,["image"],lg(s));const o=c(l,["raiFilteredReason"]);o!=null&&h(t,["raiFilteredReason"],o);const u=c(l,["_self"]);u!=null&&h(t,["safetyAttributes"],sg(u));const d=c(l,["prompt"]);return d!=null&&h(t,["enhancedPrompt"],d),t}function ZT(l){const t={},s=c(l,["_self"]);s!=null&&h(t,["mask"],lg(s));const o=c(l,["labels"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),h(t,["labels"],u)}return t}function WT(l){const t={},s=c(l,["video"]);return s!=null&&h(t,["video"],kN(s)),t}function eN(l){const t={},s=c(l,["_self"]);return s!=null&&h(t,["video"],GN(s)),t}function tN(l){const t={},s=c(l,["modelSelectionConfig"]);s!=null&&h(t,["modelConfig"],s);const o=c(l,["audioTimestamp"]);o!=null&&h(t,["audioTimestamp"],o);const u=c(l,["candidateCount"]);u!=null&&h(t,["candidateCount"],u);const d=c(l,["enableAffectiveDialog"]);d!=null&&h(t,["enableAffectiveDialog"],d);const m=c(l,["frequencyPenalty"]);m!=null&&h(t,["frequencyPenalty"],m);const y=c(l,["logprobs"]);y!=null&&h(t,["logprobs"],y);const x=c(l,["maxOutputTokens"]);x!=null&&h(t,["maxOutputTokens"],x);const g=c(l,["mediaResolution"]);g!=null&&h(t,["mediaResolution"],g);const v=c(l,["presencePenalty"]);v!=null&&h(t,["presencePenalty"],v);const b=c(l,["responseJsonSchema"]);b!=null&&h(t,["responseJsonSchema"],b);const N=c(l,["responseLogprobs"]);N!=null&&h(t,["responseLogprobs"],N);const C=c(l,["responseMimeType"]);C!=null&&h(t,["responseMimeType"],C);const _=c(l,["responseModalities"]);_!=null&&h(t,["responseModalities"],_);const E=c(l,["responseSchema"]);E!=null&&h(t,["responseSchema"],E);const j=c(l,["routingConfig"]);j!=null&&h(t,["routingConfig"],j);const A=c(l,["seed"]);A!=null&&h(t,["seed"],A);const H=c(l,["speechConfig"]);H!=null&&h(t,["speechConfig"],og(H));const q=c(l,["stopSequences"]);q!=null&&h(t,["stopSequences"],q);const G=c(l,["temperature"]);G!=null&&h(t,["temperature"],G);const P=c(l,["thinkingConfig"]);P!=null&&h(t,["thinkingConfig"],P);const V=c(l,["topK"]);V!=null&&h(t,["topK"],V);const k=c(l,["topP"]);if(k!=null&&h(t,["topP"],k),c(l,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function nN(l,t){const s={},o=c(t,["model"]);return o!=null&&h(s,["_url","name"],Me(l,o)),s}function lN(l,t){const s={},o=c(t,["model"]);return o!=null&&h(s,["_url","name"],Me(l,o)),s}function iN(l){const t={};if(c(l,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(l,["enableWidget"]);return s!=null&&h(t,["enableWidget"],s),t}function sN(l){const t={},s=c(l,["timeRangeFilter"]);if(s!=null&&h(t,["timeRangeFilter"],s),c(l,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function oN(l){const t={},s=c(l,["bytesBase64Encoded"]);s!=null&&h(t,["imageBytes"],Xn(s));const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function lg(l){const t={},s=c(l,["gcsUri"]);s!=null&&h(t,["gcsUri"],s);const o=c(l,["bytesBase64Encoded"]);o!=null&&h(t,["imageBytes"],Xn(o));const u=c(l,["mimeType"]);return u!=null&&h(t,["mimeType"],u),t}function Zo(l){const t={};if(c(l,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=c(l,["imageBytes"]);s!=null&&h(t,["bytesBase64Encoded"],Xn(s));const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function Ft(l){const t={},s=c(l,["gcsUri"]);s!=null&&h(t,["gcsUri"],s);const o=c(l,["imageBytes"]);o!=null&&h(t,["bytesBase64Encoded"],Xn(o));const u=c(l,["mimeType"]);return u!=null&&h(t,["mimeType"],u),t}function aN(l,t,s){const o={},u=c(t,["pageSize"]);s!==void 0&&u!=null&&h(s,["_query","pageSize"],u);const d=c(t,["pageToken"]);s!==void 0&&d!=null&&h(s,["_query","pageToken"],d);const m=c(t,["filter"]);s!==void 0&&m!=null&&h(s,["_query","filter"],m);const y=c(t,["queryBase"]);return s!==void 0&&y!=null&&h(s,["_url","models_url"],Qp(l,y)),o}function rN(l,t,s){const o={},u=c(t,["pageSize"]);s!==void 0&&u!=null&&h(s,["_query","pageSize"],u);const d=c(t,["pageToken"]);s!==void 0&&d!=null&&h(s,["_query","pageToken"],d);const m=c(t,["filter"]);s!==void 0&&m!=null&&h(s,["_query","filter"],m);const y=c(t,["queryBase"]);return s!==void 0&&y!=null&&h(s,["_url","models_url"],Qp(l,y)),o}function uN(l,t){const s={},o=c(t,["config"]);return o!=null&&aN(l,o,s),s}function cN(l,t){const s={},o=c(t,["config"]);return o!=null&&rN(l,o,s),s}function dN(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const u=c(l,["_self"]);if(u!=null){let d=Xp(u);Array.isArray(d)&&(d=d.map(m=>Iu(m))),h(t,["models"],d)}return t}function fN(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const u=c(l,["_self"]);if(u!=null){let d=Xp(u);Array.isArray(d)&&(d=d.map(m=>Uu(m))),h(t,["models"],d)}return t}function hN(l){const t={},s=c(l,["maskMode"]);s!=null&&h(t,["maskMode"],s);const o=c(l,["segmentationClasses"]);o!=null&&h(t,["maskClasses"],o);const u=c(l,["maskDilation"]);return u!=null&&h(t,["dilation"],u),t}function Iu(l){const t={},s=c(l,["name"]);s!=null&&h(t,["name"],s);const o=c(l,["displayName"]);o!=null&&h(t,["displayName"],o);const u=c(l,["description"]);u!=null&&h(t,["description"],u);const d=c(l,["version"]);d!=null&&h(t,["version"],d);const m=c(l,["_self"]);m!=null&&h(t,["tunedModelInfo"],MN(m));const y=c(l,["inputTokenLimit"]);y!=null&&h(t,["inputTokenLimit"],y);const x=c(l,["outputTokenLimit"]);x!=null&&h(t,["outputTokenLimit"],x);const g=c(l,["supportedGenerationMethods"]);return g!=null&&h(t,["supportedActions"],g),t}function Uu(l){const t={},s=c(l,["name"]);s!=null&&h(t,["name"],s);const o=c(l,["displayName"]);o!=null&&h(t,["displayName"],o);const u=c(l,["description"]);u!=null&&h(t,["description"],u);const d=c(l,["versionId"]);d!=null&&h(t,["version"],d);const m=c(l,["deployedModels"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(N=>DT(N))),h(t,["endpoints"],b)}const y=c(l,["labels"]);y!=null&&h(t,["labels"],y);const x=c(l,["_self"]);x!=null&&h(t,["tunedModelInfo"],wN(x));const g=c(l,["defaultCheckpointId"]);g!=null&&h(t,["defaultCheckpointId"],g);const v=c(l,["checkpoints"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(N=>N)),h(t,["checkpoints"],b)}return t}function mN(l){const t={},s=c(l,["videoMetadata"]);s!=null&&h(t,["videoMetadata"],s);const o=c(l,["thought"]);o!=null&&h(t,["thought"],o);const u=c(l,["inlineData"]);u!=null&&h(t,["inlineData"],lT(u));const d=c(l,["fileData"]);d!=null&&h(t,["fileData"],RT(d));const m=c(l,["thoughtSignature"]);m!=null&&h(t,["thoughtSignature"],m);const y=c(l,["functionCall"]);y!=null&&h(t,["functionCall"],y);const x=c(l,["codeExecutionResult"]);x!=null&&h(t,["codeExecutionResult"],x);const g=c(l,["executableCode"]);g!=null&&h(t,["executableCode"],g);const v=c(l,["functionResponse"]);v!=null&&h(t,["functionResponse"],v);const b=c(l,["text"]);return b!=null&&h(t,["text"],b),t}function pN(l){const t={},s=c(l,["productImage"]);return s!=null&&h(t,["image"],Ft(s)),t}function gN(l,t){const s={},o=c(l,["numberOfImages"]);t!==void 0&&o!=null&&h(t,["parameters","sampleCount"],o);const u=c(l,["baseSteps"]);t!==void 0&&u!=null&&h(t,["parameters","editConfig","baseSteps"],u);const d=c(l,["outputGcsUri"]);t!==void 0&&d!=null&&h(t,["parameters","storageUri"],d);const m=c(l,["seed"]);t!==void 0&&m!=null&&h(t,["parameters","seed"],m);const y=c(l,["safetyFilterLevel"]);t!==void 0&&y!=null&&h(t,["parameters","safetySetting"],y);const x=c(l,["personGeneration"]);t!==void 0&&x!=null&&h(t,["parameters","personGeneration"],x);const g=c(l,["addWatermark"]);t!==void 0&&g!=null&&h(t,["parameters","addWatermark"],g);const v=c(l,["outputMimeType"]);t!==void 0&&v!=null&&h(t,["parameters","outputOptions","mimeType"],v);const b=c(l,["outputCompressionQuality"]);t!==void 0&&b!=null&&h(t,["parameters","outputOptions","compressionQuality"],b);const N=c(l,["enhancePrompt"]);t!==void 0&&N!=null&&h(t,["parameters","enhancePrompt"],N);const C=c(l,["labels"]);return t!==void 0&&C!=null&&h(t,["labels"],C),s}function yN(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["source"]);u!=null&&vN(u,s);const d=c(t,["config"]);return d!=null&&gN(d,s),s}function xN(l){const t={},s=c(l,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>$o(u))),h(t,["generatedImages"],o)}return t}function vN(l,t){const s={},o=c(l,["prompt"]);t!==void 0&&o!=null&&h(t,["instances[0]","prompt"],o);const u=c(l,["personImage"]);t!==void 0&&u!=null&&h(t,["instances[0]","personImage","image"],Ft(u));const d=c(l,["productImages"]);if(t!==void 0&&d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>pN(y))),h(t,["instances[0]","productImages"],m)}return s}function bN(l){const t={},s=c(l,["referenceImage"]);s!=null&&h(t,["referenceImage"],Ft(s));const o=c(l,["referenceId"]);o!=null&&h(t,["referenceId"],o);const u=c(l,["referenceType"]);u!=null&&h(t,["referenceType"],u);const d=c(l,["maskImageConfig"]);d!=null&&h(t,["maskImageConfig"],hN(d));const m=c(l,["controlImageConfig"]);m!=null&&h(t,["controlImageConfig"],cT(m));const y=c(l,["styleImageConfig"]);y!=null&&h(t,["styleImageConfig"],y);const x=c(l,["subjectImageConfig"]);return x!=null&&h(t,["subjectImageConfig"],x),t}function ig(l){const t={},s=c(l,["safetyAttributes","categories"]);s!=null&&h(t,["categories"],s);const o=c(l,["safetyAttributes","scores"]);o!=null&&h(t,["scores"],o);const u=c(l,["contentType"]);return u!=null&&h(t,["contentType"],u),t}function sg(l){const t={},s=c(l,["safetyAttributes","categories"]);s!=null&&h(t,["categories"],s);const o=c(l,["safetyAttributes","scores"]);o!=null&&h(t,["scores"],o);const u=c(l,["contentType"]);return u!=null&&h(t,["contentType"],u),t}function TN(l){const t={};if(c(l,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(l,["category"]);s!=null&&h(t,["category"],s);const o=c(l,["threshold"]);return o!=null&&h(t,["threshold"],o),t}function NN(l){const t={},s=c(l,["image"]);return s!=null&&h(t,["image"],Ft(s)),t}function SN(l,t){const s={},o=c(l,["mode"]);t!==void 0&&o!=null&&h(t,["parameters","mode"],o);const u=c(l,["maxPredictions"]);t!==void 0&&u!=null&&h(t,["parameters","maxPredictions"],u);const d=c(l,["confidenceThreshold"]);t!==void 0&&d!=null&&h(t,["parameters","confidenceThreshold"],d);const m=c(l,["maskDilation"]);t!==void 0&&m!=null&&h(t,["parameters","maskDilation"],m);const y=c(l,["binaryColorThreshold"]);t!==void 0&&y!=null&&h(t,["parameters","binaryColorThreshold"],y);const x=c(l,["labels"]);return t!==void 0&&x!=null&&h(t,["labels"],x),s}function CN(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["source"]);u!=null&&EN(u,s);const d=c(t,["config"]);return d!=null&&SN(d,s),s}function AN(l){const t={},s=c(l,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>ZT(u))),h(t,["generatedMasks"],o)}return t}function EN(l,t){const s={},o=c(l,["prompt"]);t!==void 0&&o!=null&&h(t,["instances[0]","prompt"],o);const u=c(l,["image"]);t!==void 0&&u!=null&&h(t,["instances[0]","image"],Ft(u));const d=c(l,["scribbleImage"]);return t!==void 0&&d!=null&&h(t,["instances[0]","scribble"],NN(d)),s}function og(l){const t={},s=c(l,["voiceConfig"]);if(s!=null&&h(t,["voiceConfig"],s),c(l,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=c(l,["languageCode"]);return o!=null&&h(t,["languageCode"],o),t}function _N(l){const t={},s=c(l,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),h(t,["functionDeclarations"],g)}if(c(l,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(l,["googleSearch"]);o!=null&&h(t,["googleSearch"],sN(o));const u=c(l,["googleSearchRetrieval"]);if(u!=null&&h(t,["googleSearchRetrieval"],u),c(l,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(l,["googleMaps"]);d!=null&&h(t,["googleMaps"],iN(d));const m=c(l,["urlContext"]);m!=null&&h(t,["urlContext"],m);const y=c(l,["computerUse"]);y!=null&&h(t,["computerUse"],y);const x=c(l,["codeExecution"]);return x!=null&&h(t,["codeExecution"],x),t}function ag(l){const t={},s=c(l,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(N=>IT(N))),h(t,["functionDeclarations"],b)}const o=c(l,["retrieval"]);o!=null&&h(t,["retrieval"],o);const u=c(l,["googleSearch"]);u!=null&&h(t,["googleSearch"],u);const d=c(l,["googleSearchRetrieval"]);d!=null&&h(t,["googleSearchRetrieval"],d);const m=c(l,["enterpriseWebSearch"]);m!=null&&h(t,["enterpriseWebSearch"],m);const y=c(l,["googleMaps"]);y!=null&&h(t,["googleMaps"],y);const x=c(l,["urlContext"]);x!=null&&h(t,["urlContext"],x);const g=c(l,["computerUse"]);g!=null&&h(t,["computerUse"],g);const v=c(l,["codeExecution"]);return v!=null&&h(t,["codeExecution"],v),t}function MN(l){const t={},s=c(l,["baseModel"]);s!=null&&h(t,["baseModel"],s);const o=c(l,["createTime"]);o!=null&&h(t,["createTime"],o);const u=c(l,["updateTime"]);return u!=null&&h(t,["updateTime"],u),t}function wN(l){const t={},s=c(l,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&h(t,["baseModel"],s);const o=c(l,["createTime"]);o!=null&&h(t,["createTime"],o);const u=c(l,["updateTime"]);return u!=null&&h(t,["updateTime"],u),t}function DN(l,t){const s={},o=c(l,["displayName"]);t!==void 0&&o!=null&&h(t,["displayName"],o);const u=c(l,["description"]);t!==void 0&&u!=null&&h(t,["description"],u);const d=c(l,["defaultCheckpointId"]);return t!==void 0&&d!=null&&h(t,["defaultCheckpointId"],d),s}function RN(l,t){const s={},o=c(l,["displayName"]);t!==void 0&&o!=null&&h(t,["displayName"],o);const u=c(l,["description"]);t!==void 0&&u!=null&&h(t,["description"],u);const d=c(l,["defaultCheckpointId"]);return t!==void 0&&d!=null&&h(t,["defaultCheckpointId"],d),s}function IN(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","name"],Me(l,o));const u=c(t,["config"]);return u!=null&&DN(u,s),s}function UN(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["config"]);return u!=null&&RN(u,s),s}function jN(l,t){const s={},o=c(l,["outputGcsUri"]);t!==void 0&&o!=null&&h(t,["parameters","storageUri"],o);const u=c(l,["includeRaiReason"]);t!==void 0&&u!=null&&h(t,["parameters","includeRaiReason"],u);const d=c(l,["outputMimeType"]);t!==void 0&&d!=null&&h(t,["parameters","outputOptions","mimeType"],d);const m=c(l,["outputCompressionQuality"]);t!==void 0&&m!=null&&h(t,["parameters","outputOptions","compressionQuality"],m);const y=c(l,["enhanceInputImage"]);t!==void 0&&y!=null&&h(t,["parameters","upscaleConfig","enhanceInputImage"],y);const x=c(l,["imagePreservationFactor"]);t!==void 0&&x!=null&&h(t,["parameters","upscaleConfig","imagePreservationFactor"],x);const g=c(l,["labels"]);t!==void 0&&g!=null&&h(t,["labels"],g);const v=c(l,["numberOfImages"]);t!==void 0&&v!=null&&h(t,["parameters","sampleCount"],v);const b=c(l,["mode"]);return t!==void 0&&b!=null&&h(t,["parameters","mode"],b),s}function LN(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["_url","model"],Me(l,o));const u=c(t,["image"]);u!=null&&h(s,["instances[0]","image"],Ft(u));const d=c(t,["upscaleFactor"]);d!=null&&h(s,["parameters","upscaleConfig","upscaleFactor"],d);const m=c(t,["config"]);return m!=null&&jN(m,s),s}function HN(l){const t={},s=c(l,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=c(l,["predictions"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>$o(d))),h(t,["generatedImages"],u)}return t}function kN(l){const t={},s=c(l,["uri"]);s!=null&&h(t,["uri"],s);const o=c(l,["encodedVideo"]);o!=null&&h(t,["videoBytes"],Xn(o));const u=c(l,["encoding"]);return u!=null&&h(t,["mimeType"],u),t}function GN(l){const t={},s=c(l,["gcsUri"]);s!=null&&h(t,["uri"],s);const o=c(l,["bytesBase64Encoded"]);o!=null&&h(t,["videoBytes"],Xn(o));const u=c(l,["mimeType"]);return u!=null&&h(t,["mimeType"],u),t}function qN(l){const t={},s=c(l,["image"]);s!=null&&h(t,["_self"],Ft(s));const o=c(l,["maskMode"]);return o!=null&&h(t,["maskMode"],o),t}function VN(l){const t={},s=c(l,["image"]);s!=null&&h(t,["image"],Zo(s));const o=c(l,["referenceType"]);return o!=null&&h(t,["referenceType"],o),t}function BN(l){const t={},s=c(l,["image"]);s!=null&&h(t,["image"],Ft(s));const o=c(l,["referenceType"]);return o!=null&&h(t,["referenceType"],o),t}function rg(l){const t={},s=c(l,["uri"]);s!=null&&h(t,["uri"],s);const o=c(l,["videoBytes"]);o!=null&&h(t,["encodedVideo"],Xn(o));const u=c(l,["mimeType"]);return u!=null&&h(t,["encoding"],u),t}function ug(l){const t={},s=c(l,["uri"]);s!=null&&h(t,["gcsUri"],s);const o=c(l,["videoBytes"]);o!=null&&h(t,["bytesBase64Encoded"],Xn(o));const u=c(l,["mimeType"]);return u!=null&&h(t,["mimeType"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PN="Content-Type",zN="X-Server-Timeout",ON="User-Agent",ju="x-goog-api-client",YN="1.27.0",KN=`google-genai-sdk/${YN}`,FN="v1beta1",JN="v1beta",xp=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class QN{constructor(t){var s,o;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const u={};this.clientOptions.vertexai?(u.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:FN,u.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(u.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:JN,u.baseUrl="https://generativelanguage.googleapis.com/"),u.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=u,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(u,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),s=new URL(t);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,s,o){const u=[this.getRequestUrlInternal(s)];return o&&u.push(this.getBaseResourcePath()),t!==""&&u.push(t),new URL(`${u.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let s=this.clientOptions.httpOptions;t.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),u=this.constructUrl(t.path,s,o);if(t.queryParams)for(const[m,y]of Object.entries(t.queryParams))u.searchParams.append(m,String(y));let d={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else d.body=t.body;return d=await this.includeExtraHttpOptionsToRequestInit(d,s,u.toString(),t.abortSignal),this.unaryApiCall(u,d,t.httpMethod)}patchHttpOptions(t,s){const o=JSON.parse(JSON.stringify(t));for(const[u,d]of Object.entries(s))typeof d=="object"?o[u]=Object.assign(Object.assign({},o[u]),d):d!==void 0&&(o[u]=d);return o}async requestStream(t){let s=this.clientOptions.httpOptions;t.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),u=this.constructUrl(t.path,s,o);(!u.searchParams.has("alt")||u.searchParams.get("alt")!=="sse")&&u.searchParams.set("alt","sse");let d={};return d.body=t.body,d=await this.includeExtraHttpOptionsToRequestInit(d,s,u.toString(),t.abortSignal),this.streamApiCall(u,d,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,s,o,u){if(s&&s.timeout||u){const d=new AbortController,m=d.signal;if(s.timeout&&(s==null?void 0:s.timeout)>0){const y=setTimeout(()=>d.abort(),s.timeout);y&&typeof y.unref=="function"&&y.unref()}u&&u.addEventListener("abort",()=>{d.abort()}),t.signal=m}return s&&s.extraBody!==null&&XN(t,s.extraBody),t.headers=await this.getHeadersInternal(s,o),t}async unaryApiCall(t,s,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},s),{method:o})).then(async u=>(await vp(u),new wu(u))).catch(u=>{throw u instanceof Error?u:new Error(JSON.stringify(u))})}async streamApiCall(t,s,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},s),{method:o})).then(async u=>(await vp(u),this.processStreamResponse(u))).catch(u=>{throw u instanceof Error?u:new Error(JSON.stringify(u))})}processStreamResponse(t){var s;return oi(this,arguments,function*(){const u=(s=t==null?void 0:t.body)===null||s===void 0?void 0:s.getReader(),d=new TextDecoder("utf-8");if(!u)throw new Error("Response body is empty");try{let m="";for(;;){const{done:y,value:x}=yield Be(u.read());if(y){if(m.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=d.decode(x,{stream:!0});try{const b=JSON.parse(g);if("error"in b){const N=JSON.parse(JSON.stringify(b.error)),C=N.status,_=N.code,E=`got status: ${C}. ${JSON.stringify(b)}`;if(_>=400&&_<600)throw new Qo({message:E,status:_})}}catch(b){if(b.name==="ApiError")throw b}m+=g;let v=m.match(xp);for(;v;){const b=v[1];try{const N=new Response(b,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Be(new wu(N)),m=m.slice(v[0].length),v=m.match(xp)}catch(N){throw new Error(`exception parsing stream chunk ${b}. ${N}`)}}}}finally{u.releaseLock()}})}async apiCall(t,s){return fetch(t,s).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},s=KN+" "+this.clientOptions.userAgentExtra;return t[ON]=s,t[ju]=s,t[PN]="application/json",t}async getHeadersInternal(t,s){const o=new Headers;if(t&&t.headers){for(const[u,d]of Object.entries(t.headers))o.append(u,d);t.timeout&&t.timeout>0&&o.append(zN,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,s),o}async uploadFile(t,s){var o;const u={};s!=null&&(u.mimeType=s.mimeType,u.name=s.name,u.displayName=s.displayName),u.name&&!u.name.startsWith("files/")&&(u.name=`files/${u.name}`);const d=this.clientOptions.uploader,m=await d.stat(t);u.sizeBytes=String(m.size);const y=(o=s==null?void 0:s.mimeType)!==null&&o!==void 0?o:m.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");u.mimeType=y;const x=await this.fetchUploadUrl(u,s);return d.upload(t,x,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,s){var o;let u={};s!=null&&s.httpOptions?u=s.httpOptions:u={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const d={file:t},m=await this.request({path:re("upload/v1beta/files",d._url),body:JSON.stringify(d),httpMethod:"POST",httpOptions:u});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(o=m==null?void 0:m.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function vp(l){var t;if(l===void 0)throw new Error("response is undefined");if(!l.ok){const s=l.status;let o;!((t=l.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await l.json():o={error:{message:await l.text(),code:l.status,status:l.statusText}};const u=JSON.stringify(o);throw s>=400&&s<600?new Qo({message:u,status:s}):new Error(u)}}function XN(l,t){if(!t||Object.keys(t).length===0)return;if(l.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let s={};if(typeof l.body=="string"&&l.body.length>0)try{const d=JSON.parse(l.body);if(typeof d=="object"&&d!==null&&!Array.isArray(d))s=d;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(d,m){const y=Object.assign({},d);for(const x in m)if(Object.prototype.hasOwnProperty.call(m,x)){const g=m[x],v=y[x];g&&typeof g=="object"&&!Array.isArray(g)&&v&&typeof v=="object"&&!Array.isArray(v)?y[x]=o(v,g):(v&&g&&typeof v!=typeof g&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${x}". Original type: ${typeof v}, New type: ${typeof g}. Overwriting.`),y[x]=g)}return y}const u=o(s,t);l.body=JSON.stringify(u)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $N="mcp_used/unknown";let ZN=!1;function cg(l){for(const t of l)if(WN(t)||typeof t=="object"&&"inputSchema"in t)return!0;return ZN}function dg(l){var t;const s=(t=l[ju])!==null&&t!==void 0?t:"";l[ju]=(s+` ${$N}`).trimStart()}function WN(l){return l!==null&&typeof l=="object"&&l instanceof Ku}function eS(l,t=100){return oi(this,arguments,function*(){let o,u=0;for(;u<t;){const d=yield Be(l.listTools({cursor:o}));for(const m of d.tools)yield yield Be(m),u++;if(!d.nextCursor)break;o=d.nextCursor}})}class Ku{constructor(t=[],s){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=s}static create(t,s){return new Ku(t,s)}async initialize(){var t,s,o,u;if(this.mcpTools.length>0)return;const d={},m=[];for(const v of this.mcpClients)try{for(var y=!0,x=(s=void 0,fs(eS(v))),g;g=await x.next(),t=g.done,!t;y=!0){u=g.value,y=!1;const b=u;m.push(b);const N=b.name;if(d[N])throw new Error(`Duplicate function name ${N} found in MCP tools. Please ensure function names are unique.`);d[N]=v}}catch(b){s={error:b}}finally{try{!y&&!t&&(o=x.return)&&await o.call(x)}finally{if(s)throw s.error}}this.mcpTools=m,this.functionNameToMcpClient=d}async tool(){return await this.initialize(),sv(this.mcpTools,this.config)}async callTool(t){await this.initialize();const s=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const u=this.functionNameToMcpClient[o.name];let d;this.config.timeout&&(d={timeout:this.config.timeout});const m=await u.callTool({name:o.name,arguments:o.args},void 0,d);s.push({functionResponse:{name:o.name,response:m.isError?{error:m}:m}})}return s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function tS(l,t,s){const o=new $x;let u;s.data instanceof Blob?u=JSON.parse(await s.data.text()):u=JSON.parse(s.data),Object.assign(o,u),t(o)}class nS{constructor(t,s,o){this.apiClient=t,this.auth=s,this.webSocketFactory=o}async connect(t){var s,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const u=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),m=sS(this.apiClient.getDefaultHeaders()),y=this.apiClient.getApiKey(),x=`${u}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateMusic?key=${y}`;let g=()=>{};const v=new Promise(q=>{g=q}),b=t.callbacks,N=function(){g({})},C=this.apiClient,_={onopen:N,onmessage:q=>{tS(C,b.onmessage,q)},onerror:(s=b==null?void 0:b.onerror)!==null&&s!==void 0?s:function(q){},onclose:(o=b==null?void 0:b.onclose)!==null&&o!==void 0?o:function(q){}},E=this.webSocketFactory.create(x,iS(m),_);E.connect(),await v;const H={setup:{model:Me(this.apiClient,t.model)}};return E.send(JSON.stringify(H)),new lS(E,this.apiClient)}}class lS{constructor(t,s){this.conn=t,this.apiClient=s}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const s=Jb(t);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const s=Fb(t);this.conn.send(JSON.stringify(s))}sendPlaybackControl(t){const s={playbackControl:t};this.conn.send(JSON.stringify(s))}play(){this.sendPlaybackControl(ii.PLAY)}pause(){this.sendPlaybackControl(ii.PAUSE)}stop(){this.sendPlaybackControl(ii.STOP)}resetContext(){this.sendPlaybackControl(ii.RESET_CONTEXT)}close(){this.conn.close()}}function iS(l){const t={};return l.forEach((s,o)=>{t[o]=s}),t}function sS(l){const t=new Headers;for(const[s,o]of Object.entries(l))t.append(s,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oS="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function aS(l,t,s){const o=new Xx;let u;s.data instanceof Blob?u=await s.data.text():s.data instanceof ArrayBuffer?u=new TextDecoder().decode(s.data):u=s.data;const d=JSON.parse(u);if(l.isVertexAI()){const m=$b(d);Object.assign(o,m)}else Object.assign(o,d);t(o)}class rS{constructor(t,s,o){this.apiClient=t,this.auth=s,this.webSocketFactory=o,this.music=new nS(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var s,o,u,d,m,y;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const x=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let v;const b=this.apiClient.getHeaders();t.config&&t.config.tools&&cg(t.config.tools)&&dg(b);const N=fS(b);if(this.apiClient.isVertexAI())v=`${x}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(N,v);else{const Z=this.apiClient.getApiKey();let se="BidiGenerateContent",I="key";Z!=null&&Z.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),g!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),se="BidiGenerateContentConstrained",I="access_token"),v=`${x}/ws/google.ai.generativelanguage.${g}.GenerativeService.${se}?${I}=${Z}`}let C=()=>{};const _=new Promise(Z=>{C=Z}),E=t.callbacks,j=function(){var Z;(Z=E==null?void 0:E.onopen)===null||Z===void 0||Z.call(E),C({})},A=this.apiClient,H={onopen:j,onmessage:Z=>{aS(A,E.onmessage,Z)},onerror:(s=E==null?void 0:E.onerror)!==null&&s!==void 0?s:function(Z){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(Z){}},q=this.webSocketFactory.create(v,dS(N),H);q.connect(),await _;let G=Me(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const Z=this.apiClient.getProject(),se=this.apiClient.getLocation();G=`projects/${Z}/locations/${se}/`+G}let P={};this.apiClient.isVertexAI()&&((u=t.config)===null||u===void 0?void 0:u.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Yo.AUDIO]}:t.config.responseModalities=[Yo.AUDIO]),!((d=t.config)===null||d===void 0)&&d.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const V=(y=(m=t.config)===null||m===void 0?void 0:m.tools)!==null&&y!==void 0?y:[],k=[];for(const Z of V)if(this.isCallableTool(Z)){const se=Z;k.push(await se.tool())}else k.push(Z);k.length>0&&(t.config.tools=k);const X={model:G,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?P=Kb(this.apiClient,X):P=Yb(this.apiClient,X),delete P.config,q.send(JSON.stringify(P)),new cS(q,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const uS={turnComplete:!0};class cS{constructor(t,s){this.conn=t,this.apiClient=s}tLiveClientContent(t,s){if(s.turns!==null&&s.turns!==void 0){let o=[];try{o=Bt(s.turns),t.isVertexAI()||(o=o.map(u=>Xo(u)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:o,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(t,s){let o=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?o=s.functionResponses:o=[s.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const d of o){if(typeof d!="object"||d===null||!("name"in d)||!("response"in d))throw new Error(`Could not parse function response, type '${typeof d}'.`);if(!t.isVertexAI()&&!("id"in d))throw new Error(oS)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},uS),t);const s=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(s))}sendRealtimeInput(t){let s={};this.apiClient.isVertexAI()?s={realtimeInput:Xb(t)}:s={realtimeInput:Qb(t)},this.conn.send(JSON.stringify(s))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function dS(l){const t={};return l.forEach((s,o)=>{t[o]=s}),t}function fS(l){const t=new Headers;for(const[s,o]of Object.entries(l))t.append(s,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bp=10;function Tp(l){var t,s,o;if(!((t=l==null?void 0:l.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let u=!1;for(const m of(s=l==null?void 0:l.tools)!==null&&s!==void 0?s:[])if(ai(m)){u=!0;break}if(!u)return!0;const d=(o=l==null?void 0:l.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return d&&(d<0||!Number.isInteger(d))||d==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",d),!0):!1}function ai(l){return"callTool"in l&&typeof l.callTool=="function"}function hS(l){var t,s,o;return(o=(s=(t=l.config)===null||t===void 0?void 0:t.tools)===null||s===void 0?void 0:s.some(u=>ai(u)))!==null&&o!==void 0?o:!1}function mS(l){var t,s,o;return(o=(s=(t=l.config)===null||t===void 0?void 0:t.tools)===null||s===void 0?void 0:s.some(u=>!ai(u)))!==null&&o!==void 0?o:!1}function Np(l){var t;return!(!((t=l==null?void 0:l.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pS extends xl{constructor(t){super(),this.apiClient=t,this.generateContent=async s=>{var o,u,d,m,y;const x=await this.processParamsMaybeAddMcpUsage(s);if(this.maybeMoveToResponseJsonSchem(s),!hS(s)||Tp(s.config))return await this.generateContentInternal(x);if(mS(s))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let g,v;const b=Bt(x.contents),N=(d=(u=(o=x.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||u===void 0?void 0:u.maximumRemoteCalls)!==null&&d!==void 0?d:bp;let C=0;for(;C<N&&(g=await this.generateContentInternal(x),!(!g.functionCalls||g.functionCalls.length===0));){const _=g.candidates[0].content,E=[];for(const j of(y=(m=s.config)===null||m===void 0?void 0:m.tools)!==null&&y!==void 0?y:[])if(ai(j)){const H=await j.callTool(g.functionCalls);E.push(...H)}C++,v={role:"user",parts:E},x.contents=Bt(x.contents),x.contents.push(_),x.contents.push(v),Np(x.config)&&(b.push(_),b.push(v))}return Np(x.config)&&(g.automaticFunctionCallingHistory=b),g},this.generateContentStream=async s=>{if(this.maybeMoveToResponseJsonSchem(s),Tp(s.config)){const o=await this.processParamsMaybeAddMcpUsage(s);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(s)},this.generateImages=async s=>await this.generateImagesInternal(s).then(o=>{var u;let d;const m=[];if(o!=null&&o.generatedImages)for(const x of o.generatedImages)x&&(x!=null&&x.safetyAttributes)&&((u=x==null?void 0:x.safetyAttributes)===null||u===void 0?void 0:u.contentType)==="Positive Prompt"?d=x==null?void 0:x.safetyAttributes:m.push(x);let y;return d?y={generatedImages:m,positivePromptSafetyAttributes:d,sdkHttpResponse:o.sdkHttpResponse}:y={generatedImages:m,sdkHttpResponse:o.sdkHttpResponse},y}),this.list=async s=>{var o;const m={config:Object.assign(Object.assign({},{queryBase:!0}),s==null?void 0:s.config)};if(this.apiClient.isVertexAI()&&!m.config.queryBase){if(!((o=m.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");m.config.filter="labels.tune-type:*"}return new ms(yl.PAGED_ITEM_MODELS,y=>this.listInternal(y),await this.listInternal(m),m)},this.editImage=async s=>{const o={model:s.model,prompt:s.prompt,referenceImages:[],config:s.config};return s.referenceImages&&s.referenceImages&&(o.referenceImages=s.referenceImages.map(u=>u.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async s=>{let o={numberOfImages:1,mode:"upscale"};s.config&&(o=Object.assign(Object.assign({},o),s.config));const u={model:s.model,image:s.image,upscaleFactor:s.upscaleFactor,config:o};return await this.upscaleImageInternal(u)},this.generateVideos=async s=>{var o,u,d,m,y,x;if((s.prompt||s.image||s.video)&&s.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=s.video)===null||o===void 0)&&o.uri&&(!((u=s.video)===null||u===void 0)&&u.videoBytes)?s.video={uri:s.video.uri,mimeType:s.video.mimeType}:!((m=(d=s.source)===null||d===void 0?void 0:d.video)===null||m===void 0)&&m.uri&&(!((x=(y=s.source)===null||y===void 0?void 0:y.video)===null||x===void 0)&&x.videoBytes)&&(s.source.video={uri:s.source.video.uri,mimeType:s.source.video.mimeType})),await this.generateVideosInternal(s)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var s,o,u;const d=(s=t.config)===null||s===void 0?void 0:s.tools;if(!d)return t;const m=await Promise.all(d.map(async x=>ai(x)?await x.tool():x)),y={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:m})};if(y.config.tools=m,t.config&&t.config.tools&&cg(t.config.tools)){const x=(u=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&u!==void 0?u:{};let g=Object.assign({},x);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),dg(g),y.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:g})}return y}async initAfcToolsMap(t){var s,o,u;const d=new Map;for(const m of(o=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[])if(ai(m)){const y=m,x=await y.tool();for(const g of(u=x.functionDeclarations)!==null&&u!==void 0?u:[]){if(!g.name)throw new Error("Function declaration name is required.");if(d.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);d.set(g.name,y)}}return d}async processAfcStream(t){var s,o,u;const d=(u=(o=(s=t.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&u!==void 0?u:bp;let m=!1,y=0;const x=await this.initAfcToolsMap(t);return(function(g,v,b){var N,C;return oi(this,arguments,function*(){for(var _,E,j,A;y<d;){m&&(y++,m=!1);const P=yield Be(g.processParamsMaybeAddMcpUsage(b)),V=yield Be(g.generateContentStreamInternal(P)),k=[],X=[];try{for(var H=!0,q=(E=void 0,fs(V)),G;G=yield Be(q.next()),_=G.done,!_;H=!0){A=G.value,H=!1;const Z=A;if(yield yield Be(Z),Z.candidates&&(!((N=Z.candidates[0])===null||N===void 0)&&N.content)){X.push(Z.candidates[0].content);for(const se of(C=Z.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(y<d&&se.functionCall){if(!se.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(se.functionCall.name)){const I=yield Be(v.get(se.functionCall.name).callTool([se.functionCall]));k.push(...I)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${se.functionCall.name}`)}}}}catch(Z){E={error:Z}}finally{try{!H&&!_&&(j=q.return)&&(yield Be(j.call(q)))}finally{if(E)throw E.error}}if(k.length>0){m=!0;const Z=new cs;Z.candidates=[{content:{role:"user",parts:k}}],yield yield Be(Z);const se=[];se.push(...X),se.push({role:"user",parts:k});const I=Bt(b.contents).concat(se);b.contents=I}else break}})})(this,x,t)}async generateContentInternal(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=pp(this.apiClient,t);return y=re("{model}:generateContent",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=yp(v),N=new cs;return Object.assign(N,b),N})}else{const g=mp(this.apiClient,t);return y=re("{model}:generateContent",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=gp(v),N=new cs;return Object.assign(N,b),N})}}async generateContentStreamInternal(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=pp(this.apiClient,t);return y=re("{model}:streamGenerateContent?alt=sse",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.requestStream({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),m.then(function(b){return oi(this,arguments,function*(){var N,C,_,E;try{for(var j=!0,A=fs(b),H;H=yield Be(A.next()),N=H.done,!N;j=!0){E=H.value,j=!1;const q=E,G=yp(yield Be(q.json()));G.sdkHttpResponse={headers:q.headers};const P=new cs;Object.assign(P,G),yield yield Be(P)}}catch(q){C={error:q}}finally{try{!j&&!N&&(_=A.return)&&(yield Be(_.call(A)))}finally{if(C)throw C.error}}})})}else{const g=mp(this.apiClient,t);return y=re("{model}:streamGenerateContent?alt=sse",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.requestStream({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}),m.then(function(b){return oi(this,arguments,function*(){var N,C,_,E;try{for(var j=!0,A=fs(b),H;H=yield Be(A.next()),N=H.done,!N;j=!0){E=H.value,j=!1;const q=E,G=gp(yield Be(q.json()));G.sdkHttpResponse={headers:q.headers};const P=new cs;Object.assign(P,G),yield yield Be(P)}}catch(q){C={error:q}}finally{try{!j&&!N&&(_=A.return)&&(yield Be(_.call(A)))}finally{if(C)throw C.error}}})})}}async embedContent(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=_T(this.apiClient,t);return y=re("{model}:predict",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=wT(v),N=new Zm;return Object.assign(N,b),N})}else{const g=ET(this.apiClient,t);return y=re("{model}:batchEmbedContents",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=MT(v),N=new Zm;return Object.assign(N,b),N})}}async generateImagesInternal(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=GT(this.apiClient,t);return y=re("{model}:predict",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=VT(v),N=new Wm;return Object.assign(N,b),N})}else{const g=kT(this.apiClient,t);return y=re("{model}:predict",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=qT(v),N=new Wm;return Object.assign(N,b),N})}}async editImageInternal(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const y=NT(this.apiClient,t);return d=re("{model}:predict",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:x.headers},v})),u.then(x=>{const g=ST(x),v=new Px;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const y=LN(this.apiClient,t);return d=re("{model}:predict",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:x.headers},v})),u.then(x=>{const g=HN(x),v=new zx;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const y=yN(this.apiClient,t);return d=re("{model}:predict",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>{const g=xN(x),v=new Ox;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const y=CN(this.apiClient,t);return d=re("{model}:predict",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u.then(x=>{const g=AN(x),v=new Yx;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=lN(this.apiClient,t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>Uu(v))}else{const g=nN(this.apiClient,t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),m.then(v=>Iu(v))}}async listInternal(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=cN(this.apiClient,t);return y=re("{models_url}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=fN(v),N=new ep;return Object.assign(N,b),N})}else{const g=uN(this.apiClient,t);return y=re("{models_url}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=dN(v),N=new ep;return Object.assign(N,b),N})}}async update(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=UN(this.apiClient,t);return y=re("{model}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>Uu(v))}else{const g=IN(this.apiClient,t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),m.then(v=>Iu(v))}}async delete(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=xT(this.apiClient,t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=bT(v),N=new tp;return Object.assign(N,b),N})}else{const g=yT(this.apiClient,t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=vT(v),N=new tp;return Object.assign(N,b),N})}}async countTokens(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=mT(this.apiClient,t);return y=re("{model}:countTokens",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=gT(v),N=new np;return Object.assign(N,b),N})}else{const g=hT(this.apiClient,t);return y=re("{model}:countTokens",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=pT(v),N=new np;return Object.assign(N,b),N})}}async computeTokens(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const y=oT(this.apiClient,t);return d=re("{model}:computeTokens",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:x.headers},v})),u.then(x=>{const g=aT(x),v=new Kx;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=KT(this.apiClient,t);return y=re("{model}:predictLongRunning",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m.then(v=>{const b=OT(v),N=new Ko;return Object.assign(N,b),N})}else{const g=YT(this.apiClient,t);return y=re("{model}:predictLongRunning",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),m.then(v=>{const b=zT(v),N=new Ko;return Object.assign(N,b),N})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gS extends xl{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const s=t.operation,o=t.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const u=s.name.split("/operations/")[0];let d;o&&"httpOptions"in o&&(d=o.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:u,config:{httpOptions:d}});return s._fromAPIResponse({apiResponse:m,isVertexAI:!0})}else{const u=await this.getVideosOperationInternal({operationName:s.name,config:o});return s._fromAPIResponse({apiResponse:u,isVertexAI:!1})}}async get(t){const s=t.operation,o=t.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const u=s.name.split("/operations/")[0];let d;o&&"httpOptions"in o&&(d=o.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:u,config:{httpOptions:d}});return s._fromAPIResponse({apiResponse:m,isVertexAI:!0})}else{const u=await this.getVideosOperationInternal({operationName:s.name,config:o});return s._fromAPIResponse({apiResponse:u,isVertexAI:!1})}}async getVideosOperationInternal(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=qx(t);return y=re("{operationName}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),m}else{const g=Gx(t);return y=re("{operationName}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),m}}async fetchPredictVideosOperationInternal(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const y=Rx(t);return d=re("{resourceName}:fetchPredictOperation",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),u}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yS(l){const t={};if(c(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(l,["data"]);s!=null&&h(t,["data"],s);const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function xS(l){const t={},s=c(l,["parts"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>ES(d))),h(t,["parts"],u)}const o=c(l,["role"]);return o!=null&&h(t,["role"],o),t}function vS(l,t,s){const o={},u=c(t,["expireTime"]);s!==void 0&&u!=null&&h(s,["expireTime"],u);const d=c(t,["newSessionExpireTime"]);s!==void 0&&d!=null&&h(s,["newSessionExpireTime"],d);const m=c(t,["uses"]);s!==void 0&&m!=null&&h(s,["uses"],m);const y=c(t,["liveConnectConstraints"]);s!==void 0&&y!=null&&h(s,["bidiGenerateContentSetup"],AS(l,y));const x=c(t,["lockAdditionalFields"]);return s!==void 0&&x!=null&&h(s,["fieldMask"],x),o}function bS(l,t){const s={},o=c(t,["config"]);return o!=null&&h(s,["config"],vS(l,o,s)),s}function TS(l){const t={};if(c(l,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(l,["fileUri"]);s!=null&&h(t,["fileUri"],s);const o=c(l,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function NS(l){const t={};if(c(l,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(l,["enableWidget"]);return s!=null&&h(t,["enableWidget"],s),t}function SS(l){const t={},s=c(l,["timeRangeFilter"]);if(s!=null&&h(t,["timeRangeFilter"],s),c(l,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function CS(l,t){const s={},o=c(l,["generationConfig"]);t!==void 0&&o!=null&&h(t,["setup","generationConfig"],o);const u=c(l,["responseModalities"]);t!==void 0&&u!=null&&h(t,["setup","generationConfig","responseModalities"],u);const d=c(l,["temperature"]);t!==void 0&&d!=null&&h(t,["setup","generationConfig","temperature"],d);const m=c(l,["topP"]);t!==void 0&&m!=null&&h(t,["setup","generationConfig","topP"],m);const y=c(l,["topK"]);t!==void 0&&y!=null&&h(t,["setup","generationConfig","topK"],y);const x=c(l,["maxOutputTokens"]);t!==void 0&&x!=null&&h(t,["setup","generationConfig","maxOutputTokens"],x);const g=c(l,["mediaResolution"]);t!==void 0&&g!=null&&h(t,["setup","generationConfig","mediaResolution"],g);const v=c(l,["seed"]);t!==void 0&&v!=null&&h(t,["setup","generationConfig","seed"],v);const b=c(l,["speechConfig"]);t!==void 0&&b!=null&&h(t,["setup","generationConfig","speechConfig"],Yu(b));const N=c(l,["thinkingConfig"]);t!==void 0&&N!=null&&h(t,["setup","generationConfig","thinkingConfig"],N);const C=c(l,["enableAffectiveDialog"]);t!==void 0&&C!=null&&h(t,["setup","generationConfig","enableAffectiveDialog"],C);const _=c(l,["systemInstruction"]);t!==void 0&&_!=null&&h(t,["setup","systemInstruction"],xS(rt(_)));const E=c(l,["tools"]);if(t!==void 0&&E!=null){let V=ci(E);Array.isArray(V)&&(V=V.map(k=>MS(ui(k)))),h(t,["setup","tools"],V)}const j=c(l,["sessionResumption"]);t!==void 0&&j!=null&&h(t,["setup","sessionResumption"],_S(j));const A=c(l,["inputAudioTranscription"]);t!==void 0&&A!=null&&h(t,["setup","inputAudioTranscription"],A);const H=c(l,["outputAudioTranscription"]);t!==void 0&&H!=null&&h(t,["setup","outputAudioTranscription"],H);const q=c(l,["realtimeInputConfig"]);t!==void 0&&q!=null&&h(t,["setup","realtimeInputConfig"],q);const G=c(l,["contextWindowCompression"]);t!==void 0&&G!=null&&h(t,["setup","contextWindowCompression"],G);const P=c(l,["proactivity"]);return t!==void 0&&P!=null&&h(t,["setup","proactivity"],P),s}function AS(l,t){const s={},o=c(t,["model"]);o!=null&&h(s,["setup","model"],Me(l,o));const u=c(t,["config"]);return u!=null&&h(s,["config"],CS(u,s)),s}function ES(l){const t={},s=c(l,["videoMetadata"]);s!=null&&h(t,["videoMetadata"],s);const o=c(l,["thought"]);o!=null&&h(t,["thought"],o);const u=c(l,["inlineData"]);u!=null&&h(t,["inlineData"],yS(u));const d=c(l,["fileData"]);d!=null&&h(t,["fileData"],TS(d));const m=c(l,["thoughtSignature"]);m!=null&&h(t,["thoughtSignature"],m);const y=c(l,["functionCall"]);y!=null&&h(t,["functionCall"],y);const x=c(l,["codeExecutionResult"]);x!=null&&h(t,["codeExecutionResult"],x);const g=c(l,["executableCode"]);g!=null&&h(t,["executableCode"],g);const v=c(l,["functionResponse"]);v!=null&&h(t,["functionResponse"],v);const b=c(l,["text"]);return b!=null&&h(t,["text"],b),t}function _S(l){const t={},s=c(l,["handle"]);if(s!=null&&h(t,["handle"],s),c(l,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function MS(l){const t={},s=c(l,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),h(t,["functionDeclarations"],g)}if(c(l,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(l,["googleSearch"]);o!=null&&h(t,["googleSearch"],SS(o));const u=c(l,["googleSearchRetrieval"]);if(u!=null&&h(t,["googleSearchRetrieval"],u),c(l,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(l,["googleMaps"]);d!=null&&h(t,["googleMaps"],NS(d));const m=c(l,["urlContext"]);m!=null&&h(t,["urlContext"],m);const y=c(l,["computerUse"]);y!=null&&h(t,["computerUse"],y);const x=c(l,["codeExecution"]);return x!=null&&h(t,["codeExecution"],x),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wS(l){const t=[];for(const s in l)if(Object.prototype.hasOwnProperty.call(l,s)){const o=l[s];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const u=Object.keys(o).map(d=>`${s}.${d}`);t.push(...u)}else t.push(s)}return t.join(",")}function DS(l,t){let s=null;const o=l.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const d=o.setup;typeof d=="object"&&d!==null?(l.bidiGenerateContentSetup=d,s=d):delete l.bidiGenerateContentSetup}else o!==void 0&&delete l.bidiGenerateContentSetup;const u=l.fieldMask;if(s){const d=wS(s);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)d?l.fieldMask=d:delete l.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&u!==null&&Array.isArray(u)&&u.length>0){const m=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let y=[];u.length>0&&(y=u.map(g=>m.includes(g)?`generationConfig.${g}`:g));const x=[];d&&x.push(d),y.length>0&&x.push(...y),x.length>0?l.fieldMask=x.join(","):delete l.fieldMask}else delete l.fieldMask}else u!==null&&Array.isArray(u)&&u.length>0?l.fieldMask=u.join(","):delete l.fieldMask;return l}class RS extends xl{constructor(t){super(),this.apiClient=t}async create(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const y=bS(this.apiClient,t);d=re("auth_tokens",y._url),m=y._query,delete y.config,delete y._url,delete y._query;const x=DS(y,t.config);return u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),u.then(g=>g)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IS(l,t){const s={},o=c(l,["name"]);return o!=null&&h(s,["_url","name"],o),s}function US(l,t){const s={},o=c(l,["name"]);return o!=null&&h(s,["_url","name"],o),s}function jS(l,t,s){const o={};if(c(l,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const u=c(l,["tunedModelDisplayName"]);if(t!==void 0&&u!=null&&h(t,["displayName"],u),c(l,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const d=c(l,["epochCount"]);t!==void 0&&d!=null&&h(t,["tuningTask","hyperparameters","epochCount"],d);const m=c(l,["learningRateMultiplier"]);if(m!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],m),c(l,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(l,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(l,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const y=c(l,["batchSize"]);t!==void 0&&y!=null&&h(t,["tuningTask","hyperparameters","batchSize"],y);const x=c(l,["learningRate"]);if(t!==void 0&&x!=null&&h(t,["tuningTask","hyperparameters","learningRate"],x),c(l,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return o}function LS(l,t,s){const o={},u=c(l,["validationDataset"]);t!==void 0&&u!=null&&h(t,["supervisedTuningSpec"],XS(u));const d=c(l,["tunedModelDisplayName"]);t!==void 0&&d!=null&&h(t,["tunedModelDisplayName"],d);const m=c(l,["description"]);t!==void 0&&m!=null&&h(t,["description"],m);const y=c(l,["epochCount"]);t!==void 0&&y!=null&&h(t,["supervisedTuningSpec","hyperParameters","epochCount"],y);const x=c(l,["learningRateMultiplier"]);t!==void 0&&x!=null&&h(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],x);const g=c(l,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&h(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const v=c(l,["adapterSize"]);if(t!==void 0&&v!=null&&h(t,["supervisedTuningSpec","hyperParameters","adapterSize"],v),c(l,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(l,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=c(l,["labels"]);return t!==void 0&&b!=null&&h(t,["labels"],b),o}function HS(l,t){const s={},o=c(l,["baseModel"]);o!=null&&h(s,["baseModel"],o);const u=c(l,["preTunedModel"]);u!=null&&h(s,["preTunedModel"],u);const d=c(l,["trainingDataset"]);d!=null&&h(s,["tuningTask","trainingData"],FS(d));const m=c(l,["config"]);return m!=null&&jS(m,s),s}function kS(l,t){const s={},o=c(l,["baseModel"]);o!=null&&h(s,["baseModel"],o);const u=c(l,["preTunedModel"]);u!=null&&h(s,["preTunedModel"],u);const d=c(l,["trainingDataset"]);d!=null&&JS(d,s);const m=c(l,["config"]);return m!=null&&LS(m,s),s}function GS(l,t){const s={},o=c(l,["name"]);return o!=null&&h(s,["_url","name"],o),s}function qS(l,t){const s={},o=c(l,["name"]);return o!=null&&h(s,["_url","name"],o),s}function VS(l,t,s){const o={},u=c(l,["pageSize"]);t!==void 0&&u!=null&&h(t,["_query","pageSize"],u);const d=c(l,["pageToken"]);t!==void 0&&d!=null&&h(t,["_query","pageToken"],d);const m=c(l,["filter"]);return t!==void 0&&m!=null&&h(t,["_query","filter"],m),o}function BS(l,t,s){const o={},u=c(l,["pageSize"]);t!==void 0&&u!=null&&h(t,["_query","pageSize"],u);const d=c(l,["pageToken"]);t!==void 0&&d!=null&&h(t,["_query","pageToken"],d);const m=c(l,["filter"]);return t!==void 0&&m!=null&&h(t,["_query","filter"],m),o}function PS(l,t){const s={},o=c(l,["config"]);return o!=null&&VS(o,s),s}function zS(l,t){const s={},o=c(l,["config"]);return o!=null&&BS(o,s),s}function OS(l,t){const s={},o=c(l,["sdkHttpResponse"]);o!=null&&h(s,["sdkHttpResponse"],o);const u=c(l,["nextPageToken"]);u!=null&&h(s,["nextPageToken"],u);const d=c(l,["tunedModels"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>fg(y))),h(s,["tuningJobs"],m)}return s}function YS(l,t){const s={},o=c(l,["sdkHttpResponse"]);o!=null&&h(s,["sdkHttpResponse"],o);const u=c(l,["nextPageToken"]);u!=null&&h(s,["nextPageToken"],u);const d=c(l,["tuningJobs"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>Lu(y))),h(s,["tuningJobs"],m)}return s}function KS(l,t){const s={},o=c(l,["name"]);o!=null&&h(s,["model"],o);const u=c(l,["name"]);return u!=null&&h(s,["endpoint"],u),s}function FS(l,t){const s={};if(c(l,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(l,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=c(l,["examples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),h(s,["examples","examples"],u)}return s}function JS(l,t,s){const o={},u=c(l,["gcsUri"]);t!==void 0&&u!=null&&h(t,["supervisedTuningSpec","trainingDatasetUri"],u);const d=c(l,["vertexDatasetResource"]);if(t!==void 0&&d!=null&&h(t,["supervisedTuningSpec","trainingDatasetUri"],d),c(l,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function fg(l,t){const s={},o=c(l,["sdkHttpResponse"]);o!=null&&h(s,["sdkHttpResponse"],o);const u=c(l,["name"]);u!=null&&h(s,["name"],u);const d=c(l,["state"]);d!=null&&h(s,["state"],Fp(d));const m=c(l,["createTime"]);m!=null&&h(s,["createTime"],m);const y=c(l,["tuningTask","startTime"]);y!=null&&h(s,["startTime"],y);const x=c(l,["tuningTask","completeTime"]);x!=null&&h(s,["endTime"],x);const g=c(l,["updateTime"]);g!=null&&h(s,["updateTime"],g);const v=c(l,["description"]);v!=null&&h(s,["description"],v);const b=c(l,["baseModel"]);b!=null&&h(s,["baseModel"],b);const N=c(l,["_self"]);return N!=null&&h(s,["tunedModel"],KS(N)),s}function Lu(l,t){const s={},o=c(l,["sdkHttpResponse"]);o!=null&&h(s,["sdkHttpResponse"],o);const u=c(l,["name"]);u!=null&&h(s,["name"],u);const d=c(l,["state"]);d!=null&&h(s,["state"],Fp(d));const m=c(l,["createTime"]);m!=null&&h(s,["createTime"],m);const y=c(l,["startTime"]);y!=null&&h(s,["startTime"],y);const x=c(l,["endTime"]);x!=null&&h(s,["endTime"],x);const g=c(l,["updateTime"]);g!=null&&h(s,["updateTime"],g);const v=c(l,["error"]);v!=null&&h(s,["error"],v);const b=c(l,["description"]);b!=null&&h(s,["description"],b);const N=c(l,["baseModel"]);N!=null&&h(s,["baseModel"],N);const C=c(l,["tunedModel"]);C!=null&&h(s,["tunedModel"],C);const _=c(l,["preTunedModel"]);_!=null&&h(s,["preTunedModel"],_);const E=c(l,["supervisedTuningSpec"]);E!=null&&h(s,["supervisedTuningSpec"],E);const j=c(l,["tuningDataStats"]);j!=null&&h(s,["tuningDataStats"],j);const A=c(l,["encryptionSpec"]);A!=null&&h(s,["encryptionSpec"],A);const H=c(l,["partnerModelTuningSpec"]);H!=null&&h(s,["partnerModelTuningSpec"],H);const q=c(l,["customBaseModel"]);q!=null&&h(s,["customBaseModel"],q);const G=c(l,["experiment"]);G!=null&&h(s,["experiment"],G);const P=c(l,["labels"]);P!=null&&h(s,["labels"],P);const V=c(l,["outputUri"]);V!=null&&h(s,["outputUri"],V);const k=c(l,["pipelineJob"]);k!=null&&h(s,["pipelineJob"],k);const X=c(l,["serviceAccount"]);X!=null&&h(s,["serviceAccount"],X);const Z=c(l,["tunedModelDisplayName"]);Z!=null&&h(s,["tunedModelDisplayName"],Z);const se=c(l,["veoTuningSpec"]);return se!=null&&h(s,["veoTuningSpec"],se),s}function QS(l,t){const s={},o=c(l,["sdkHttpResponse"]);o!=null&&h(s,["sdkHttpResponse"],o);const u=c(l,["name"]);u!=null&&h(s,["name"],u);const d=c(l,["metadata"]);d!=null&&h(s,["metadata"],d);const m=c(l,["done"]);m!=null&&h(s,["done"],m);const y=c(l,["error"]);return y!=null&&h(s,["error"],y),s}function XS(l,t){const s={},o=c(l,["gcsUri"]);o!=null&&h(s,["validationDatasetUri"],o);const u=c(l,["vertexDatasetResource"]);return u!=null&&h(s,["validationDatasetUri"],u),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $S extends xl{constructor(t){super(),this.apiClient=t,this.get=async s=>await this.getInternal(s),this.list=async(s={})=>new ms(yl.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(s),s),this.tune=async s=>{var o;if(this.apiClient.isVertexAI())if(s.baseModel.startsWith("projects/")){const u={tunedModelName:s.baseModel};!((o=s.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(u.checkpointId=s.config.preTunedModelCheckpointId);const d=Object.assign(Object.assign({},s),{preTunedModel:u});return d.baseModel=void 0,await this.tuneInternal(d)}else{const u=Object.assign({},s);return await this.tuneInternal(u)}else{const u=Object.assign({},s),d=await this.tuneMldevInternal(u);let m="";return d.metadata!==void 0&&d.metadata.tunedModel!==void 0?m=d.metadata.tunedModel:d.name!==void 0&&d.name.includes("/operations/")&&(m=d.name.split("/operations/")[0]),{name:m,state:Mu.JOB_STATE_QUEUED}}}}async getInternal(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=qS(t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>Lu(v))}else{const g=GS(t);return y=re("{name}",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>fg(v))}}async listInternal(t){var s,o,u,d;let m,y="",x={};if(this.apiClient.isVertexAI()){const g=zS(t);return y=re("tuningJobs",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=YS(v),N=new lp;return Object.assign(N,b),N})}else{const g=PS(t);return y=re("tunedModels",g._url),x=g._query,delete g._url,delete g._query,m=this.apiClient.request({path:y,queryParams:x,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(b=>{const N=b;return N.sdkHttpResponse={headers:v.headers},N})),m.then(v=>{const b=OS(v),N=new lp;return Object.assign(N,b),N})}}async cancel(t){var s,o,u,d;let m="",y={};if(this.apiClient.isVertexAI()){const x=US(t);m=re("{name}:cancel",x._url),y=x._query,delete x._url,delete x._query,await this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const x=IS(t);m=re("{name}:cancel",x._url),y=x._query,delete x._url,delete x._query,await this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(u=t.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal})}}async tuneInternal(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const y=kS(t);return d=re("tuningJobs",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:x.headers},v})),u.then(x=>Lu(x))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var s,o;let u,d="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=HS(t);return d=re("tunedModels",y._url),m=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:x.headers},v})),u.then(x=>QS(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZS{async download(t,s){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const WS=1024*1024*8,eC=3,tC=1e3,nC=2,Cu="x-goog-upload-status";async function lC(l,t,s){var o,u,d;let m=0,y=0,x=new wu(new Response),g="upload";for(m=l.size;y<m;){const b=Math.min(WS,m-y),N=l.slice(y,y+b);y+b>=m&&(g+=", finalize");let C=0,_=tC;for(;C<eC&&(x=await s.request({path:"",body:N,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(y),"Content-Length":String(b)}}}),!(!((o=x==null?void 0:x.headers)===null||o===void 0)&&o[Cu]));)C++,await sC(_),_=_*nC;if(y+=b,((u=x==null?void 0:x.headers)===null||u===void 0?void 0:u[Cu])!=="active")break;if(m<=y)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(x==null?void 0:x.json());if(((d=x==null?void 0:x.headers)===null||d===void 0?void 0:d[Cu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function iC(l){return{size:l.size,type:l.type}}function sC(l){return new Promise(t=>setTimeout(t,l))}class oC{async upload(t,s,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await lC(t,s,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await iC(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aC{create(t,s,o){return new rC(t,s,o)}}class rC{constructor(t,s,o){this.url=t,this.headers=s,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sp="x-goog-api-key";class uC{constructor(t){this.apiKey=t}async addAuthHeaders(t,s){if(t.get(Sp)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Sp,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cC="gl-node/";class dC{constructor(t){var s;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=t.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=t.apiKey;const o=wx(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion;const u=new uC(this.apiKey);this.apiClient=new QN({auth:u,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:cC+"web",uploader:new oC,downloader:new ZS}),this.models=new pS(this.apiClient),this.live=new rS(this.apiClient,u,new aC),this.batches=new Jv(this.apiClient),this.chats=new Eb(this.models,this.apiClient),this.caches=new Sb(this.apiClient),this.files=new Hb(this.apiClient),this.operations=new gS(this.apiClient),this.authTokens=new RS(this.apiClient),this.tunings=new $S(this.apiClient)}}const fC="PLACEHOLDER_API_KEY",Wo=new dC({apiKey:fC}),hC=l=>new Promise((t,s)=>{const o=new FileReader;o.readAsDataURL(l),o.onload=()=>{const u=o.result.split(",")[1];t(u)},o.onerror=u=>s(u)}),hg=async(l,t)=>{try{const s=[{text:l}];if(t){const d=await hC(t);s.push({inlineData:{mimeType:t.type,data:d}})}const o={parts:s};return(await Wo.models.generateContent({model:"gemini-2.5-flash",contents:o})).text}catch(s){return console.error("Error in AI chat:",s),`Sorry, I encountered an error: ${s instanceof Error?s.message:String(s)}`}},$n=async l=>{try{return(await Wo.models.generateContent({model:"gemini-2.5-flash",contents:l})).text}catch(t){return console.error("Error generating text:",t),`Sorry, I encountered an error: ${t instanceof Error?t.message:String(t)}`}},mC=async(l,t)=>{try{const s=[{text:l}];t&&t.length>0&&t.forEach(d=>{s.push({inlineData:{mimeType:d.mimeType,data:d.data}})});const o={parts:s};return(await Wo.models.generateContent({model:"gemini-2.5-flash",contents:o})).text}catch(s){return console.error("Error generating text with files:",s),`Sorry, I encountered an error: ${s instanceof Error?s.message:String(s)}`}},ea=async(l,t)=>{try{const s=[{text:l}];t&&t.length>0&&t.forEach(y=>{s.push({inlineData:{mimeType:y.mimeType,data:y.data}})});const o={parts:s},d=(await Wo.models.generateContent({model:"gemini-2.5-flash",contents:o,config:{responseMimeType:"application/json"}})).text,m=d.match(/```json\s*([\s\S]*?)\s*```|({[\s\S]*})/);if(m){const y=m[1]||m[2];return JSON.parse(y)}else return JSON.parse(d)}catch(s){return console.error("Error generating JSON response:",s),null}},Jo=(l,t)=>{let s=`Di y l ton b bi cnh kinh doanh ca doanh nghip:

`;s+=`=== BN  CHIN LC 18 YU T ===
`;for(const o of Object.values(l))s+=`
--- ${o.name} ---
`,o.questionAnswers.forEach(u=>{u.answer&&u.answer.trim()&&(s+=`- ${u.question}: ${u.answer}
`)});s+=`

=== 6 BIN S KIM SOT ===
`;for(const o of Object.values(t))s+=`
--- ${o.name} ---
`,o.questionAnswers.forEach(u=>{u.answer&&u.answer.trim()&&(s+=`- ${u.question}: ${u.answer}
`)}),o.aiAssessment.trim()&&(s+=`Tm tt chn on: ${o.aiAssessment}
`);return s},pC=async(l,t)=>{const s=`[NG VAI]: Bn l mt nh t vn chin lc cp cao.
[BI CNH]: Bn  c cung cp TON B BI CNH CHIN LC ca mt doanh nghip.
--- BI CNH CHUNG ---
${l}
--- HT BI CNH CHUNG ---
[NHIM V]: Da vo ton b bi cnh, hy tp trung phn tch su sc v CH MT YU T DUY NHT: "${t}". 
Hy a ra mt bi phn tch tng th, nh gi cc im mnh, im yu, cc mu thun logic (nu c) v  xut cc hnh ng chin lc c th lin quan n yu t ny.
[NH DNG U RA]: Ch tr v ni dung phn tch cho yu t ny di dng vn bn Markdown. KHNG bao gm tiu  ca yu t.`;return await $n(s)},gC=async(l,t)=>{const s=`[NG VAI]: Bn l mt nh t vn chin lc cp cao, chuyn chn on sc khe doanh nghip.
[BI CNH]: Ngi dng  cung cp mt bn t nh gi v bin s '${t}'. Ton b bi cnh doanh nghip nh sau:
---
${l}
---
[NHIM V]: Da vo ni dung trn, hy thc hin 2 vic cho CH BIN S '${t}':
1. a ra mt nhn nh trng thi: 'Good', 'Warning', hoc 'Bad'.
2. Vit mt cu tm tt (ti a 25 t) v tnh hnh ca bin s .
[NH DNG U RA BT BUC]: Tr v mt i tng JSON duy nht c 2 kha: 'status' (string) v 'assessment' (string).`;return await ea(s)||{assessment:"Li trong qu trnh chn on.",status:"Neutral"}},yC=async l=>{const t=`
[NG VAI]: Bn l mt tr l thng minh, chuyn cht lc thng tin.
[BI CNH]: Bn nhn c mt on hi thoi gia C vn AI v ngi dng.
--- VN BN GC ---
${l}
--- KT THC VN BN GC ---
[NHIM V]: Da vo vn bn trn, hy rt ra cu tr li hoc kt lun chnh, ct li nht  ghi vo mt  ghi ch. Ni dung phi sc tch, i thng vo vn  v loi b cc cu cho hi, vn phong hi thoi.
[U RA]: Ch tr v on vn bn tm tt. Khng thm bt k li dn no.`;return await $n(t)},xC=async l=>{const t=`
[NG VAI]: Bn l mt tr l cp cao, c kh nng tm tt xut sc.
[BI CNH]: Bn nhn c mt on vn bn phn tch di.
--- VN BN GC ---
${l}
--- KT THC VN BN GC ---
[NHIM V]: Da vo vn bn trn, hy tm tt n thnh mt on m t ngn gn (ti a 3-4 cu) cho mt 'Sng kin' hoc 'K hoch hnh ng' mi. Tp trung vo kt qu v hnh ng cn lm.
[U RA]: Ch tr v on vn bn tm tt. Khng thm bt k li dn no.`;return await $n(t)},vC=async(l,t)=>{const s=`[NG VAI]: Bn l mt chuyn gia hng u v qun tr hiu sut bng KPI.
[BI CNH]:
- Nhim v chnh t Ma trn Phn nhim: "${l}"
- Mc tiu chnh  t ra: "${t}"
[NHIM V]:  xut 3-5 Ch s Hiu sut Chnh (KPI) theo tiu ch SMART  o lng vic hon thnh mc tiu.
[QUY TC NH DNG U RA]: Tr v mt i tng JSON duy nht c mt kha l "kpis", gi tr l mt MNG cc i tng. Mi i tng trong mng phi c 4 kha:
1. "description": (string) M t KPI.
2. "baseline": (number) Gi tr ban u, thng l 0.
3. "target": (number) Gi tr mc tiu.
4. "unit": (string) n v tnh (v d: 'VN', '%', 'bo co').
[V D]:
{"kpis": [{"description": "Doanh thu bn hng", "baseline": 0, "target": 500000000, "unit": "VN"}, {"description": "T l khch hng hi lng", "baseline": 80, "target": 95, "unit": "%"}]}
`,o=await ea(s);return(o==null?void 0:o.kpis)||null},bC=async(l,t)=>{let s="";t.includes("4")?s="[YU CU V  SU]: BT BUC phn cp chi tit n cp 4 nu c th.":t.includes("3")?s="[YU CU V  SU]: BT BUC phn cp chi tit n cp 3 nu c th.":t.includes("2")?s="[YU CU V  SU]: BT BUC phn cp chi tit n cp 2 nu c th.":s="[YU CU V  SU]: Hy phn cp chi tit n mc ti a m bn cho l hp l.";const o=`[NG VAI]: Bn l mt nh t vn cu trc t chc bc thy, chuyn gia v m hnh qun tr ca Fredmund Malik.
[BI CNH]: Bn va phng vn v c c cc thng tin ct li v doanh nghip.
--- D LIU PHNG VN ---
${l}
--- HT D LIU ---
[NHIM V]: Da trn s am hiu su sc v qun l v TON B cc thng tin  c, hy t suy lun v  xut mt DANH SCH CNG VIC CHI TIT cn c thc hin. Danh sch ny phi c cu trc cht ch theo 2 nhm chnh:
1. **Nhim v Qun l (M A):** Da trn 5 nhim v ca F. Malik (1.  ra mc tiu; 2. T chc; 3. Ra quyt nh; 4. Gim st; 5. Pht trin v thc y con ngi).
2. **Nhim v Tc nghip (M B):** Da trn quy trnh chnh m ngi dng  m t v 9 nhm chc nng sau: 1. Marketing v thng hiu; 2. Nghin cu v Pht trin (R&D); 3. Bn hng v chm sc khch hng; 4. Thc hin dch v; 5. Ngun nhn lc; 6. Ti chnh; 7. IT v AI; 8. K TON; 9. Hnh chnh.

${s}

[QUY TC NH DNG BT BUC]:
- **Ch to 2 ct:** 'M Phn cp' v 'Tn Nhim v'.
- **Ct 'M Phn cp':** S dng cu trc m khng c du chm. Cp 1 l mt ch ci v mt ch s (v d: A1, B2). Cc cp con c to bng cch thm mt ch s (v d: A11 l con ca A1, A112 l con ca A11).
- **Ct 'Tn Nhim v':** KHNG c thm s th t (nh 1.1, 1.1.1) vo u Tn Nhim v.
- **Tiu  nhm:** Cc dng tiu  nhm cng vic (v d: 'NHIM V QUN L CHUNG') phi c in m, v ct 'M Phn cp' phi  trng.

[V D NH DNG MONG MUN]:
| M Phn cp | Tn Nhim v |
|---|---|
| | **NHIM V QUN L CHUNG** |
| A1 |  ra Mc tiu |
| A11 | Xc nh Mc tiu Chin lc Ct li |
| A111| Phn r mc tiu 'Top 10 SME Auditor' |

[NH DNG U RA BT BUC]:
Ch tr v kt qu di dng mt BNG MARKDOWN duy nht c 2 ct. KHNG thm bt k li bnh hay gii thch no khc.`;return await $n(o)},TC=async(l,t)=>{const s=`[NG VAI]: Bn l mt chuyn gia t vn t chc nhn s, bc thy v vic xy dng ma trn trch nhim QTKBP.
[BI CNH]: Bn c cung cp:
1. DANH SCH PHNG BAN: ${l.join(", ")}
2. DANH SCH CNG VIC: (mt phn c hin th bn di)
${t.split(`
`).slice(0,20).join(`
`)}
...
[NHIM V]: Hy  xut mt b QUY TC PHN NHIM CHC NNG cp cao. Cc quy tc ny s l kim ch nam  phn vai tr QTKBP (Quyt nh, Thc hin, Kim sot, Bo co, Phi hp) cho cc phng ban.
[YU CU]:
- a ra cc quy tc chung da trn chc nng in hnh ca tng phng ban (VD: Ban Gim c thng 'Q' cc nhim v chin lc, Phng Ti chnh thng 'K' cc vn  chi ph).
- Xem xt cc nhim v c th trong danh sch  a ra cc quy tc c th hn.
- Trnh by di dng cc gch u dng, r rng, sc tch.
[NH DNG U RA]: Ch tr v mt danh sch cc quy tc phn nhim dng text/markdown. KHNG to bng ma trn. KHNG thm li bnh.`;return await $n(s)},NC=async(l,t,s)=>{const o=`[NG VAI]: Bn l mt chuyn gia t vn t chc nhn s, bc thy v vic xy dng ma trn trch nhim QTKBP.
[BI CNH]: Bn c cung cp ba b thng tin:
1. **DANH SCH PHNG BAN:**
${t.join(", ")}
2. **BNG CNG VIC CUI CNG ( c ngi dng xc nhn):**
${l}
3. **QUY TC PHN CNG BT BUC T NGI DNG:**
${s}

[NHIM V]: Da trn TON B thng tin trn, hy xy dng mt Ma trn Phn cng Trch nhim (QTKBP) cp CNG TY.
- **Cu trc bng:** Dng li BNG CNG VIC, gi nguyn 5 ct u tin (MC1, MC2, MC3, MC4, Tn Nhim v). Sau , thm cc ct cho tng **PHNG BAN** trong danh sch  cho.
- **in vai tr:** Vi mi cng vic, hy in cc k t sau vo ct ca **PHNG BAN** ph hp: Q, T, K, B, P.
- **LOGIC SUY LUN:** TUN TH NGHIM NGT cc **QUY TC PHN CNG** m ngi dng  cung cp. Dng  lm kim ch nam chnh.
- **QUY TC VNG:** Lun m bo mi hng (mi cng vic chi tit, khng phi dng tiu ) ch C DUY NHT mt ch 'Q'.
[NH DNG U RA]: Ch tr v kt qu di dng mt BNG MARKDOWN duy nht. KHNG thm bt k vn bn, li gii thch hay bnh lun no khc.`;return await $n(o)},SC=async(l,t,s,o)=>{const u=t.map(m=>`- ${m.name} (Vai tr phng: ${m.role})`).join(`
`),d=`[NG VAI]: Bn l mt chuyn gia t vn t chc nhn s, bc thy v vic xy dng ma trn trch nhim QTKBP.
[BI CNH]: Bn cn phn cng chi tit cc nhim v cho cc nhn vin trong '${l}'.
--- DANH SCH NHIM V CN PHN CNG & VAI TR CA PHNG ---
${u}
--- DANH SCH NHN S TRONG PHNG ---
${s.map(m=>`- ${m}`).join(`
`)}
${o?`--- GHI CH B SUNG T NGI QUN L ---
${o}`:""}
[NHIM V]: Da vo TON B thng tin trn, hy  xut phn cng vai tr (Q, T, K, B, P) cho tng nhn vin vo tng nhim v.
[QUY TC BT BUC]:
1. Vai tr ca nhn vin phi ph hp vi vai tr chung ca phng ban. V d, nu phng l 'T', th cc nhn vin trong phng s chia nhau vai tr 'T', v c th c mt ngi l 'Q' trong phm vi phng .
2. u tin cc ch dn trong 'GHI CH B SUNG' nu c.
3. Suy lun logic da trn tn nhim v v tn/chc v nhn vin.
4. Mi nhim v phi c t nht mt 'T' (Thc hin).
5. Mi nhim v ch nn c MT 'Q' (Quyt nh).
[NH DNG U RA]: Ch tr v mt BNG MARKDOWN duy nht c 3 ct: 'Tn Nhim v', 'Tn Nhn vin', 'Vai tr'. KHNG thm bt k li bnh no khc.`;return await $n(d)},ta=l=>{if(!l)return"";const s=l.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").split(`
`);let o=!1;const u=[];return s.forEach(d=>{const m=d.trim();if(m.startsWith("### ")){o&&(u.push("</ul>"),o=!1),u.push(`<h4>${m.substring(4)}</h4>`);return}if(m.startsWith("## ")){o&&(u.push("</ul>"),o=!1),u.push(`<h3>${m.substring(3)}</h3>`);return}if(m.startsWith("# ")){o&&(u.push("</ul>"),o=!1),u.push(`<h2>${m.substring(2)}</h2>`);return}if(m.startsWith("* ")||m.startsWith("- ")){const y=`<li>${m.substring(2)}</li>`;o||(u.push("<ul>"),o=!0),u.push(y)}else o&&(u.push("</ul>"),o=!1),m.length>0&&u.push(`<p>${d}</p>`)}),o&&u.push("</ul>"),u.join("")},CC=l=>{if(!l)return{headers:[],rows:[]};const t=l.split(`
`).map(u=>u.trim()).filter(u=>u.startsWith("|"));if(t.length<2)return{headers:[],rows:[]};const s=t[0].split("|").map(u=>u.trim()).filter(Boolean),o=t.slice(2).map(u=>u.split("|").map(d=>d.trim()).filter((d,m)=>m>0&&m<=s.length));return{headers:s,rows:o}},mg=l=>{const{rows:t}=CC(l);return t.length===0?[]:t.map((o,u)=>{const d=o[0]||"",m=o[1]||"",y=!d&&m.includes("**"),x=m.replace(/\*\*/g,"");let g="",v="",b="",N="";return d&&(d.length>=2&&(g=d.substring(0,2)),d.length>=3&&(v=d.substring(0,3)),d.length>=4&&(b=d.substring(0,4)),d.length>=5&&(N=d.substring(0,5))),{id:`task-import-${Date.now()}-${u}`,rowNumber:u+1,mc1:g,mc2:v,mc3:b,mc4:N,name:x,isGroupHeader:y,assignments:{}}})},Cp=({title:l,reportContent:t,setReportContent:s,strategicModel:o,sixVariablesModel:u,analysisType:d,shouldStartGeneration:m})=>{const[y,x]=w.useState("idle"),[g,v]=w.useState(0),[b,N]=w.useState(""),C=w.useMemo(()=>d==="18factors"?Object.entries(ds).map(([A])=>A):gl.map(A=>A.name),[d]);w.useEffect(()=>{m&&(v(0),x("running"))},[m,s]),w.useEffect(()=>{if(y!=="running")return;if(g>=C.length){x("completed"),N("Hon tt!");return}let A=!1;return(async()=>{const q=C[g];N(`ang x l yu t ${g+1}/${C.length}: ${q}`);try{if(d==="18factors"){const G=await pC(Jo(o,u),q);if(!A){const P={id:q,content:G};s(V=>[...V,P])}}else{const G=await gC(Jo(o,u),q);if(!A){const P={id:q,content:G.assessment,status:G.status};s(V=>[...V,P])}}A||v(G=>G+1)}catch(G){console.error("Error processing factor:",G);const P={id:q,content:`**Li:** Khng th phn tch yu t ny. ${G instanceof Error?G.message:""}`};s(V=>[...V,P]),A||v(V=>V+1)}})(),()=>{A=!0}},[y,g,C,d,o,u,s]);const _=()=>{y==="running"?(x("paused"),N(" tm dng...")):(y==="paused"||(s([]),v(0)),x("running"))},E=()=>{switch(y){case"running":return"Tm dng";case"paused":return"Tip tc";case"completed":return"To li Bo co";case"idle":default:return`To ${l}`}},j={Good:"text-green-700 bg-green-100",Warning:"text-yellow-700 bg-yellow-100",Bad:"text-red-700 bg-red-100",Neutral:"text-slate-700 bg-slate-100"};return r.jsxs("div",{className:"p-6 h-full flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[r.jsx("h2",{className:"text-2xl font-bold",children:l}),r.jsxs("button",{onClick:_,className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 disabled:bg-slate-400 transition-colors",children:[r.jsx(en,{}),r.jsx("span",{className:"ml-2",children:E()})]})]}),(y==="running"||y==="paused")&&r.jsx("p",{className:"text-sm text-center mb-2 text-slate-600 animate-pulse",children:b}),r.jsxs("div",{className:"bg-slate-100 p-4 rounded-lg shadow-inner flex-1 overflow-y-auto",children:[t.length===0&&y!=="running"&&r.jsx("div",{className:"flex justify-center items-center h-full",children:r.jsx("p",{className:"text-center text-slate-500",children:"Nhn nt  trn  bt u to phn tch."})}),t.length>0&&r.jsx("div",{className:"space-y-4",children:t.map(A=>r.jsxs("div",{className:"p-4 border rounded-lg bg-white shadow-sm",children:[r.jsxs("h4",{className:"font-bold text-blue-800 text-base flex justify-between items-center",children:[r.jsx("span",{children:A.id}),A.status&&r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${j[A.status]}`,children:A.status})]}),r.jsx("div",{className:"prose prose-sm max-w-none mt-2 text-slate-700",dangerouslySetInnerHTML:{__html:ta(A.content)}})]},A.id))})]})]})},Go=({data:l,title:t})=>{if(!l||l.length===0)return r.jsx("p",{className:"text-sm text-slate-500 italic mt-2",children:t?`Khng c d liu cho ${t}.`:"Khng c d liu."});const s=Object.keys(l[0]);return r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm border border-slate-200",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsx("tr",{children:s.map(o=>r.jsx("th",{className:"p-2 border-b border-slate-300 text-left font-semibold text-slate-700",children:o.replace(/_/g," ")},o))})}),r.jsx("tbody",{children:l.map((o,u)=>r.jsx("tr",{className:"hover:bg-slate-50",children:s.map(d=>r.jsx("td",{className:"p-2 border-b border-slate-200 align-top",children:String(o[d])},`${u}-${d}`))},u))})]})})},AC=({strategicModel:l,sixVariablesModel:t,shouldStartGeneration:s,report:o,setReport:u})=>{const[d,m]=w.useState(!1),y=w.useCallback(async()=>{m(!0);const v=`[NG VAI]: Bn l mt nh t vn qun tr cp cao, c kh nng tng hp cc vn  phc tp thnh mt bo co chin lc sc tch, r rng v mang tnh nh hng.
[BI CNH]: Bn c ton b d liu ghi ch ca doanh nghip v 18 yu t chin lc v 6 bin s kim sot.
--- D LIU Y  ---
${Jo(l,t)}
--- KT THC D LIU ---
[NHIM V]: Da vo TON B thng tin trn, hy to ra mt "Bng Chin lc" hon chnh.
[NH DNG U RA BT BUC]: Tr v mt i tng JSON duy nht, khng c bt k vn bn no khc, vi cu trc sau:
{
  "executiveSummary": "Mt on vn tng hp (khong 3-5 cu) v tnh hnh chung, v th v thch thc ln nht ca doanh nghip.",
  "strategicFocusAreas": [
    { "id": "ID ca Yu t/Bin s quan trng nht 1", "reason": "L do ti sao y l trng tm chin lc." },
    { "id": "ID ca Yu t/Bin s quan trng nht 2", "reason": "L do..." }
  ],
  "strategicLevers": [
    { "focusAreaId": "ID ca Trng tm 1", "leverDescription": " xut 1-2 'n by chin lc' (hnh ng cp cao)  gii quyt trng tm ny." },
    { "focusAreaId": "ID ca Trng tm 2", "leverDescription": " xut cho trng tm 2..." }
  ],
  "conflictAnalysis": [
    { "conflict": "Ch ra 1-2 mu thun logic hoc im thiu nht qun nghim trng nht.", "recommendation": " xut ngn gn  gii quyt mu thun." }
  ]
}`,b=await ea(v);b?u(b):alert("AI khng th to bo co. Vui lng th li."),m(!1)},[l,t,u]);w.useEffect(()=>{s&&y()},[s,y]);const x=()=>{if(!(o!=null&&o.strategicFocusAreas))return[];const g=new Set(o.strategicFocusAreas.map(b=>b.id)),v=[];return Object.values(l).forEach(b=>{(g.has(b.id)||b.name&&g.has(b.name))&&b.initiatives.forEach(N=>{v.push({"Sng kin":N.name,"Ngi ph trch":N.owner,"Thi hn":N.dueDate,"Tin ":`${N.currentProgress}%`,"Lin quan n":b.name})})}),v};return r.jsxs("div",{className:"p-6 bg-slate-50 h-full flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Bng Chin lc"}),r.jsxs("button",{onClick:y,disabled:d,className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 disabled:bg-slate-400 transition-colors",children:[r.jsx(en,{}),r.jsx("span",{className:"ml-2",children:d?"ang to...":"AI Tng hp Bng Chin lc"})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto bg-white p-6 rounded-lg shadow-inner border border-slate-200",children:[!o&&!d&&r.jsx("div",{className:"flex h-full items-center justify-center",children:r.jsx("p",{className:"text-slate-500 text-center",children:'Nhn nt "AI Tng hp"  to bo co chin lc da trn d liu  nhp.'})}),d&&r.jsx("div",{className:"flex h-full items-center justify-center",children:r.jsx("p",{className:"text-slate-500 animate-pulse",children:"AI ang phn tch v tng hp... Vui lng i trong giy lt."})}),o&&r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-blue-800 border-b pb-2 mb-3",children:"1. nh v Chin lc (Tm tt)"}),r.jsx("p",{className:"text-slate-700 leading-relaxed",children:o.executiveSummary})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-blue-800 border-b pb-2 mb-3",children:"2. Cc Trng tm Chin lc"}),r.jsx(Go,{data:o.strategicFocusAreas.map(g=>({"Trng tm":g.id,"L do":g.reason}))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-blue-800 border-b pb-2 mb-3",children:"3. Cc n by Chin lc"}),r.jsx(Go,{data:o.strategicLevers.map(g=>({"Thuc trng tm":g.focusAreaId,"n by chin lc":g.leverDescription}))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-blue-800 border-b pb-2 mb-3",children:"4. Phn tch Mu thun & Ri ro"}),r.jsx(Go,{data:o.conflictAnalysis.map(g=>({"Mu thun / Ri ro":g.conflict," xut":g.recommendation}))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-blue-800 border-b pb-2 mb-3",children:"5. Cc Sng kin Dn dt"}),r.jsx(Go,{data:x(),title:"Sng kin"})]})]})]})]})},EC=({strategicModel:l,sixVariablesModel:t,selectedNodeId:s,selectedVariableId:o,onNewResponse:u})=>{const[d,m]=w.useState([]),[y,x]=w.useState(""),[g,v]=w.useState(!1),b=w.useRef(null),N=()=>{var E;(E=b.current)==null||E.scrollIntoView({behavior:"smooth"})};w.useEffect(N,[d]);const C=async()=>{if(!y.trim()||g)return;const E={role:"user",content:y};m(V=>[...V,E]),x(""),v(!0);const j=Jo(l,t);let A="Chng ta ang xem xt bi cnh chung.";if(s)A=`[BI CNH THO LUN HIN TI]: Chng ta ang tp trung vo yu t '${s}'.`;else if(o){const V=t[o];A=`[BI CNH THO LUN HIN TI]: Chng ta ang tp trung vo bin s '${V.name}'.
Ghi ch ca ngi dng v bin s ny:
${V.questionAnswers.map(k=>k.answer).filter(Boolean).join(`
`)}`}const H=d.map(V=>V.role==="user"?`[NGI DNG HI]: '${V.content}'`:V.role==="ai"?`[AI TR LI]:
${V.content}`:"").join(`

`),q=`[NG VAI]: Bn l mt c vn chin lc AI, chuyn su v m hnh ca Fredmund Malik.
[TON B BI CNH DOANH NGHIP]:
${j}
---
${A}
[LCH S HI THOI GN Y]:
${H}
---
[NHIM V]: Da vo TON B bi cnh trn, hy tr li cu hi sau ca ngi dng mt cch chi tit, su sc v mang tnh hnh ng.
[CU HI CA NGI DNG]: ${y}`,G=await $n(q);u(G);const P={role:"ai",content:G,isMarkdown:!0};m(V=>[...V,P]),v(!1)},_=({msg:E})=>{const j=E.role==="user",A=E.isMarkdown?ta(E.content):E.content.replace(/\n/g,"<br />");return r.jsx("div",{className:`flex ${j?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`max-w-md p-3 rounded-lg shadow-sm ${j?"bg-blue-500 text-white":"bg-slate-200 text-slate-800"}`,children:r.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:A}})})})};return r.jsxs("div",{className:"flex flex-col h-full w-full bg-white",children:[r.jsx("header",{className:"flex items-center justify-between p-3 border-b border-slate-200 flex-shrink-0",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(en,{}),r.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"C vn AI"})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.map((E,j)=>r.jsx(_,{msg:E},j)),g&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"p-3 rounded-lg shadow-sm bg-slate-200 text-slate-500 italic animate-pulse",children:"AI ang suy ngh..."})}),r.jsx("div",{ref:b})]}),r.jsx("footer",{className:"p-4 border-t border-slate-200 bg-white flex-shrink-0",children:r.jsxs("div",{className:"relative",children:[r.jsx("textarea",{value:y,onChange:E=>x(E.target.value),onKeyDown:E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),C())},placeholder:"t cu hi cho C vn AI...",rows:2,className:"w-full p-3 pr-14 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 resize-none",disabled:g}),r.jsx("div",{className:"absolute right-2 bottom-2 flex space-x-1",children:r.jsx("button",{onClick:C,disabled:g||!y.trim(),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed",children:r.jsx(Gu,{})})})]})})]})},_C=l=>new Promise((t,s)=>{const o=new FileReader;o.readAsDataURL(l),o.onload=()=>{const u=o.result.split(",")[1];t(u)},o.onerror=u=>s(u)}),MC=({onClose:l,setStrategicModel:t,setSixVariablesModel:s})=>{const[o,u]=w.useState("All"),[d,m]=w.useState("web"),[y,x]=w.useState([]),[g,v]=w.useState(""),[b,N]=w.useState(!1),[C,_]=w.useState(""),[E,j]=w.useState({}),A=G=>{G.target.files&&x(Array.from(G.target.files))},H=async()=>{if(!g.trim()){alert("Vui lng nhp Tn Cng ty hoc Ch .");return}if(d==="file"&&y.length===0){alert("Vui lng chn t nht mt file  lm ng cnh.");return}N(!0),_("Bt u qu trnh..."),j({});let G;if(d==="file"){_("ang x l file...");const X=y.map(async Z=>({mimeType:Z.type,data:await _C(Z)}));G=await Promise.all(X)}const P=o==="All"?[...Object.keys(ds),...gl.map(X=>X.name)]:o==="StrategyMap"?Object.keys(ds):gl.map(X=>X.name),V={...ds};gl.forEach(X=>{V[X.name]=X.questions});let k={};for(let X=0;X<P.length;X++){const Z=P[X];_(`ang x l yu t ${X+1}/${P.length}: ${Z}`);const se=V[Z];let I=`[NG VAI]: Bn l mt nh t vn chin lc, ang nghin cu v cng ty/ch : "${g}".
[NHIM V]: Da trn kin thc ca bn v tm kim trn internet, hy tr li TNG cu hi sau y mt cch sc tch cho yu t "${Z}".
[DANH SCH CU HI]:
${se.map(F=>`- ${F}`).join(`
`)}
[NH DNG U RA]: Tr v mt i tng JSON vi key l "answers" v value l mt mng cc chui (string), mi chui l cu tr li tng ng vi mt cu hi theo ng th t.`;d==="file"&&(I=`[NG VAI]: Bn l mt tr l phn tch, c kh nng c hiu v tng hp thng tin t cc ti liu ni b c cung cp  tr li cc cu hi chin lc.
[BI CNH]: Bn  c cung cp mt hoc nhiu file ti liu v ch  "${g}".
[NHIM V]: Da CH YU vo ni dung cc file  cho, hy tr li TNG cu hi sau y mt cch sc tch cho yu t "${Z}". Nu khng c thng tin, hy ghi r.
[DANH SCH CU HI]:
${se.map(F=>`- ${F}`).join(`
`)}
[NH DNG U RA]: Tr v mt i tng JSON vi key l "answers" v value l mt mng cc chui (string), mi chui l cu tr li tng ng vi mt cu hi theo ng th t.`);const D=await ea(I,G);D&&D.answers?(k[Z]=D.answers,j({...k})):(k[Z]=se.map(()=>"(AI khng th to cu tr li)"),j({...k}))}_("Hon tt!"),N(!1)},q=()=>{t(G=>{const P=JSON.parse(JSON.stringify(G));return Object.keys(E).forEach(V=>{if(P[V]){const k=E[V];for(let X=0;X<Math.min(P[V].questionAnswers.length,k.length);X++)P[V].questionAnswers[X].answer=k[X]}}),P}),s(G=>{const P=JSON.parse(JSON.stringify(G));return Object.keys(E).forEach(V=>{const k=gl.find(X=>X.name===V);if(k&&P[k.id]){const X=E[V];for(let Z=0;Z<Math.min(P[k.id].questionAnswers.length,X.length);Z++)P[k.id].questionAnswers[Z].answer=X[Z]}}),P}),l()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl flex flex-col",style:{height:"90vh"},children:[r.jsx("header",{className:"p-4 border-b",children:r.jsx("h2",{className:"text-xl font-bold",children:"AI in D liu T ng"})}),r.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"1. Chn mu cn in:"}),r.jsxs("select",{value:o,onChange:G=>u(G.target.value),className:"w-full mt-1 p-2 border border-slate-300 rounded-md",children:[r.jsx("option",{value:"All",children:"C Bn  Chin lc & 6 Bin s"}),r.jsx("option",{value:"StrategyMap",children:"Ch Bn  Chin lc (18 Yu t)"}),r.jsx("option",{value:"SixVariables",children:"Ch 6 Bin s Kim sot"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"2. Nhp Tn Cng ty / Ch :"}),r.jsx("input",{type:"text",value:g,onChange:G=>v(G.target.value),className:"w-full mt-1 p-2 border border-slate-300 rounded-md",placeholder:"V d: Vinamilk"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"3. Chn Ngun d liu cho AI:"}),r.jsxs("select",{value:d,onChange:G=>m(G.target.value),className:"w-full mt-1 p-2 border border-slate-300 rounded-md",children:[r.jsx("option",{value:"web",children:"Nghin cu trn Internet (Mc nh)"}),r.jsx("option",{value:"file",children:"S dng File Ti ln lm Ng cnh"})]})]}),d==="file"&&r.jsxs("div",{className:"p-4 border border-dashed rounded-md",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ti ln cc file ng cnh (PDF, DOCX, XLSX, TXT...):"}),r.jsx("input",{type:"file",multiple:!0,onChange:A,className:"w-full text-sm"}),y.length>0&&r.jsx("ul",{className:"mt-2 text-xs list-disc list-inside",children:y.map(G=>r.jsx("li",{children:G.name},G.name))})]}),r.jsxs("button",{onClick:H,disabled:b,className:"w-full flex items-center justify-center p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-slate-400",children:[r.jsx(en,{})," ",r.jsx("span",{className:"ml-2",children:b?"ang x l...":"Bt u Nghin cu & in d liu"})]}),C&&r.jsx("p",{className:"text-sm text-center mt-2 text-slate-600",children:C}),r.jsxs("div",{className:"mt-4 border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Kt qu xem trc:"}),r.jsxs("div",{className:"h-64 overflow-y-auto p-2 bg-slate-50 border rounded-md",children:[Object.keys(E).length===0&&!b&&r.jsx("p",{className:"text-slate-500 text-center",children:"Kt qu s hin  y..."}),Object.entries(E).map(([G,P])=>r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"font-bold text-sm text-blue-700",children:G}),r.jsx("ul",{className:"list-disc list-inside text-xs text-slate-600 pl-2",children:Array.isArray(P)&&P.map((V,k)=>r.jsx("li",{className:"truncate",children:V},k))})]},G))]})]})]}),r.jsxs("footer",{className:"p-4 border-t bg-slate-50 flex justify-end space-x-2",children:[r.jsx("button",{onClick:l,className:"px-4 py-2 bg-slate-200 rounded-md hover:bg-slate-300",children:"Hy b"}),r.jsx("button",{onClick:q,disabled:b||Object.keys(E).length===0,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-slate-400",children:"p dng vo Ghi ch"})]})]})})},wC=({initiative:l,nodeId:t,onClose:s,onSave:o})=>{const[u,d]=w.useState(""),[m,y]=w.useState(""),[x,g]=w.useState(""),[v,b]=w.useState(""),[N,C]=w.useState("Mi to");w.useEffect(()=>{l&&(d(l.name),y(l.owner),g(l.dueDate),b(l.description),C(l.status))},[l]);const _=E=>{if(E.preventDefault(),!u.trim()||!m.trim()||!x.trim()){alert("Vui lng in Tn Sng kin, Ngi ph trch v Thi hn.");return}const j={id:(l==null?void 0:l.id)||`initiative-${Date.now()}`,name:u,owner:m,dueDate:x,status:N,progressHistory:(l==null?void 0:l.progressHistory)||[],description:v,currentProgress:(l==null?void 0:l.currentProgress)||0,latestStatusComment:(l==null?void 0:l.latestStatusComment)||"Newly created."};o(t,j),s()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:r.jsxs("form",{onSubmit:_,className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg space-y-4",children:[r.jsxs("h2",{className:"text-xl font-bold mb-4",children:[l?"Chnh sa":"To"," Sng kin Chin lc"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tn Sng kin"}),r.jsx("input",{type:"text",value:u,onChange:E=>d(E.target.value),className:"w-full mt-1 p-2 border border-gray-300 rounded-md",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ngi ph trch"}),r.jsx("input",{type:"text",value:m,onChange:E=>y(E.target.value),className:"w-full mt-1 p-2 border border-gray-300 rounded-md",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Thi hn"}),r.jsx("input",{type:"date",value:x,onChange:E=>g(E.target.value),className:"w-full mt-1 p-2 border border-gray-300 rounded-md",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Trng thi"}),r.jsxs("select",{value:N,onChange:E=>C(E.target.value),className:"w-full mt-1 p-2 border border-gray-300 rounded-md",children:[r.jsx("option",{children:"Mi to"}),r.jsx("option",{children:"ang thc hin"}),r.jsx("option",{children:"Hon thnh"}),r.jsx("option",{children:"Tm dng"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"M t"}),r.jsx("textarea",{rows:4,value:v,onChange:E=>b(E.target.value),className:"w-full mt-1 p-2 border border-gray-300 rounded-md"})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Hy"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Lu"})]})]})})},DC=({initiative:l,onClose:t,onSave:s})=>{const[o,u]=w.useState(l.currentProgress||0),[d,m]=w.useState(""),[y,x]=w.useState(""),g=v=>{if(v.preventDefault(),!d.trim()||!y.trim()){alert("Vui lng in y  cc trng thng tin.");return}const b={id:`update-${Date.now()}`,date:new Date().toISOString().split("T")[0],progressPercentage:o,comment:d,author:y};s(b),t()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[r.jsxs("h2",{className:"text-xl font-bold mb-4",children:['Ghi nhn Tin  cho "',l.name,'"']}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"progress",className:"block text-sm font-medium text-gray-700",children:["Tin  (",o,"%)"]}),r.jsx("input",{id:"progress",type:"range",min:"0",max:"100",value:o,onChange:v=>u(Number(v.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700",children:"Ghi ch"}),r.jsx("textarea",{id:"comment",rows:4,value:d,onChange:v=>m(v.target.value),className:"w-full mt-1 p-2 border border-gray-300 rounded-md",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"author",className:"block text-sm font-medium text-gray-700",children:"Ngi cp nht"}),r.jsx("input",{id:"author",type:"text",value:y,onChange:v=>x(v.target.value),className:"w-full mt-1 p-2 border border-gray-300 rounded-md",required:!0})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Hy"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Lu Cp nht"})]})]})]})})},Ap=()=>{const[l,t]=w.useState(ox),[s,o]=w.useState(ax),[u,d]=w.useState("map"),[m,y]=w.useState("1: Vn  ca Khch hng"),[x,g]=w.useState(null),[v,b]=w.useState(!1),[N,C]=w.useState(""),[_,E]=w.useState(!1),[j,A]=w.useState(null),[H,q]=w.useState(null),[G,P]=w.useState(0),[V,k]=w.useState(0),[X,Z]=w.useState(0),[se,I]=w.useState([]),[D,F]=w.useState([]),[le,oe]=w.useState(null),O=w.useRef(0),ee=w.useRef(0),ne=w.useRef(0),ue=w.useRef(null),[me,R]=w.useState(!1),J=w.useRef(null),[ie,te]=w.useState(Date.now()),de=w.useMemo(()=>m?l[m]:x?s[x]:null,[m,x,l,s]),pe=w.useCallback(ge=>{y(ge),g(null)},[]),Ce=w.useCallback(ge=>{g(ge),y(null)},[]),Oe=w.useCallback((ge,De)=>{t(Pe=>({...Pe,[ge]:{...Pe[ge],...De}}))},[]),Ge=w.useCallback((ge,De)=>{o(Pe=>({...Pe,[ge]:{...Pe[ge],...De}}))},[]),Pt=(ge,De)=>{if(m&&l[m]){const Pe=[...l[m].questionAnswers];Pe[ge].answer=De,Oe(m,{questionAnswers:Pe})}else if(x&&s[x]){const Pe=[...s[x].questionAnswers];Pe[ge].answer=De,Ge(x,{questionAnswers:Pe})}},zt=async()=>{var Pe;if(!N.trim()||!de||de.questionAnswers.length===0)return;const ge=await yC(N),De=((Pe=de.questionAnswers[0])==null?void 0:Pe.answer)||"";Pt(0,(De?De+`

`:"")+`[AI Ghi ch]: ${ge}`)},fi=async()=>{if(!m){alert("Vui lng chn mt Yu t trn Bn  Chin lc trc.");return}const ge=l[m],De={id:`initiative-${Date.now()}`,name:`Sng kin mi cho "${ge.name}"`,description:N?await xC(N):"",owner:"",dueDate:new Date().toISOString().split("T")[0],status:"Mi to",currentProgress:0,progressHistory:[],latestStatusComment:N?"Ni dung ban u c gi  bi AI.":"c to th cng."};A({nodeId:m,initiative:De})},ps=(ge,De)=>{const Pe=l[ge],wt=Pe.initiatives.findIndex(Dt=>Dt.id===De.id),nn=[...Pe.initiatives];wt>-1?nn[wt]=De:nn.push(De),Oe(ge,{initiatives:nn}),wt===-1&&(alert('Sng kin mi  c to trong tab "K hoch Hnh ng".'),d("action-plan"))},tn=(ge,De,Pe)=>{const wt=l[ge],nn=wt.initiatives.findIndex(Dt=>Dt.id===De);if(nn>-1){const Dt={...wt.initiatives[nn]},vs=[...Dt.progressHistory,Pe],bs=vs.sort((ct,Jt)=>new Date(Jt.date).getTime()-new Date(ct.date).getTime())[0];Dt.progressHistory=vs,Dt.currentProgress=bs.progressPercentage,Dt.latestStatusComment=bs.comment;const Sn=[...wt.initiatives];Sn[nn]=Dt,Oe(ge,{initiatives:Sn})}},hi=()=>{F([]),d("analysis-6"),k(Date.now())},mi=()=>{I([]),d("analysis-18"),P(Date.now())},ia=()=>{oe(null),d("strategy-board"),Z(Date.now())},gs=()=>{alert("Ghi ch  c lu!")},pi=()=>{var ge;return(ge=ue.current)==null?void 0:ge.click()},gi=()=>{window.confirm("Bn c chc mun xa lch s tr chuyn khng?")&&te(Date.now()),R(!1)},vl=G>O.current;vl&&(O.current=G);const ys=V>ee.current;ys&&(ee.current=V);const xs=X>ne.current;xs&&(ne.current=X);const ut=()=>{switch(u){case"action-plan":return r.jsx(hx,{strategicModel:l,onUpdateNode:Oe,onEditInitiative:(ge,De)=>A({nodeId:ge,initiative:De}),onLogProgress:(ge,De)=>q({nodeId:ge,initiative:De})});case"strategy-board":return r.jsx(AC,{strategicModel:l,sixVariablesModel:s,shouldStartGeneration:xs,report:le,setReport:oe});case"analysis-18":return r.jsx(Cp,{title:"Phn tch 18 Yu t",reportContent:se,setReportContent:I,strategicModel:l,sixVariablesModel:s,analysisType:"18factors",shouldStartGeneration:vl});case"analysis-6":return r.jsx(Cp,{title:"Chn on 6 Bin s",reportContent:D,setReportContent:F,strategicModel:l,sixVariablesModel:s,analysisType:"6variables",shouldStartGeneration:ys});case"map":default:return r.jsx(fx,{strategicModel:l,sixVariablesModel:s,selectedNodeId:m,selectedVariableId:x,onNodeSelect:pe,onVariableSelect:Ce})}};return r.jsxs("div",{className:"h-full w-full flex flex-col bg-slate-200 text-sm",children:[v&&r.jsx(MC,{onClose:()=>b(!1),setStrategicModel:t,setSixVariablesModel:o}),j&&r.jsx(wC,{nodeId:j.nodeId,initiative:j.initiative,onClose:()=>A(null),onSave:ps}),H&&r.jsx(DC,{initiative:H.initiative,onClose:()=>q(null),onSave:ge=>tn(H.nodeId,H.initiative.id,ge)}),r.jsx("header",{className:"flex-shrink-0 bg-white border-b p-2 flex justify-between items-center",children:r.jsx("div",{className:"flex items-center space-x-1",children:["map","action-plan","strategy-board","analysis-18","analysis-6"].map(ge=>{const De={map:"Bn  & Chn on","action-plan":"K hoch Hnh ng","strategy-board":"Bng Chin lc","analysis-18":"Bo co 18 Yu t","analysis-6":"Bo co 6 Bin s"};return r.jsx("button",{onClick:()=>d(ge),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${u===ge?"bg-blue-800 text-white":"text-slate-600 hover:bg-slate-100"}`,children:De[ge]},ge)})})}),r.jsxs("div",{className:"flex-1 flex min-h-0",children:[r.jsx("main",{className:"flex-1 min-w-0",children:ut()}),r.jsxs("aside",{className:"w-[550px] flex-shrink-0 border-l border-slate-300 flex flex-col bg-slate-100",children:[r.jsxs("div",{className:`collapsible-panel flex-1 flex-col min-h-0 ${_?"collapsed":"flex"}`,children:[r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[r.jsx("h2",{className:"text-lg font-bold text-slate-800",children:(de==null?void 0:de.name)||"Chn mt Yu t hoc Bin s"}),de?de.questionAnswers.map((ge,De)=>r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-600",children:ge.question}),r.jsx("textarea",{value:ge.answer,onChange:Pe=>Pt(De,Pe.target.value),rows:3,className:"w-full p-2 mt-1 border border-slate-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500"})]},De)):r.jsx("p",{className:"text-slate-500 text-center p-4",children:"Vui lng chn mt yu t t bn   xem chi tit."})]}),r.jsx("div",{className:"flex-shrink-0 p-4 border-t border-b border-slate-300 bg-white",children:r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[r.jsx("button",{onClick:gs,className:"px-3 py-2 bg-slate-100 text-slate-700 rounded-md hover:bg-slate-200 font-medium transition-colors",children:"Lu Ghi ch"}),r.jsx("button",{onClick:()=>b(!0),className:"px-3 py-2 bg-slate-100 text-slate-700 rounded-md hover:bg-slate-200 font-medium transition-colors",children:"AI in D liu..."}),r.jsx("button",{onClick:mi,className:"px-3 py-2 bg-slate-100 text-slate-700 rounded-md hover:bg-slate-200 font-medium transition-colors",children:"AI Phn tch 18 Yu t"}),r.jsx("button",{onClick:hi,className:"px-3 py-2 bg-slate-100 text-slate-700 rounded-md hover:bg-slate-200 font-medium transition-colors",children:"AI Chn on 6 Bin s"}),r.jsx("button",{onClick:ia,className:"px-3 py-2 bg-blue-100 text-blue-800 rounded-md hover:bg-blue-200 col-span-2 font-semibold transition-colors",children:"AI Tng hp Bng Chin lc"})]})})]}),r.jsx("div",{className:`flex flex-col min-h-0 flex-shrink-0 ${_?"flex-1":"h-[40%]"}`,children:r.jsx(EC,{strategicModel:l,sixVariablesModel:s,selectedNodeId:m,selectedVariableId:x,onNewResponse:C},ie)}),r.jsxs("div",{className:"flex-shrink-0 p-2 bg-white flex items-center justify-start space-x-2 text-xs border-t",children:[r.jsx("input",{type:"file",ref:ue,className:"hidden",onChange:()=>{alert("Chc nng nh km file ang c pht trin.")}}),r.jsxs("button",{onClick:pi,className:"flex items-center space-x-1 px-2 py-1 rounded hover:bg-slate-100 text-slate-600",children:[r.jsx(hs,{className:"w-4 h-4"})," ",r.jsx("span",{children:"nh km File"})]}),r.jsx("button",{onClick:()=>E(ge=>!ge),className:"flex items-center space-x-1 px-2 py-1 rounded hover:bg-slate-100 text-slate-600",children:r.jsx("span",{children:_?"Thu gn Chat":"M rng Chat"})}),r.jsx("button",{onClick:zt,className:"flex items-center space-x-1 px-2 py-1 rounded hover:bg-slate-100 text-slate-600 disabled:opacity-50",disabled:!N,children:r.jsx("span",{children:" p dng Ghi ch"})}),r.jsxs("button",{onClick:fi,className:"flex items-center space-x-1 px-2 py-1 rounded hover:bg-slate-100 text-slate-600 disabled:opacity-50",disabled:!m,children:[r.jsx(Qn,{className:"w-4 h-4"})," ",r.jsx("span",{children:"To Sng kin"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{ref:J,onClick:()=>R(ge=>!ge),className:"flex items-center space-x-1 px-2 py-1 rounded hover:bg-slate-100 text-slate-600",children:r.jsx("span",{children:"Ty chn..."})}),me&&r.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-48 bg-white border border-slate-200 rounded-md shadow-lg z-10",children:r.jsx("button",{onClick:gi,className:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"Xa lch s tr chuyn"})})]})]})]})]})]})},RC=({isOpen:l,onClose:t,departments:s,tasksMarkdown:o,onGenerate:u})=>{const[d,m]=w.useState(""),[y,x]=w.useState(!1),g=async()=>{x(!0);const b=s.map(N=>N.name);try{const N=await TC(b,o);m(N)}catch(N){console.error("Failed to suggest assignment rules:",N),alert(" c li xy ra khi AI gi  quy tc. Vui lng th li.")}finally{x(!1)}},v=()=>{if(!d.trim()){alert("Vui lng nhp hoc  AI gi  quy tc phn nhim trc khi to ma trn.");return}u(d)};return l?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl flex flex-col h-[90vh]",children:[r.jsx("header",{className:"p-4 border-b",children:r.jsx("h2",{className:"text-xl font-bold",children:"AI-Assisted Functional Assignment Wizard"})}),r.jsxs("main",{className:"p-6 flex-1 flex flex-col overflow-y-auto space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg mb-2",children:"Bc 1: Thit lp Quy tc Phn nhim"}),r.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Cung cp cho AI cc quy tc, logic, hoc nh hng  phn cng vai tr (QTKBP) cho cc phng ban. Bn c th t vit hoc  AI gi  da trn danh sch nhim v v phng ban hin c."}),r.jsxs("button",{onClick:g,disabled:y,className:"w-full flex items-center justify-center p-2 bg-blue-100 text-blue-700 font-semibold rounded-md hover:bg-blue-200 disabled:bg-slate-200 disabled:text-slate-500",children:[r.jsx(en,{}),r.jsx("span",{className:"ml-2",children:y?"AI ang suy ngh...":"AI Gi  Quy tc Phn nhim"})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ni dung Quy tc:"}),r.jsx("textarea",{value:d,onChange:b=>m(b.target.value),placeholder:"V d: Ban Gim c s Quyt nh (Q) cc nhim v c m A1, A2. Phng Kinh doanh s Thc hin (T) cc nhim v bn hng...",className:"w-full flex-1 p-2 border border-slate-300 rounded-md resize-none"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg mb-2",children:"Bc 2: To Ma trn"}),r.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Sau khi  hi lng vi b quy tc, nhn nt bn di  AI to ra ma trn phn nhim chi tit."})]})]}),r.jsxs("footer",{className:"p-4 border-t bg-slate-50 flex justify-end space-x-2",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-200 rounded-md hover:bg-slate-300",children:"Hy b"}),r.jsx("button",{onClick:v,disabled:y||!d.trim(),className:"px-4 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 disabled:bg-slate-400",children:"To Ma trn theo Quy tc"})]})]})}):null},IC=l=>{if(!l)return"";const s=l.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").split(`
`);let o=!1;const u=s.map(d=>{const m=d.trim();if(m.startsWith("* ")||m.startsWith("- ")){const y=`<li>${m.substring(2)}</li>`;return o?y:(o=!0,`<ul>${y}`)}else return o?(o=!1,`</ul>${d}`):d});return o&&u.push("</ul>"),u.join("<br />").replace(/<\/li><br \/>/g,"</li>").replace(/<\/ul><br \/>/g,"</ul>")},UC=({contextInputs:l,onContextChange:t,onTasksGenerated:s,onCompanyMatrixGenerated:o,isLoading:u,setIsLoading:d,tasksGenerated:m,generatedTaskMarkdown:y,departments:x,chatMessages:g,setChatMessages:v,lastAiResponse:b,setLastAiResponse:N,isAiCockpitCollapsed:C,setIsAiCockpitCollapsed:_,attachedFile:E,setAttachedFile:j,onApplyToNote:A})=>{const[H,q]=w.useState("Chi tit n cp 4"),[G,P]=w.useState(""),[V,k]=w.useState(!1),[X,Z]=w.useState(!1),se=w.useRef(null),I=w.useRef(null),D=()=>{var ne;(ne=I.current)==null||ne.scrollIntoView({behavior:"smooth"})};w.useEffect(D,[g,u]);const F=async()=>{d(!0),v([]),N("");const ne=l.map(me=>`${me.question}
${me.answer}`).join(`

`),ue=await bC(ne,H);ue?s(ue):alert("AI khng th to danh sch cng vic. Vui lng th li."),d(!1)},le=async ne=>{Z(!1),d(!0);const ue=x.map(R=>R.name),me=await NC(y,ue,ne);me?o(me):alert("AI khng th to ma trn cp cng ty. Vui lng th li."),d(!1)},oe=async()=>{if(!G.trim()||u)return;const ne={role:"user",content:G};v(te=>[...te,ne]);const ue=G;P(""),d(!0);const me=[...g,ne].map(te=>te.role==="user"?`[User]: ${te.content}`:`[AI]: ${te.content}`).join(`
`),J=`[NG VAI]: Bn l mt c vn AI chuyn v xy dng ma trn phn nhim QTKBP.
[BI CNH HIN TI]:
--- D LIU U VO CA NGI DNG ---
${l.map(te=>`${te.question}
${te.answer}`).join(`

`)}

--- DANH SCH CNG VIC HIN TI (MARKDOWN) ---
${y||"(Cha c)"}

--- LCH S HI THOI ---
${me}
---
${E?`[TI LIU THAM KHO]: Ngi dng  nh km file '${E.name}'. Hy s dng ni dung file ny lm ngun thng tin b sung.`:""}

[YU CU MI CA NGI DNG]: ${ue}

[NHIM V]: Da vo ton b bi cnh trn, hy tr li hoc thc hin yu cu ca ngi dng. Nu h yu cu sa i danh sch cng vic hoc ma trn, hy tr v phin bn BNG MARKDOWN hon chnh  c cp nht.`,ie=await hg(J,E||void 0);N(ie),v(te=>[...te,{role:"ai",content:ie,isMarkdown:!0}]),j(null),d(!1)},O=()=>{var ne;E?j(null):(ne=se.current)==null||ne.click()},ee=()=>{window.confirm("Bn c chc mun xa cuc tr chuyn ny?")&&(v([]),N("")),k(!1)};return r.jsxs(r.Fragment,{children:[X&&r.jsx(RC,{isOpen:X,onClose:()=>Z(!1),departments:x,tasksMarkdown:y,onGenerate:le}),r.jsxs("div",{className:"flex-[1.5] flex flex-col p-4 space-y-4 overflow-y-auto bg-slate-50",children:[r.jsx("div",{className:`collapsible-panel ${C?"collapsed":""}`,children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-base font-bold mb-2",children:"Cung cp Thng tin Ban u"}),r.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-2 space-y-1",children:l.map(ne=>r.jsxs("div",{className:"grid grid-cols-3 gap-px",children:[r.jsx("div",{className:"col-span-1 bg-slate-100 p-2 rounded-l-md text-slate-700 text-sm font-semibold flex items-center",children:ne.question}),r.jsx("div",{className:"col-span-2",children:r.jsx("textarea",{value:ne.answer,onChange:ue=>t(ne.id,ue.target.value),className:"w-full h-full border border-slate-200 rounded-r-md text-sm p-2 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:4,disabled:u})})]},ne.id))})]})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:F,disabled:u,className:`flex-1 p-3 rounded-md text-white font-semibold transition-colors text-center text-sm ${u?"bg-slate-400 cursor-wait":"bg-blue-600 hover:bg-blue-700"}`,children:"Bc 1: AI Gi  Nhim v"}),r.jsx("button",{onClick:()=>Z(!0),disabled:u||!m,className:`flex-1 p-3 rounded-md font-semibold transition-colors text-center text-sm ${u||!m?"bg-slate-200 text-slate-400 cursor-not-allowed":"bg-slate-200 hover:bg-slate-300"}`,children:"Bc 2: AI Phn nhim Chc nng"})]}),r.jsx("div",{className:`collapsible-panel ${C?"collapsed":""}`,children:r.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("label",{className:"font-semibold",children:"Mc  chi tit:"}),r.jsxs("select",{value:H,onChange:ne=>q(ne.target.value),className:"ml-2 p-1 border border-slate-300 rounded-md",disabled:u,children:[r.jsx("option",{children:"Chi tit n cp 2"}),r.jsx("option",{children:"Chi tit n cp 3"}),r.jsx("option",{children:"Chi tit n cp 4"}),r.jsx("option",{children:"Chi tit ti a (AI quyt nh)"})]})]}),r.jsx("p",{className:"text-slate-500",children:"Kt qu s c hin th  cc Tab bn tri."})]})}),r.jsxs("div",{className:"flex-1 flex flex-col border-t pt-4 min-h-[300px]",children:[r.jsx("h2",{className:"text-base font-bold mb-2",children:"C vn AI"}),r.jsxs("div",{className:"flex-1 bg-white rounded-md p-2 border border-slate-200 overflow-y-auto min-h-[150px] space-y-3",children:[g.map((ne,ue)=>{const me=ne.isMarkdown?IC(ne.content):ne.content.replace(/\n/g,"<br/>");return r.jsx("div",{className:`flex ${ne.role==="user"?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`max-w-xl p-3 rounded-lg shadow-sm ${ne.role==="user"?"bg-blue-500 text-white":"bg-slate-200 text-slate-800"}`,children:r.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:me}})})},ue)}),u&&r.jsx("div",{className:"text-slate-500 italic animate-pulse",children:"AI ang suy ngh..."}),r.jsx("div",{ref:I})]}),r.jsxs("div",{className:"mt-2 relative",children:[r.jsx("textarea",{value:G,onChange:ne=>P(ne.target.value),onKeyDown:ne=>{ne.key==="Enter"&&!ne.shiftKey&&(ne.preventDefault(),oe())},rows:3,className:"w-full p-2 pr-12 border border-slate-300 rounded-md text-sm",placeholder:"Tinh chnh kt qu hoc hi thm...",disabled:u}),r.jsx("button",{onClick:oe,className:"absolute right-2 bottom-2 p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-slate-400",disabled:u||!G.trim(),children:r.jsx(Gu,{})})]}),r.jsxs("div",{className:"mt-2 flex space-x-3 text-sm text-slate-600 items-center",children:[r.jsx("input",{type:"file",ref:se,className:"hidden",onChange:ne=>j(ne.target.files?ne.target.files[0]:null)}),r.jsxs("button",{onClick:O,className:"flex items-center gap-1 hover:text-blue-600 disabled:text-slate-400",disabled:u,children:[r.jsx(hs,{})," ",E?`${E.name} (x)`:"nh km File"]}),r.jsx("button",{onClick:()=>_(ne=>!ne),className:"hover:text-blue-600",children:C?"Thu gn Chat":"M rng Chat"}),r.jsx("button",{onClick:()=>A(b),className:"hover:text-blue-600 disabled:text-slate-400",disabled:!b,children:"p dng vo Ghi ch"}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>k(ne=>!ne),className:"hover:text-blue-600",children:"Ty chn..."}),V&&r.jsx("div",{className:"absolute bottom-full right-0 mb-1 w-48 bg-white border border-slate-200 rounded shadow-lg z-10",children:r.jsx("button",{onClick:ee,className:"block w-full text-left px-3 py-2 hover:bg-slate-100",children:"Xa cuc tr chuyn"})})]})]})]})]})]})},jC=l=>{const t={mc1:"",mc2:"",mc3:"",mc4:""};return!l||l.isGroupHeader||(l.mc4?(t.mc1=l.mc1,t.mc2=l.mc2,t.mc3=l.mc3,t.mc4=l.mc4):l.mc3?(t.mc1=l.mc1,t.mc2=l.mc2,t.mc3=l.mc3):l.mc2?(t.mc1=l.mc1,t.mc2=l.mc2):l.mc1&&(t.mc1=l.mc1),t.mc4?t.mc1=t.mc2=t.mc3="":t.mc3?t.mc1=t.mc2="":t.mc2&&(t.mc1="")),t},LC=(l,t)=>{const s=[];if(l.isGroupHeader)s.push("bg-slate-200","font-bold");else{const o=[l.mc1,l.mc2,l.mc3,l.mc4].filter(Boolean).length;o===2?s.push("bg-green-50","hover:bg-green-100","font-bold","italic"):o===1?s.push("bg-blue-50","hover:bg-blue-100","font-bold"):s.push("bg-white","hover:bg-slate-50")}return l.id===t&&s.push("ring-2","ring-blue-500","ring-inset"),s.join(" ")},HC=({tasks:l,setTasks:t,isLoading:s})=>{const[o,u]=w.useState(null),d=w.useRef(null);if(s)return r.jsx("div",{className:"flex justify-center items-center h-full",children:r.jsx("div",{className:"text-center text-slate-500 animate-pulse",children:"AI ang to danh sch cng vic..."})});if(l.length===0)return r.jsx("div",{className:"flex justify-center items-center h-full",children:r.jsxs("div",{className:"text-center text-slate-500 max-w-md",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Bt u Xy dng Ma trn"}),r.jsx("p",{className:"mt-2",children:"Khu vc ny s hin th danh sch cng vic do AI  xut."}),r.jsx("p",{className:"mt-2",children:"Bt u bng cch cung cp thng tin  panel bn phi v nhn 'Bc 1: AI Gi  Nhim v'."})]})});const m=(b,N,C)=>{t(_=>_.map(E=>E.id===b?{...E,[N]:C}:E))},y=()=>{const b={id:`task-${Date.now()}`,rowNumber:0,mc1:"",mc2:"",mc3:"",mc4:"",name:"Nhim v mi",isGroupHeader:!1,assignments:{}};t(N=>{const C=N.findIndex(j=>j.id===o),_=[...N],E=C!==-1?C:N.length;return _.splice(E,0,b),_.map((j,A)=>({...j,rowNumber:A+1}))})},x=()=>{if(!o){alert("Vui lng chn mt dng  xa.");return}window.confirm("Bn c chc chn mun xa nhim v  chn khng?")&&(t(b=>b.filter(C=>C.id!==o).map((C,_)=>({...C,rowNumber:_+1}))),u(null))},g=()=>{var b;(b=d.current)==null||b.click()},v=b=>{var _;const N=(_=b.target.files)==null?void 0:_[0];if(!N)return;const C=new FileReader;C.onload=E=>{var A;const j=(A=E.target)==null?void 0:A.result;try{const H=mg(j);if(H.length===0){alert("Khng tm thy nhim v no trong file. Vui lng kim tra nh dng bng Markdown.");return}window.confirm(`Tm thy ${H.length} nhim v. Thao tc ny s thay th ton b danh sch hin ti. Bn c mun tip tc khng?`)&&(t(H),alert("Nhp d liu thnh cng!"))}catch(H){console.error("Error parsing imported file:",H),alert("C li xy ra khi c file. Vui lng m bo file c nh dng bng Markdown hp l.")}},C.readAsText(N),b.target&&(b.target.value="")};return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("input",{type:"file",ref:d,onChange:v,className:"hidden",accept:".md,.txt"}),r.jsx("div",{className:"flex-1 overflow-auto",children:r.jsxs("table",{className:"min-w-full text-sm border-collapse",children:[r.jsx("thead",{className:"sticky top-0 bg-slate-100 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 border font-bold w-16",children:"MC1"}),r.jsx("th",{className:"p-2 border font-semibold w-16",children:"MC2"}),r.jsx("th",{className:"p-2 border font-semibold w-16",children:"MC3"}),r.jsx("th",{className:"p-2 border font-semibold w-16",children:"MC4"}),r.jsx("th",{className:"p-2 border text-left font-semibold",children:"Tn Nhim v"})]})}),r.jsx("tbody",{children:l.map(b=>{const N=jC(b);return r.jsx("tr",{onClick:()=>u(b.id),className:LC(b,o),children:b.isGroupHeader?r.jsx("td",{colSpan:5,className:"p-2 border",children:r.jsx("input",{type:"text",value:b.name,onChange:C=>m(b.id,"name",C.target.value),className:"w-full bg-transparent focus:bg-white focus:ring-1 focus:ring-blue-500 outline-none"})}):r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"p-0 border",children:r.jsx("input",{type:"text",value:N.mc1,onChange:C=>m(b.id,"mc1",C.target.value),className:"w-full p-2 text-center focus:bg-white focus:ring-1 focus:ring-blue-500 outline-none bg-transparent"})}),r.jsx("td",{className:"p-0 border",children:r.jsx("input",{type:"text",value:N.mc2,onChange:C=>m(b.id,"mc2",C.target.value),className:"w-full p-2 text-center focus:bg-white focus:ring-1 focus:ring-blue-500 outline-none bg-transparent"})}),r.jsx("td",{className:"p-0 border",children:r.jsx("input",{type:"text",value:N.mc3,onChange:C=>m(b.id,"mc3",C.target.value),className:"w-full p-2 text-center focus:bg-white focus:ring-1 focus:ring-blue-500 outline-none bg-transparent"})}),r.jsx("td",{className:"p-0 border",children:r.jsx("input",{type:"text",value:N.mc4,onChange:C=>m(b.id,"mc4",C.target.value),className:"w-full p-2 text-center focus:bg-white focus:ring-1 focus:ring-blue-500 outline-none bg-transparent"})}),r.jsx("td",{className:"p-0 border",children:r.jsx("input",{type:"text",value:b.name,onChange:C=>m(b.id,"name",C.target.value),className:"w-full p-2 focus:bg-white focus:ring-1 focus:ring-blue-500 outline-none bg-transparent"})})]})},b.id)})})]})}),r.jsxs("div",{className:"p-2 border-t border-slate-200 flex space-x-2 flex-shrink-0",children:[r.jsxs("button",{onClick:y,className:"px-3 py-1 text-sm bg-slate-200 rounded hover:bg-slate-300 flex items-center gap-1",children:[r.jsx(Qn,{})," Thm mi"]}),r.jsxs("button",{onClick:x,disabled:!o,className:"px-3 py-1 text-sm bg-slate-200 rounded hover:bg-slate-300 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Wt,{})," Xa"]}),r.jsxs("button",{onClick:g,className:"px-3 py-1 text-sm bg-slate-200 rounded hover:bg-slate-300 flex items-center gap-1",children:[r.jsx(kp,{})," Import t File..."]})]})]})},kC=l=>{const t={mc1:"",mc2:"",mc3:"",mc4:""};return!l||l.isGroupHeader||(l.mc4?(t.mc1=l.mc1,t.mc2=l.mc2,t.mc3=l.mc3,t.mc4=l.mc4):l.mc3?(t.mc1=l.mc1,t.mc2=l.mc2,t.mc3=l.mc3):l.mc2?(t.mc1=l.mc1,t.mc2=l.mc2):l.mc1&&(t.mc1=l.mc1),t.mc4?t.mc1=t.mc2=t.mc3="":t.mc3?t.mc1=t.mc2="":t.mc2&&(t.mc1="")),t},GC=l=>{const t=["hover:bg-slate-50"];if(l.isGroupHeader)return"bg-slate-200 font-bold";const s=l.mc1&&!l.mc2;return l.mc2&&!l.mc3?t.push("font-bold","italic"):s&&t.push("font-bold"),t.join(" ")},qC=({tasks:l,departments:t,assignments:s,setAssignments:o,isLoading:u})=>{if(u)return r.jsx("div",{className:"flex justify-center items-center h-full",children:r.jsx("div",{className:"text-center text-slate-500 animate-pulse",children:"AI ang to ma trn..."})});if(l.length===0||t.length===0)return r.jsx("div",{className:"flex justify-center items-center h-full",children:r.jsx("div",{className:"text-center text-slate-500 max-w-md",children:r.jsx("p",{children:"Vui lng to danh sch nhim v v phng ban trc khi xem ma trn ny."})})});const d=(x,g,v,b)=>{o(N=>{var A;const C=JSON.parse(JSON.stringify(N)),_=(((A=C[x])==null?void 0:A[g])||"").split(",").filter(Boolean);let E;b?E=[...new Set([..._,v])]:E=_.filter(H=>H!==v);const j=["Q","T","K","B","P"];return E.sort((H,q)=>j.indexOf(H)-j.indexOf(q)),C[x]||(C[x]={}),C[x][g]=E.join(","),C})},m=[...t].sort((x,g)=>x.priority-g.priority),y=["Q","T","K","B","P"];return r.jsx("div",{className:"h-full overflow-auto",children:r.jsxs("table",{className:"min-w-full text-xs border-collapse",children:[r.jsx("thead",{className:"sticky top-0 bg-slate-100 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-1 border font-bold w-12",children:"MC1"}),r.jsx("th",{className:"p-1 border font-semibold w-12",children:"MC2"}),r.jsx("th",{className:"p-1 border font-semibold w-12",children:"MC3"}),r.jsx("th",{className:"p-1 border font-semibold w-12",children:"MC4"}),r.jsx("th",{className:"p-1 border text-left font-semibold min-w-[250px]",children:"Tn Nhim v"}),m.map(x=>r.jsx("th",{className:"p-1 border font-semibold min-w-[120px]",title:x.name,children:x.code},x.code))]})}),r.jsx("tbody",{children:l.map(x=>{const g=kC(x);return r.jsxs("tr",{className:GC(x),children:[r.jsx("td",{className:"p-1 border text-center",children:g.mc1}),r.jsx("td",{className:"p-1 border text-center",children:g.mc2}),r.jsx("td",{className:"p-1 border text-center",children:g.mc3}),r.jsx("td",{className:"p-1 border text-center",children:g.mc4}),r.jsx("td",{className:"p-1 border",children:x.name}),m.map(v=>r.jsx("td",{className:"p-0 border",children:!x.isGroupHeader&&r.jsx("div",{className:"flex justify-around items-center h-full px-1",children:y.map(b=>{var C;const N=(((C=s[x.id])==null?void 0:C[v.code])||"").split(",");return r.jsxs("label",{title:b,className:"flex items-center gap-1 cursor-pointer p-0.5 rounded hover:bg-slate-200",children:[r.jsx("input",{type:"checkbox",checked:N.includes(b),onChange:_=>d(x.id,v.code,b,_.target.checked),className:"h-3 w-3"}),r.jsx("span",{className:"text-xs",children:b})]},b)})})},v.code))]},x.id)})})]})})},VC=l=>{const t={mc1:"",mc2:"",mc3:"",mc4:""};return!l||l.isGroupHeader||(l.mc4?(t.mc1=l.mc1,t.mc2=l.mc2,t.mc3=l.mc3,t.mc4=l.mc4):l.mc3?(t.mc1=l.mc1,t.mc2=l.mc2,t.mc3=l.mc3):l.mc2?(t.mc1=l.mc1,t.mc2=l.mc2):l.mc1&&(t.mc1=l.mc1),t.mc4?t.mc1=t.mc2=t.mc3="":t.mc3?t.mc1=t.mc2="":t.mc2&&(t.mc1="")),t},BC=l=>{const t=["hover:bg-slate-50"],s=l.mc1&&!l.mc2;return l.mc2&&!l.mc3?t.push("font-bold","italic"):s&&t.push("font-bold"),t.join(" ")},PC=({tasks:l,roles:t,departments:s,companyAssignments:o,departmentalAssignments:u,setDepartmentalAssignments:d})=>{var j;const[m,y]=w.useState(((j=s[0])==null?void 0:j.code)||null),[x,g]=w.useState(""),[v,b]=w.useState(!1),N=(A,H,q)=>{d(G=>{const P={...G};return P[A]||(P[A]={}),P[A][H]=q.toUpperCase(),P})},C=w.useMemo(()=>m?l.filter(A=>{var H;return((H=o[A.id])==null?void 0:H[m])&&!A.isGroupHeader}):[],[m,l,o]),_=w.useMemo(()=>m?t.filter(A=>A.departmentCode===m):[],[m,t]),E=async()=>{if(!m)return;b(!0);const A=C.map(G=>({name:G.name,role:o[G.id][m]})),H=_.map(G=>`${G.name} (${G.title})`),q=await SC(s.find(G=>G.code===m).name,A,H,x);if(q){const G=q.split(`
`).slice(2),P={...u};G.forEach(V=>{const k=V.split("|").map(X=>X.trim()).filter(Boolean);if(k.length===3){const[X,Z,se]=k,I=l.find(F=>F.name===X),D=_.find(F=>`${F.name} (${F.title})`===Z);I&&D&&(P[I.id]||(P[I.id]={}),P[I.id][D.id]=se)}}),d(P)}else alert("AI khng th to gi  phn cng.");b(!1)};return r.jsxs("div",{className:"h-full flex flex-col p-4 space-y-4",children:[r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-4",children:[r.jsx("label",{className:"font-semibold",children:"Chn phng ban:"}),r.jsx("select",{value:m||"",onChange:A=>y(A.target.value),className:"p-2 border rounded-md",children:s.map(A=>r.jsx("option",{value:A.code,children:A.name},A.code))})]}),r.jsx("div",{className:"flex-1 overflow-auto border rounded-md",children:r.jsxs("table",{className:"min-w-full text-xs border-collapse",children:[r.jsx("thead",{className:"sticky top-0 bg-slate-100 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-1 border font-semibold w-12",children:"MC1"}),r.jsx("th",{className:"p-1 border font-semibold w-12",children:"MC2"}),r.jsx("th",{className:"p-1 border font-semibold w-12",children:"MC3"}),r.jsx("th",{className:"p-1 border font-semibold w-12",children:"MC4"}),r.jsx("th",{className:"p-1 border font-semibold min-w-[250px] text-left",children:"Tn Nhim v"}),r.jsx("th",{className:"p-1 border font-semibold w-16",children:"Vai tr Phng"}),_.map(A=>r.jsx("th",{className:"p-1 border font-semibold w-24",title:A.title,children:A.name},A.id))]})}),r.jsx("tbody",{children:C.map(A=>{var q;const H=VC(A);return r.jsxs("tr",{className:BC(A),children:[r.jsx("td",{className:"p-1 border text-center",children:H.mc1}),r.jsx("td",{className:"p-1 border text-center",children:H.mc2}),r.jsx("td",{className:"p-1 border text-center",children:H.mc3}),r.jsx("td",{className:"p-1 border text-center",children:H.mc4}),r.jsx("td",{className:"p-1 border",children:A.name}),r.jsx("td",{className:"p-1 border text-center font-bold",children:(q=o[A.id])==null?void 0:q[m]}),_.map(G=>{var P;return r.jsx("td",{className:"p-0 border",children:r.jsxs("select",{value:((P=u[A.id])==null?void 0:P[G.id])||"",onChange:V=>N(A.id,G.id,V.target.value),className:"w-full h-full p-1 bg-transparent focus:bg-white outline-none",children:[r.jsx("option",{value:""}),r.jsx("option",{value:"Q",children:"Q"}),r.jsx("option",{value:"T",children:"T"}),r.jsx("option",{value:"K",children:"K"}),r.jsx("option",{value:"B",children:"B"}),r.jsx("option",{value:"P",children:"P"})]})},G.id)})]},A.id)})})]})}),r.jsxs("div",{className:"flex-shrink-0 p-4 border rounded-md bg-slate-50 space-y-2",children:[r.jsx("h4",{className:"font-semibold",children:"AI Gi  Phn cng"}),r.jsx("textarea",{value:x,onChange:A=>g(A.target.value),rows:2,className:"w-full p-2 border rounded-md text-sm",placeholder:"Thm ghi ch cho AI (v d: 'Nguyn Vn A l trng phng', 'Trn Th B l chuyn vin mi'...)"}),r.jsxs("button",{onClick:E,disabled:v,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-slate-400 flex items-center gap-2",children:[r.jsx(en,{})," ",v?"ang x l...":"AI Gi "]})]})]})},zC=({department:l,onClose:t,onSave:s,existingCodes:o})=>{const[u,d]=w.useState(""),[m,y]=w.useState(""),[x,g]=w.useState(10),[v,b]=w.useState(""),N=!!l;w.useEffect(()=>{l&&(d(l.code),y(l.name),g(l.priority))},[l]);const C=_=>{if(_.preventDefault(),!u.trim()||!m.trim()){b("M v Tn phng ban khng c  trng.");return}if(!N&&o.includes(u.toUpperCase())){b("M phng ban ny  tn ti.");return}s({code:u.toUpperCase(),name:m,priority:x}),t()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:N?"Sa Phng ban":"Thm Phng ban mi"}),r.jsxs("form",{onSubmit:C,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"M Phng ban (VD: MKT, SALE)"}),r.jsx("input",{type:"text",value:u,onChange:_=>d(_.target.value),className:"w-full mt-1 p-2 border rounded",required:!0,disabled:N})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"Tn Phng ban"}),r.jsx("input",{type:"text",value:m,onChange:_=>y(_.target.value),className:"w-full mt-1 p-2 border rounded",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"Th t u tin (s nh hn c hin th trc)"}),r.jsx("input",{type:"number",value:x,onChange:_=>g(Number(_.target.value)),className:"w-full mt-1 p-2 border rounded",required:!0})]}),v&&r.jsx("p",{className:"text-sm text-red-500",children:v}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-slate-200 rounded-md hover:bg-slate-300",children:"Hy"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Lu"})]})]})]})})},OC=({role:l,departments:t,onClose:s,onSave:o})=>{var j;const[u,d]=w.useState(""),[m,y]=w.useState(""),[x,g]=w.useState(((j=t[0])==null?void 0:j.code)||""),[v,b]=w.useState(""),[N,C]=w.useState(""),_=!!l;w.useEffect(()=>{l&&(d(l.name),y(l.title),g(l.departmentCode),b(l.email),C(l.phone))},[l]);const E=A=>{if(A.preventDefault(),!u.trim()||!m.trim()||!x){alert("Vui lng in Tn, Chc danh v chn Phng ban.");return}o({id:(l==null?void 0:l.id)||`role-${Date.now()}`,name:u,title:m,departmentCode:x,email:v,phone:N}),s()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:_?"Sa Nhn vin":"Thm Nhn vin mi"}),r.jsxs("form",{onSubmit:E,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"H v Tn"}),r.jsx("input",{type:"text",value:u,onChange:A=>d(A.target.value),className:"w-full mt-1 p-2 border rounded",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"Chc danh"}),r.jsx("input",{type:"text",value:m,onChange:A=>y(A.target.value),className:"w-full mt-1 p-2 border rounded",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"Phng ban"}),r.jsx("select",{value:x,onChange:A=>g(A.target.value),className:"w-full mt-1 p-2 border rounded",required:!0,children:t.map(A=>r.jsx("option",{value:A.code,children:A.name},A.code))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"Email"}),r.jsx("input",{type:"email",value:v,onChange:A=>b(A.target.value),className:"w-full mt-1 p-2 border rounded"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"S in thoi"}),r.jsx("input",{type:"text",value:N,onChange:A=>C(A.target.value),className:"w-full mt-1 p-2 border rounded"})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-slate-200 rounded-md hover:bg-slate-300",children:"Hy"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Lu"})]})]})]})})},YC=({departments:l,setDepartments:t,roles:s,setRoles:o})=>{const[u,d]=w.useState(!1),[m,y]=w.useState(!1),[x,g]=w.useState(null),[v,b]=w.useState(null),[N,C]=w.useState(null),[_,E]=w.useState(null),[j,A]=w.useState(null),H=I=>{const D=!l.some(F=>F.code===I.code);t(D?F=>[...F,I]:F=>F.map(le=>le.code===I.code?I:le))},q=I=>{if(s.some(D=>D.departmentCode===I)){alert("Khng th xa phng ban khi vn cn nhn vin.");return}window.confirm(`Bn c chc mun xa phng ban "${I}" khng?`)&&(t(D=>D.filter(F=>F.code!==I)),N===I&&C(null))},G=I=>{const D=!s.some(F=>F.id===I.id);o(D?F=>[...F,I]:F=>F.map(le=>le.id===I.id?I:le))},P=I=>{window.confirm("Bn c chc mun xa nhn vin ny khng?")&&o(D=>D.filter(F=>F.id!==I))},V=w.useMemo(()=>N?s.filter(I=>I.departmentCode===N):s,[s,N]),k=(I,D)=>{E(D),I.dataTransfer.effectAllowed="move"},X=(I,D)=>{I.preventDefault(),D!==_&&D!==j&&A(D)},Z=()=>{A(null)},se=(I,D)=>{if(I.preventDefault(),!_||_===D){E(null),A(null);return}const F=[...s],le=F.findIndex(ee=>ee.id===_),oe=F.findIndex(ee=>ee.id===D);if(le===-1||oe===-1)return;const[O]=F.splice(le,1);F.splice(oe,0,O),o(F),E(null),A(null)};return r.jsxs("div",{className:"h-full flex p-4 space-x-4",children:[u&&r.jsx(zC,{department:x,onClose:()=>d(!1),onSave:H,existingCodes:l.map(I=>I.code)}),m&&r.jsx(OC,{role:v,departments:l,onClose:()=>y(!1),onSave:G}),r.jsxs("div",{className:"w-1/3 flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[r.jsx(Vp,{})," Phng ban"]}),r.jsxs("button",{onClick:()=>{g(null),d(!0)},className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-1",children:[r.jsx(Qn,{})," Thm"]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto border rounded-md bg-white p-2 space-y-1",children:[r.jsxs("button",{onClick:()=>C(null),className:`w-full text-left p-2 border rounded-md flex justify-between items-center transition-colors ${N?"hover:bg-slate-50 border-transparent":"bg-blue-100 border-blue-300 font-semibold"}`,children:["Tt c Nhn vin (",s.length,")"]}),l.sort((I,D)=>I.priority-D.priority).map(I=>r.jsxs("div",{onClick:()=>C(I.code),className:`p-2 border rounded-md flex justify-between items-center cursor-pointer transition-colors ${N===I.code?"bg-blue-100 border-blue-300":"hover:bg-slate-50 border-transparent"}`,children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold",children:[I.name," ",r.jsxs("span",{className:"font-mono text-xs text-slate-500",children:["(",I.code,")"]})]}),r.jsxs("p",{className:"text-xs text-slate-500",children:[s.filter(D=>D.departmentCode===I.code).length," nhn vin"]})]}),r.jsxs("div",{className:"flex-shrink-0",children:[r.jsx("button",{onClick:D=>{D.stopPropagation(),g(I),d(!0)},className:"p-1 text-slate-500 hover:text-blue-600",children:r.jsx(ri,{})}),r.jsx("button",{onClick:D=>{D.stopPropagation(),q(I.code)},className:"p-1 text-slate-500 hover:text-red-600",children:r.jsx(Wt,{})})]})]},I.code))]})]}),r.jsxs("div",{className:"w-2/3 flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[r.jsx(Oo,{})," Nhn vin"]}),r.jsxs("button",{onClick:()=>{b(null),y(!0)},className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-1",children:[r.jsx(Qn,{})," Thm"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto border rounded-md bg-white",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-100 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 w-12 text-center font-semibold",children:"STT"}),r.jsx("th",{className:"p-2 text-left font-semibold",children:"Tn"}),r.jsx("th",{className:"p-2 text-left font-semibold",children:"Chc danh"}),r.jsx("th",{className:"p-2 text-left font-semibold",children:"Phng ban"}),r.jsx("th",{className:"p-2 text-center font-semibold",children:"Hnh ng"})]})}),r.jsx("tbody",{onDragLeave:Z,children:V.map((I,D)=>{var F;return r.jsxs("tr",{className:`border-b hover:bg-slate-50 cursor-move transition-all ${_===I.id?"opacity-30":"opacity-100"} ${j===I.id?"drag-over-indicator":""}`,draggable:!0,onDragStart:le=>k(le,I.id),onDragOver:le=>X(le,I.id),onDrop:le=>se(le,I.id),children:[r.jsx("td",{className:"p-2 text-center text-slate-500",children:D+1}),r.jsx("td",{className:"p-2",children:I.name}),r.jsx("td",{className:"p-2",children:I.title}),r.jsx("td",{className:"p-2",children:((F=l.find(le=>le.code===I.departmentCode))==null?void 0:F.name)||I.departmentCode}),r.jsxs("td",{className:"p-2 text-center",children:[r.jsx("button",{onClick:()=>{b(I),y(!0)},className:"p-1 text-slate-500 hover:text-blue-600",children:r.jsx(ri,{})}),r.jsx("button",{onClick:()=>P(I.id),className:"p-1 text-slate-500 hover:text-red-600",children:r.jsx(Wt,{})})]})]},I.id)})})]})})]})]})},na="matrix_versions_metadata",Fu="matrix_version_data_",pg="active_matrix_data",Hu="active_version_id",gg=()=>localStorage.getItem(Hu),yg=l=>{l?localStorage.setItem(Hu,l):localStorage.removeItem(Hu)},la=()=>{try{const l=localStorage.getItem(na);return l?JSON.parse(l).sort((s,o)=>o.timestamp-s.timestamp):[]}catch(l){return console.error("Failed to load versions:",l),[]}},Au=l=>{try{const t=localStorage.getItem(`${Fu}${l}`);return t?JSON.parse(t):null}catch(t){return console.error(`Failed to load data for version ${l}:`,t),null}},KC=(l,t)=>{const s=la(),o={id:`version_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,name:l,timestamp:Date.now()};try{localStorage.setItem(`${Fu}${o.id}`,JSON.stringify(t));const u=[o,...s];return localStorage.setItem(na,JSON.stringify(u)),u.sort((d,m)=>m.timestamp-d.timestamp)}catch(u){throw console.error("Failed to save version:",u),alert("Li khi lu phin bn. C th do dung lng lu tr trnh duyt  y."),u}},FC=(l,t)=>{const o=la().map(u=>u.id===l?{...u,name:t}:u);return localStorage.setItem(na,JSON.stringify(o)),o.sort((u,d)=>d.timestamp-u.timestamp)},JC=l=>{const s=la().filter(o=>o.id!==l);return localStorage.setItem(na,JSON.stringify(s)),localStorage.removeItem(`${Fu}${l}`),gg()===l&&yg(null),s.sort((o,u)=>u.timestamp-o.timestamp)},QC=l=>{try{const t=JSON.stringify(l);localStorage.setItem(pg,t)}catch(t){console.error("Failed to save active matrix:",t),alert("Li khi lu ma trn. C th dung lng lu tr trnh duyt  y.")}},xg=()=>{try{const l=localStorage.getItem(pg);return l?JSON.parse(l):null}catch(l){return console.error("Failed to load active matrix:",l),null}},Ep=l=>{var t,s,o;if(!l)return"";try{const u=(m,y)=>{if(y&&typeof y=="object"&&!Array.isArray(y)){const x={};for(const g of Object.keys(y).sort())x[g]=y[g];return x}return y},d=JSON.parse(JSON.stringify(l));return(t=d.tasks)==null||t.sort((m,y)=>m.rowNumber-y.rowNumber||m.id.localeCompare(y.id)),(s=d.departments)==null||s.sort((m,y)=>m.priority-y.priority||m.code.localeCompare(y.code)),(o=d.roles)==null||o.sort((m,y)=>m.id.localeCompare(y.id)),JSON.stringify(d,u)}catch(u){return console.error("Error creating canonical JSON:",u),JSON.stringify(l)}},XC=({versions:l,setVersions:t,tasks:s,departments:o,roles:u,generatedTaskMarkdown:d,companyAssignments:m,departmentalAssignments:y,loadVersionData:x,activeVersionId:g,setActiveVersionId:v})=>{const[b,N]=w.useState(""),[C,_]=w.useState(null),[E,j]=w.useState(""),[A,H]=w.useState(null),q=w.useMemo(()=>({tasks:s,departments:o,roles:u,generatedTaskMarkdown:d,companyAssignments:m,departmentalAssignments:y}),[s,o,u,d,m,y]),G=w.useMemo(()=>Ep(q),[q]),P=w.useMemo(()=>{for(const I of l){const D=Au(I.id),F=Ep(D);if(F&&F===G)return I.id}return null},[G,l]);w.useEffect(()=>{if(A){const I=setTimeout(()=>H(null),3e3);return()=>clearTimeout(I)}},[A]);const V=()=>{if(!b.trim()){alert("Vui lng nhp tn cho phin bn.");return}try{const D=KC(b,{tasks:s,departments:o,roles:u,generatedTaskMarkdown:d,companyAssignments:m,departmentalAssignments:y});t(D),N(""),H({message:` lu phin bn "${b}" thnh cng.`,type:"success"})}catch{H({message:"Li khi lu phin bn.",type:"error"})}},k=I=>{const D=l.find(F=>F.id===I);if(!D){H({message:"Li: Khng tm thy phin bn.",type:"error"});return}if(window.confirm(`Thao tc ny s ghi  d liu lm vic hin ti bng phin bn "${D.name}". D liu cha lu s b mt. Bn c mun tip tc?`)){const F=Au(I);F?(x(F),H({message:` ti phin bn "${D.name}" vo khng gian lm vic.`,type:"success"})):H({message:"Li: Khng th ti d liu phin bn.",type:"error"})}},X=I=>{const D=l.find(F=>F.id===I);if(!D){H({message:"Li: Khng tm thy phin bn.",type:"error"});return}if(window.confirm(`Kch hot phin bn "${D.name}" s t n lm ma trn chnh thc cho ton b ng dng v ghi  cng vic hin ti. Tip tc?`)){const F=Au(I);F?(x(F),QC(F),v(I),H({message:` kch hot phin bn "${D.name}".`,type:"success"})):H({message:"Li: Khng th kch hot phin bn.",type:"error"})}},Z=I=>{const D=l.find(F=>F.id===I);if(!D){H({message:"Li: Khng tm thy phin bn.",type:"error"});return}if(window.confirm(`Bn c chc chn mun xa vnh vin phin bn "${D.name}" khng?`)){const F=JC(I);t(F),H({message:` xa phin bn "${D.name}".`,type:"success"})}},se=I=>{if(!E.trim()){_(null);return}const D=FC(I,E);t(D),H({message:` i tn phin bn thnh "${E}".`,type:"success"}),_(null),j("")};return r.jsxs("div",{className:"p-4 h-full flex flex-col space-y-4 relative bg-slate-50",children:[r.jsxs("div",{className:"flex-shrink-0 p-4 border border-slate-200 rounded-md bg-white shadow-sm space-y-2",children:[r.jsx("h3",{className:"font-bold text-lg",children:"Lu Phin bn Hin ti"}),P===null&&r.jsx("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded-md text-sm text-yellow-800",children:'Bn c nhng thay i cha c lu. Nhp tn v nhn "Lu"  to phin bn mi.'}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:b,onChange:I=>N(I.target.value),placeholder:"Tn phin bn (VD: Ma trn T10/2024)",className:"flex-1 p-2 border rounded-md"}),r.jsx("button",{onClick:V,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700",children:"Lu"})]})]}),r.jsxs("div",{className:"flex-1 p-4 border border-slate-200 rounded-md bg-white shadow-sm flex flex-col",children:[r.jsx("h3",{className:"font-bold text-lg mb-2",children:"Cc Phin bn  Lu"}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:l.length===0?r.jsx("p",{className:"text-center text-slate-500 mt-8",children:"Cha c phin bn no c lu."}):r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 text-left font-semibold",children:"Tn Phin bn"}),r.jsx("th",{className:"p-2 text-left font-semibold",children:"Ngy lu"}),r.jsx("th",{className:"p-2 text-center font-semibold",children:"Hnh ng"})]})}),r.jsx("tbody",{children:l.map(I=>{const D=g===I.id,F=P===I.id;let le="border-b transition-colors";return D?le+=" bg-blue-50 hover:bg-blue-100 border-l-4 border-blue-500":F?le+=" bg-yellow-50 hover:bg-yellow-100 border-l-4 border-yellow-400":le+=" hover:bg-slate-50 border-l-4 border-transparent",r.jsxs("tr",{className:le,children:[r.jsx("td",{className:`p-2 ${D?"font-bold text-blue-800":""}`,children:C===I.id?r.jsx("input",{type:"text",value:E,onChange:oe=>j(oe.target.value),onBlur:()=>se(I.id),onKeyDown:oe=>{oe.key==="Enter"&&se(I.id),oe.key==="Escape"&&_(null)},className:"p-1 border rounded",autoFocus:!0}):r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:I.name}),D&&r.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"ang hot ng"}),F&&!D&&r.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"ang xem"}),r.jsx("button",{onClick:()=>{_(I.id),j(I.name)},className:"ml-2 text-slate-400 hover:text-blue-600",children:r.jsx(ri,{})})]})}),r.jsx("td",{className:"p-2",children:new Date(I.timestamp).toLocaleString("vi-VN")}),r.jsxs("td",{className:"p-2 text-center space-x-1",children:[r.jsx("button",{onClick:()=>k(I.id),disabled:F,className:"px-3 py-1 bg-slate-200 rounded text-slate-700 hover:bg-slate-300 disabled:bg-slate-100 disabled:text-slate-400 disabled:cursor-not-allowed",children:"Ti"}),r.jsx("button",{onClick:()=>X(I.id),disabled:D,className:"px-3 py-1 bg-green-100 text-green-800 rounded hover:bg-green-200 font-semibold disabled:bg-slate-100 disabled:text-slate-400 disabled:cursor-not-allowed",children:"Kch hot"}),r.jsx("button",{onClick:()=>Z(I.id),className:"p-1 text-slate-500 hover:text-red-600",children:r.jsx(Wt,{})})]})]},I.id)})})]})})]}),A&&r.jsx("div",{className:`fixed bottom-6 right-6 p-4 rounded-lg shadow-xl text-sm font-semibold animate-fade-in-out z-50
                    ${A.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.message})]})},$C=l=>{const t={mc1:"",mc2:"",mc3:"",mc4:""};return!l||l.isGroupHeader||(l.mc4?(t.mc1=l.mc1,t.mc2=l.mc2,t.mc3=l.mc3,t.mc4=l.mc4):l.mc3?(t.mc1=l.mc1,t.mc2=l.mc2,t.mc3=l.mc3):l.mc2?(t.mc1=l.mc1,t.mc2=l.mc2):l.mc1&&(t.mc1=l.mc1),t.mc4?t.mc1=t.mc2=t.mc3="":t.mc3?t.mc1=t.mc2="":t.mc2&&(t.mc1="")),t},ZC=({tasks:l,roles:t,companyAssignments:s,departmentalAssignments:o})=>{const[u,d]=w.useState({missingT:!0,missingQ:!0,multipleQ:!0,missingK:!0}),[m,y]=w.useState([]),[x,g]=w.useState("Kt qu kim tra s c hin th  y."),v=N=>{const{name:C,checked:_}=N.target;d(E=>({...E,[C]:_}))},b=()=>{const N=[];l.forEach(C=>{if(C.isGroupHeader)return;const _=[];t.forEach(A=>{var G,P;const H=(G=o[C.id])==null?void 0:G[A.id];if(H){_.push(H.toUpperCase());return}const q=(P=s[C.id])==null?void 0:P[A.departmentCode];q&&q.split(",").forEach(V=>_.push(V.trim().toUpperCase()))});const j=[...new Set(_)];u.missingT&&!j.includes("T")&&N.push({...C,findingType:"Thiu vai tr 'Thc hin' (T)"}),u.missingQ&&!j.includes("Q")&&N.push({...C,findingType:"Thiu vai tr 'Quyt nh' (Q)"}),u.multipleQ&&j.filter(A=>A==="Q").length>1&&N.push({...C,findingType:"C nhiu hn 1 vai tr 'Quyt nh' (Q)"}),u.missingK&&!j.includes("K")&&N.push({...C,findingType:"Thiu vai tr 'Kim sot' (K)"})}),y(N),N.length>0?g(`Kt qu: Tm thy ${N.length} li tim n.`):g("Chc mng! Khng tm thy li logic no trong Ma trn Phn nhim.")};return r.jsxs("div",{className:"h-full flex flex-col p-4 space-y-4",children:[r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-8 p-4 border border-slate-200 rounded-md",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"font-bold",children:"Chn cc quy tc cn kim tra"}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",name:"missingT",checked:u.missingT,onChange:v})," Cng vic thiu vai tr Thc hin (T)"]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",name:"missingQ",checked:u.missingQ,onChange:v})," Cng vic thiu vai tr Quyt nh (Q)"]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",name:"multipleQ",checked:u.multipleQ,onChange:v})," Cng vic c nhiu hn 1 vai tr Quyt nh (Q)"]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",name:"missingK",checked:u.missingK,onChange:v})," Cng vic thiu vai tr Kim sot (K)"]})]}),r.jsx("button",{onClick:b,className:"px-6 py-3 bg-blue-600 text-white font-bold rounded-md hover:bg-blue-700 self-center",children:"Chy Kim tra"})]}),r.jsx("div",{className:"flex-shrink-0 font-bold",children:x}),r.jsxs("div",{className:"flex-1 overflow-auto border border-slate-200 rounded-md",children:[r.jsxs("table",{className:"min-w-full text-sm border-collapse",children:[r.jsx("thead",{className:"sticky top-0 bg-slate-100 z-10",children:r.jsx("tr",{children:["MC1","MC2","MC3","MC4","Tn Cng vic","Ni dung Li"].map(N=>r.jsx("th",{className:`p-2 border font-semibold text-left ${N==="MC1"?"font-bold":""}`,children:N},N))})}),r.jsx("tbody",{children:m.map((N,C)=>{const _=$C(N),E=N.mc1&&!N.mc2,j=N.mc2&&!N.mc3;let A="bg-red-50 hover:bg-red-100";return j?A+=" font-bold italic":E&&(A+=" font-bold"),r.jsxs("tr",{className:A,children:[r.jsx("td",{className:"p-2 border text-center w-12",children:_.mc1}),r.jsx("td",{className:"p-2 border text-center w-12",children:_.mc2}),r.jsx("td",{className:"p-2 border text-center w-12",children:_.mc3}),r.jsx("td",{className:"p-2 border text-center w-12",children:_.mc4}),r.jsx("td",{className:"p-2 border",children:N.name}),r.jsx("td",{className:"p-2 border font-semibold",children:N.findingType})]},`${N.id}-${C}`)})})]}),m.length===0&&r.jsx("div",{className:"p-4 text-center text-slate-500",children:"Khng c li no c tm thy."})]})]})},_p=l=>{const t={mc1:"",mc2:"",mc3:"",mc4:""};return!l||l.isGroupHeader||(l.mc4?t.mc4=l.mc4:l.mc3?t.mc3=l.mc3:l.mc2?t.mc2=l.mc2:l.mc1&&(t.mc1=l.mc1)),t},Mp=l=>{const t=["hover:bg-slate-50"];return l.mc1&&!l.mc2&&t.push("font-bold"),l.mc2&&!l.mc3&&t.push("font-bold","italic"),t.join(" ")},WC=({tasks:l,roles:t,departments:s,companyAssignments:o,departmentalAssignments:u})=>{const[d,m]=w.useState(null),[y,x]=w.useState("__ALL__"),[g,v]=w.useState("__ALL__"),[b,N]=w.useState([]),[C,_]=w.useState(""),[E,j]=w.useState(!1),A=w.useMemo(()=>[...s].sort((k,X)=>k.priority-X.priority),[s]);w.useEffect(()=>{A.length>0&&!d&&m(A[0].code)},[A,d]);const H=w.useMemo(()=>d?t.filter(k=>k.departmentCode===d).sort((k,X)=>k.name.localeCompare(X.name)):[],[d,t]),q=()=>{if(!d){alert("Vui lng chn mt phng ban.");return}const k=g==="__ALL__"?null:g;if(y==="__ALL__"){j(!0),H.map(se=>se.id);const X=[];let Z=[];l.forEach(se=>{if(se.isGroupHeader)return;const I=_p(se),D={mc1:I.mc1,mc2:I.mc2,mc3:I.mc3,mc4:I.mc4,"Tn Cng vic":se.name};let F=!1;H.forEach(le=>{var ne,ue;const oe=(ne=o[se.id])==null?void 0:ne[d],ee=((ue=u[se.id])==null?void 0:ue[le.id])||oe;ee&&(!k||ee===k)?(D[le.name]=ee,F=!0,Z.push(ee)):D[le.name]=""}),F&&X.push(D)}),N(X),G(Z)}else{j(!1);const X=[];l.forEach(Z=>{var F,le;if(Z.isGroupHeader)return;const se=(F=o[Z.id])==null?void 0:F[d],D=((le=u[Z.id])==null?void 0:le[y])||se;if(D&&(!k||D===k)){const oe=_p(Z);X.push({id:Z.id,employeeId:y,rowNumber:Z.rowNumber,mc1:oe.mc1,mc2:oe.mc2,mc3:oe.mc3,mc4:oe.mc4,fullCode:[Z.mc1,Z.mc2,Z.mc3,Z.mc4].filter(Boolean).join("."),taskName:Z.name,role:D})}}),N(X),G(X.map(Z=>Z.role))}},G=k=>{const X=k.reduce((se,I)=>(se[I]=(se[I]||0)+1,se),{}),Z=[`Tng cng: ${k.length} lt`,X.T?`Thc hin (T): ${X.T}`:null,X.Q?`Quyt nh (Q): ${X.Q}`:null,X.K?`Kim sot (K): ${X.K}`:null,X.P?`Phi hp (P): ${X.P}`:null,X.B?`Bo co (B): ${X.B}`:null];_(`Thng k: ${Z.filter(Boolean).join(" | ")}`)},P=()=>r.jsxs("table",{className:"min-w-full text-sm border-collapse",children:[r.jsx("thead",{className:"sticky top-0 bg-slate-100 z-10",children:r.jsx("tr",{children:["MC1","MC2","MC3","MC4","Vai tr","Tn Cng vic"].map(k=>r.jsx("th",{className:`p-2 border font-semibold text-left ${k==="MC1"?"font-bold":""}`,children:k},k))})}),r.jsx("tbody",{children:b.map((k,X)=>r.jsxs("tr",{className:Mp(k),children:[r.jsx("td",{className:"p-2 border text-center w-12",children:k.mc1}),r.jsx("td",{className:"p-2 border text-center w-12",children:k.mc2}),r.jsx("td",{className:"p-2 border text-center w-12",children:k.mc3}),r.jsx("td",{className:"p-2 border text-center w-12",children:k.mc4}),r.jsx("td",{className:"p-2 border text-center w-20 font-bold",children:k.role}),r.jsx("td",{className:"p-2 border",children:k.taskName})]},X))})]}),V=()=>{const k=b.length>0?Object.keys(b[0]):[];return r.jsxs("table",{className:"min-w-full text-sm border-collapse",children:[r.jsx("thead",{className:"sticky top-0 bg-slate-100 z-10",children:r.jsx("tr",{children:k.map(X=>r.jsx("th",{className:`p-2 border font-semibold text-left whitespace-nowrap ${X.toLowerCase()==="mc1"?"font-bold":""}`,children:X},X))})}),r.jsx("tbody",{children:b.map((X,Z)=>r.jsx("tr",{className:Mp(X),children:k.map(se=>r.jsx("td",{className:`p-2 border ${["mc1","mc2","mc3","mc4"].includes(se.toLowerCase())?"text-center":""}`,children:X[se]},se))},Z))})]})};return r.jsxs("div",{className:"p-4 h-full flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex-shrink-0 grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"1. Chn Phng ban:"}),r.jsx("select",{value:d||"",onChange:k=>m(k.target.value),className:"w-full mt-1 p-2 border border-slate-300 rounded-md",children:A.map(k=>r.jsx("option",{value:k.code,children:k.name},k.code))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"2. Chn Nhn vin:"}),r.jsxs("select",{value:y,onChange:k=>x(k.target.value),className:"w-full mt-1 p-2 border border-slate-300 rounded-md",children:[r.jsx("option",{value:"__ALL__",children:"(Tt c Nhn vin trong Phng)"}),H.map(k=>r.jsx("option",{value:k.id,children:k.name},k.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"3. Chn vai tr:"}),r.jsxs("select",{value:g,onChange:k=>v(k.target.value),className:"w-full mt-1 p-2 border border-slate-300 rounded-md",children:[r.jsx("option",{value:"__ALL__",children:"(Tt c vai tr)"}),["Q","T","K","B","P"].map(k=>r.jsx("option",{value:k,children:k},k))]})]}),r.jsx("button",{onClick:q,className:"w-full p-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700",children:"Xem Nhim v"})]}),r.jsx("div",{className:"flex-shrink-0 p-2 bg-slate-50 rounded-md text-sm font-semibold",children:C}),r.jsx("div",{className:"flex-1 overflow-auto border border-slate-200 rounded-md",children:b.length===0?r.jsx("div",{className:"flex justify-center items-center h-full text-slate-500",children:'Chn b lc v nhn "Xem Nhim v"  bt u.'}):E?r.jsx(V,{}):r.jsx(P,{})}),r.jsx("div",{className:"flex-shrink-0 flex justify-end",children:r.jsx("button",{className:"px-4 py-2 text-sm bg-slate-200 rounded hover:bg-slate-300",children:"Xut ra Excel"})})]})},vg="process_lookup_files_",bg="process_lookup_summary_",e1=l=>new Promise((t,s)=>{const o=new FileReader;o.readAsDataURL(l),o.onload=()=>{const u=o.result.split(",")[1];t(u)},o.onerror=u=>s(u)}),Ju=l=>{try{const t=localStorage.getItem(`${vg}${l}`);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load task files:",t),[]}},Tg=(l,t)=>{try{localStorage.setItem(`${vg}${l}`,JSON.stringify(t))}catch(s){console.error("Failed to save task files:",s)}},t1=async(l,t)=>{const s=Ju(l);if(s.some(m=>m.name===t.name))return s;const o=await e1(t),u={name:t.name,type:t.type,data:o},d=[...s,u];return Tg(l,d),d},n1=(l,t)=>{const o=Ju(l).filter(u=>u.name!==t);return Tg(l,o),o},l1=l=>localStorage.getItem(`${bg}${l}`)||"",i1=(l,t)=>{localStorage.setItem(`${bg}${l}`,t)},s1=l=>{const t={},s={};return l.forEach(o=>{t[o]=Ju(o),s[o]=l1(o)}),{files:t,summaries:s}},o1=l=>{const t={mc1:"",mc2:"",mc3:"",mc4:""};return!l||l.isGroupHeader||(l.mc4?t.mc4=l.mc4:l.mc3?t.mc3=l.mc3:l.mc2?t.mc2=l.mc2:l.mc1&&(t.mc1=l.mc1)),t},a1=(l,t)=>{const s=["cursor-pointer"];return(t==null?void 0:t.id)===l.id?s.push("bg-blue-100"):s.push("hover:bg-slate-50"),l.mc1&&!l.mc2&&s.push("font-bold"),l.mc2&&!l.mc3&&s.push("font-bold","italic"),s.join(" ")},r1=({file:l,onClose:t})=>{if(!l)return null;const s=l.type.startsWith("image/")||l.type==="application/pdf",[o,u]=w.useState(null);return w.useEffect(()=>{const m=((x,g)=>{const v=atob(x),b=new Array(v.length);for(let C=0;C<v.length;C++)b[C]=v.charCodeAt(C);const N=new Uint8Array(b);return new Blob([N],{type:g})})(l.data,l.type),y=URL.createObjectURL(m);return u(y),()=>{URL.revokeObjectURL(y),u(null)}},[l]),r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[90vh] flex flex-col",children:[r.jsxs("header",{className:"flex justify-between items-center p-3 border-b",children:[r.jsx("h3",{className:"font-bold text-lg truncate",children:l.name}),r.jsx("button",{onClick:t,className:"text-2xl font-bold hover:text-red-600",children:""})]}),r.jsx("main",{className:"flex-1 p-2 bg-slate-200",children:o&&s?r.jsx("iframe",{src:o,title:l.name,className:"w-full h-full border-0"}):o?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[r.jsx("p",{className:"text-slate-600",children:"Khng th xem trc loi file ny."}),r.jsx("a",{href:o,download:l.name,className:"mt-4 px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700",children:"Ti File"})]}):r.jsx("p",{className:"text-slate-500 text-center",children:"ang ti file..."})})]})})},u1=({tasks:l})=>{const[t,s]=w.useState(""),[o,u]=w.useState(null),[d,m]=w.useState(null),[y,x]=w.useState({}),[g,v]=w.useState({}),[b,N]=w.useState(!1),C=w.useRef(null);w.useEffect(()=>{const P=l.map(X=>X.id),{files:V,summaries:k}=s1(P);x(V),v(k)},[l]);const _=w.useMemo(()=>{if(!t)return l.filter(V=>!V.isGroupHeader);const P=t.toLowerCase();return l.filter(V=>!V.isGroupHeader&&(V.name.toLowerCase().includes(P)||[V.mc1,V.mc2,V.mc3,V.mc4].some(k=>k.toLowerCase().includes(P))))},[l,t]),E=w.useMemo(()=>y[(o==null?void 0:o.id)||""]||[],[y,o]),j=w.useMemo(()=>g[(o==null?void 0:o.id)||""],[g,o]),A=()=>{var P;(P=C.current)==null||P.click()},H=async P=>{if(P.target.files&&o){const V=Array.from(P.target.files);for(const k of V){const X=await t1(o.id,k);x(Z=>({...Z,[o.id]:X}))}}P.target&&(P.target.value="")},q=P=>{if(o&&window.confirm(`Bn c chc mun xa file "${P}" khng?`)){const V=n1(o.id,P);x(k=>({...k,[o.id]:V}))}},G=async()=>{if(!(!o||E.length===0)){N(!0);try{const P=`[NG VAI]: Bn l mt tr l AI chuyn nghip, c kh nng c v tm tt ti liu.
[NHIM V]: Da trn ni dung ca cc ti liu c nh km, hy to ra mt bn tm tt cc bc hoc cc im chnh cn thc hin cho nhim v "${o.name}". Trnh by kt qu mt cch r rng, mch lc di dng Markdown.`,V=E.map(X=>({mimeType:X.type,data:X.data})),k=await mC(P,V);i1(o.id,k),v(X=>({...X,[o.id]:k}))}catch(P){console.error("Error generating summary:",P),alert(" c li khi to tm tt. Vui lng kim tra console  bit chi tit.")}finally{N(!1)}}};return r.jsxs("div",{className:"h-full flex",children:[d&&r.jsx(r1,{file:d,onClose:()=>m(null)}),r.jsx("input",{type:"file",ref:C,onChange:H,multiple:!0,className:"hidden"}),r.jsxs("div",{className:"w-2/5 border-r border-slate-200 flex flex-col p-2",children:[r.jsx("input",{type:"text",placeholder:"Tm kim theo M hoc Tn...",value:t,onChange:P=>s(P.target.value),className:"w-full p-2 border border-slate-300 rounded-md mb-2"}),r.jsx("div",{className:"flex-1 overflow-auto border rounded-md",children:r.jsxs("table",{className:"min-w-full text-sm border-collapse",children:[r.jsx("thead",{className:"sticky top-0 bg-slate-100 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 border font-bold w-12",children:"MC1"}),r.jsx("th",{className:"p-2 border font-semibold w-12",children:"MC2"}),r.jsx("th",{className:"p-2 border font-semibold w-12",children:"MC3"}),r.jsx("th",{className:"p-2 border font-semibold w-12",children:"MC4"}),r.jsx("th",{className:"p-2 border text-left font-semibold",children:"Tn Nhim v"})]})}),r.jsx("tbody",{children:_.map(P=>{const V=o1(P);return r.jsxs("tr",{onClick:()=>u(P),className:a1(P,o),children:[r.jsx("td",{className:"p-1 border text-center",children:V.mc1}),r.jsx("td",{className:"p-1 border text-center",children:V.mc2}),r.jsx("td",{className:"p-1 border text-center",children:V.mc3}),r.jsx("td",{className:"p-1 border text-center",children:V.mc4}),r.jsx("td",{className:"p-1 border",children:P.name})]},P.id)})})]})})]}),r.jsx("div",{className:"w-3/5 flex flex-col p-4 space-y-4",children:o?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex-1 flex flex-col border border-slate-200 rounded-md p-4 bg-white shadow-sm",children:[r.jsx("h3",{className:"text-lg font-bold mb-2 text-slate-800",children:"Tm tt Quy trnh Thc hin (AI)"}),r.jsx("div",{className:"flex-1 overflow-y-auto bg-slate-50 p-3 rounded prose prose-sm max-w-none",children:b?r.jsx("p",{className:"text-slate-500 animate-pulse",children:"AI ang c ti liu v tm tt..."}):j?r.jsx("div",{dangerouslySetInnerHTML:{__html:ta(j)}}):r.jsx("p",{className:"text-slate-500",children:"Cha c tm tt. Hy ti ln ti liu v yu cu AI to."})}),r.jsxs("button",{onClick:G,disabled:E.length===0||b,className:"mt-4 px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[r.jsx(en,{}),b?"ang x l...":"AI: To Tm tt t Ti liu"]})]}),r.jsxs("div",{className:"flex-shrink-0 border border-slate-200 rounded-md p-4 h-56 flex flex-col bg-white shadow-sm",children:[r.jsx("h3",{className:"text-lg font-bold mb-2 text-slate-800",children:"Cc File Mu / Ti liu Lin quan"}),r.jsx("div",{className:"flex-1 overflow-y-auto border-t pt-2",children:E.length===0?r.jsx("p",{className:"text-slate-500 text-sm text-center pt-4",children:"Cha c file no c nh km cho nhim v ny."}):r.jsx("ul",{className:"space-y-2",children:E.map(P=>r.jsxs("li",{className:"flex items-center justify-between p-2 bg-slate-100 rounded-md text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 truncate",children:[r.jsx(hs,{className:"w-4 h-4 text-slate-600 flex-shrink-0"}),r.jsx("span",{className:"font-medium truncate",children:P.name})]}),r.jsxs("div",{className:"flex items-center flex-shrink-0",children:[r.jsxs("button",{onClick:()=>m(P),className:"p-1 hover:bg-slate-200 rounded-full text-blue-600 flex items-center gap-1 text-xs px-2",children:[r.jsx(Tx,{className:"w-4 h-4"})," Xem"]}),r.jsx("button",{onClick:()=>q(P.name),className:"p-1 hover:bg-red-100 rounded-full ml-2",children:r.jsx(Wt,{className:"w-4 h-4 text-red-500"})})]})]},P.name))})}),r.jsx("div",{className:"border-t pt-2 mt-2",children:r.jsxs("button",{onClick:A,className:"w-full px-4 py-2 bg-slate-200 text-slate-700 font-semibold rounded-md hover:bg-slate-300 flex items-center justify-center gap-2",children:[r.jsx(kp,{})," Ti ln ti liu..."]})})]})]}):r.jsx("div",{className:"flex h-full items-center justify-center text-slate-500",children:"Vui lng chn mt nhim v t danh sch bn tri  xem chi tit."})})]})},c1=l=>{if(!l)return{headers:[],rows:[]};const t=l.split(`
`).map(u=>u.trim()).filter(u=>u.startsWith("|"));if(t.length<2)return{headers:[],rows:[]};const s=t[0].split("|").map(u=>u.trim()).filter(Boolean),o=t.slice(2).map(u=>u.split("|").map(d=>d.trim()).filter((d,m)=>m>0&&m<=s.length));return{headers:s,rows:o}},d1=({tasks:l,setTasks:t,departments:s,setDepartments:o,roles:u,setRoles:d,generatedTaskMarkdown:m,setGeneratedTaskMarkdown:y,companyMatrixAssignments:x,setCompanyMatrixAssignments:g,departmentalAssignments:v,setDepartmentalAssignments:b,versions:N,setVersions:C,loadVersionData:_,activeVersionId:E,setActiveVersionId:j})=>{const[A,H]=w.useState("versions"),[q,G]=w.useState(!1),[P,V]=w.useState([{id:1,question:"M t ngn gn v Doanh nghip",answer:""},{id:2,question:"Quy trnh/Hot ng chnh",answer:""},{id:3,question:"K vng v Phn cng",answer:""}]),[k,X]=w.useState([]),[Z,se]=w.useState(""),[I,D]=w.useState(!1),[F,le]=w.useState(null),oe=ue=>{y(ue);const me=mg(ue);t(me),H("tasks")},O=ue=>{const{headers:me,rows:R}=c1(ue),J=me.slice(5),ie={};R.forEach((te,de)=>{const pe=l[de];if(pe&&!pe.isGroupHeader){const Ce={};J.forEach((Oe,Ge)=>{const Pt=s.find(zt=>zt.name===Oe);if(Pt){const zt=te[Ge+5];zt&&(Ce[Pt.code]=zt)}}),ie[pe.id]=Ce}}),g(ie),H("company")},ee=[{id:"tasks",label:"Danh sch Nhim v",icon:r.jsx(Nx,{})},{id:"company",label:"Ma trn Cp Cng ty",icon:r.jsx(qu,{})},{id:"department",label:"Phn nhim Chi tit",icon:r.jsx(Sx,{})},{id:"personnel",label:"Qun l Nhn s",icon:r.jsx(Vp,{})},{id:"process",label:"Tra cu Quy trnh",icon:r.jsx(Cx,{})},{id:"audit",label:"Kim tra Logic",icon:r.jsx(om,{})},{id:"dashboard",label:"Bng Tng hp",icon:r.jsx(Ax,{})},{id:"versions",label:"Qun l Phin bn",icon:r.jsx(om,{})}],ne=()=>{switch(A){case"tasks":return r.jsx(HC,{tasks:l,setTasks:t,isLoading:q});case"company":return r.jsx(qC,{tasks:l,departments:s,assignments:x,setAssignments:g,isLoading:q});case"department":return r.jsx(PC,{tasks:l,roles:u,departments:s,companyAssignments:x,departmentalAssignments:v,setDepartmentalAssignments:b});case"personnel":return r.jsx(YC,{departments:s,setDepartments:o,roles:u,setRoles:d});case"versions":return r.jsx(XC,{versions:N,setVersions:C,tasks:l,departments:s,roles:u,generatedTaskMarkdown:m,companyAssignments:x,departmentalAssignments:v,loadVersionData:_,activeVersionId:E,setActiveVersionId:j});case"audit":return r.jsx(ZC,{tasks:l,roles:u,departments:s,companyAssignments:x,departmentalAssignments:v});case"dashboard":return r.jsx(WC,{tasks:l,roles:u,departments:s,companyAssignments:x,departmentalAssignments:v});case"process":return r.jsx(u1,{tasks:l});default:return null}};return r.jsxs("div",{className:"h-full flex",children:[r.jsxs("div",{className:"flex-[3] flex flex-col",children:[r.jsx("div",{className:"flex-shrink-0 bg-white p-2 border-b border-slate-200",children:r.jsx("div",{className:"flex items-center space-x-1",children:ee.map(ue=>r.jsxs("button",{onClick:()=>H(ue.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${A===ue.id?"bg-blue-600 text-white":"text-slate-600 hover:bg-slate-100"}`,children:[ue.icon," ",ue.label]},ue.id))})}),r.jsx("main",{className:"flex-1 overflow-auto bg-white",children:ne()})]}),r.jsx(UC,{contextInputs:P,onContextChange:(ue,me)=>V(R=>R.map(J=>J.id===ue?{...J,answer:me}:J)),onTasksGenerated:oe,onCompanyMatrixGenerated:O,isLoading:q,setIsLoading:G,tasksGenerated:l.length>0,generatedTaskMarkdown:m,departments:s,chatMessages:k,setChatMessages:X,lastAiResponse:Z,setLastAiResponse:se,isAiCockpitCollapsed:I,setIsAiCockpitCollapsed:D,attachedFile:F,setAttachedFile:le,onApplyToNote:ue=>{const me=P[0].answer;V(R=>R.map(J=>J.id===1?{...J,answer:`${me}

[AI Ghi ch]:
${ue}`}:J))}})]})},f1=({availableKpis:l,onClose:t,onSelect:s})=>{const[o,u]=w.useState(new Set),d=y=>{u(x=>{const g=new Set(x);return g.has(y)?g.delete(y):g.add(y),g})},m=()=>{const y=l.filter(x=>o.has(x.code));s(y),t()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl flex flex-col h-[70vh]",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Th vin KPI"}),r.jsx("div",{className:"flex-1 overflow-y-auto border-t border-b mb-4",children:l.map(y=>r.jsxs("div",{className:"flex items-center p-2 border-b hover:bg-slate-50",children:[r.jsx("input",{type:"checkbox",checked:o.has(y.code),onChange:()=>d(y.code),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsxs("div",{className:"ml-3 text-sm",children:[r.jsxs("label",{className:"font-medium text-gray-900",children:[y.code,": ",y.description]}),r.jsxs("p",{className:"text-gray-500",children:["n v: ",y.unit," | Nhm: ",y.category]})]})]},y.code))}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-slate-200 rounded-md hover:bg-slate-300",children:"Hy"}),r.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Thm mc  chn"})]})]})})},h1=({goals:l,setGoals:t,departments:s,roles:o,userTasks:u,predefinedKpis:d})=>{var se;const[m,y]=w.useState(((se=s[0])==null?void 0:se.code)||null),[x,g]=w.useState(null),[v,b]=w.useState(null),[N,C]=w.useState(!1),[_,E]=w.useState(null),[j,A]=w.useState(null),H=w.useMemo(()=>m?o.filter(I=>I.departmentCode===m):[],[m,o]),q=w.useMemo(()=>x?u.filter(I=>I.employeeId===x):[],[x,u]),G=w.useMemo(()=>x?l.filter(I=>I.employeeId===x):[],[x,l]),P=()=>{const I=u.find(le=>le.id===v),D=o.find(le=>le.id===x);if(!I||!D){alert("Vui lng chn nhn vin v nhim v.");return}const F={goalId:`goal-${Date.now()}`,goalDescription:`Mc tiu mi cho: ${I.taskName}`,employeeId:D.id,employeeName:D.name,departmentCode:D.departmentCode,linkedTaskId:I.id,linkedTaskName:I.taskName,kpis:[]};t(le=>[...le,F])},V=(I,D,F)=>{t(le=>le.map(oe=>oe.goalId===I?{...oe,[D]:F}:oe))},k=I=>{window.confirm("Bn c chc mun xa mc tiu ny v tt c KPI lin quan khng?")&&t(D=>D.filter(F=>F.goalId!==I))},X=I=>{if(!_)return;const D=I.map(F=>({kpiId:`kpi-${Date.now()}-${F.code}`,kpiCode:F.code,description:F.description,unit:F.unit,baseline:0,target:0,actual:0,progress:0,history:[]}));t(F=>F.map(le=>{if(le.goalId===_){const oe=new Set(le.kpis.map(ee=>ee.kpiCode)),O=D.filter(ee=>!oe.has(ee.kpiCode));return{...le,kpis:[...le.kpis,...O]}}return le}))},Z=async I=>{A(I.goalId);const D=await vC(I.linkedTaskName,I.goalDescription);if(D&&D.length>0){const F=D.map(le=>({...le,kpiId:`kpi-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,kpiCode:"AI",actual:le.baseline??0,progress:0,history:[]}));t(le=>le.map(oe=>{if(oe.goalId===I.goalId){const O=new Set(oe.kpis.map(ne=>ne.description.trim())),ee=F.filter(ne=>!O.has(ne.description.trim()));return ee.length<F.length&&alert("Mt vi gi  t AI  tn ti trong mc tiu ny v s c b qua."),{...oe,kpis:[...oe.kpis,...ee]}}return oe}))}else alert("AI khng th to gi  KPI cho mc tiu ny.");A(null)};return r.jsxs("div",{className:"h-full flex p-4 space-x-4 bg-slate-50",children:[N&&r.jsx(f1,{availableKpis:d,onClose:()=>C(!1),onSelect:X}),r.jsxs("aside",{className:"w-1/3 flex flex-col space-y-4",children:[r.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-sm",children:[r.jsx("h3",{className:"font-bold mb-2",children:"1. Chn Nhn vin"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("select",{onChange:I=>{y(I.target.value),g(null)},value:m||"",className:"w-full p-2 border rounded",children:s.map(I=>r.jsx("option",{value:I.code,children:I.name},I.code))}),r.jsxs("select",{onChange:I=>g(I.target.value),value:x||"",className:"w-full p-2 border rounded",disabled:!m,children:[r.jsx("option",{value:"",children:"-- Chn nhn vin --"}),H.map(I=>r.jsx("option",{value:I.id,children:I.name},I.id))]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col bg-white p-3 border rounded-lg shadow-sm",children:[r.jsx("h3",{className:"font-bold mb-2",children:"2. Chn Nhim v  gn Mc tiu"}),r.jsx("div",{className:"flex-1 overflow-y-auto border rounded p-1",children:x?q.length>0?r.jsx("ul",{className:"divide-y",children:q.map(I=>r.jsxs("li",{onClick:()=>b(I.id),className:`p-2 cursor-pointer rounded ${v===I.id?"bg-blue-100":"hover:bg-slate-50"}`,children:[r.jsx("span",{className:"font-mono text-sm bg-slate-200 px-1 rounded mr-2",children:I.fullCode}),I.taskName]},I.id))}):r.jsx("p",{className:"text-sm text-slate-500 text-center p-4",children:"Nhn vin ny khng c nhim v 'Thc hin' (T) no."}):r.jsx("p",{className:"text-sm text-slate-500 text-center p-4",children:"Vui lng chn nhn vin  xem nhim v."})}),r.jsx("button",{onClick:P,disabled:!v,className:"w-full mt-2 p-2 bg-blue-600 text-white rounded font-semibold disabled:bg-slate-400",children:"Thm Mc tiu cho Nhim v ny"})]})]}),r.jsxs("main",{className:"w-2/3 flex-1 flex flex-col",children:[r.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2",children:[r.jsx("h3",{className:"text-lg font-bold",children:"3. Thit lp Mc tiu v KPIs"}),G.length>0?G.map(I=>r.jsxs("div",{className:"bg-white p-4 border rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("input",{type:"text",value:I.goalDescription,onChange:D=>V(I.goalId,"goalDescription",D.target.value),className:"text-lg font-bold w-full border-b-2 border-transparent focus:border-blue-500 outline-none"}),r.jsx("button",{onClick:()=>k(I.goalId),className:"ml-4 p-1 text-slate-400 hover:text-red-600",children:r.jsx(Wt,{})})]}),r.jsxs("p",{className:"text-sm text-slate-500 mb-3",children:["Lin kt vi nhim v: ",I.linkedTaskName]}),r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"text-left bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 w-24",children:"M s"}),r.jsx("th",{className:"p-2",children:"M t KPI"}),r.jsx("th",{className:"p-2 w-28",children:"Ban u"}),r.jsx("th",{className:"p-2 w-28",children:"Mc tiu"}),r.jsx("th",{className:"p-2 w-20",children:"n v"}),r.jsx("th",{className:"p-2 w-12"})]})}),r.jsx("tbody",{children:I.kpis.map((D,F)=>r.jsxs("tr",{children:[r.jsx("td",{className:"p-1 border-b",children:D.kpiCode}),r.jsx("td",{className:"p-1 border-b",children:D.description}),r.jsx("td",{className:"p-1 border-b",children:r.jsx("input",{type:"number",value:D.baseline,onChange:le=>{const oe=[...I.kpis];oe[F].baseline=Number(le.target.value),V(I.goalId,"kpis",oe)},className:"w-full p-1 border rounded"})}),r.jsx("td",{className:"p-1 border-b",children:r.jsx("input",{type:"number",value:D.target,onChange:le=>{const oe=[...I.kpis];oe[F].target=Number(le.target.value),V(I.goalId,"kpis",oe)},className:"w-full p-1 border rounded"})}),r.jsx("td",{className:"p-1 border-b text-center",children:D.unit}),r.jsx("td",{className:"p-1 border-b text-center",children:r.jsx("button",{onClick:()=>{const le=I.kpis.filter(oe=>oe.kpiId!==D.kpiId);V(I.goalId,"kpis",le)},className:"p-1 text-slate-400 hover:text-red-600",children:r.jsx(Wt,{})})})]},D.kpiId))})]}),r.jsxs("div",{className:"mt-3 flex gap-2",children:[r.jsxs("button",{onClick:()=>{E(I.goalId),C(!0)},className:"px-3 py-1 text-sm bg-slate-200 rounded hover:bg-slate-300 flex items-center gap-1",children:[r.jsx(Qn,{})," Chn KPI t Th vin..."]}),r.jsxs("button",{onClick:()=>Z(I),disabled:j===I.goalId,className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1 disabled:opacity-50",children:[r.jsx(en,{})," ",j===I.goalId?"ang x l...":"AI Gi  KPI"]})]})]},I.goalId)):r.jsxs("div",{className:"text-center p-8 border-2 border-dashed rounded-lg",children:[r.jsx("p",{className:"text-slate-500",children:"Cha c mc tiu no c thit lp cho nhn vin ny."}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:'Hy chn mt nhim v v nhn "Thm Mc tiu".'})]})]}),r.jsx("div",{className:"flex-shrink-0 mt-4",children:r.jsx("button",{onClick:()=>{alert(" lu thay i.")},className:"w-full p-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700",children:"Lu ton b"})})]})]})},m1=l=>{const t=new Date(l),s=t.getDay(),o=t.getDate()-s+(s===0?-6:1);return new Date(t.setDate(o))},Ng=l=>{const t=m1(l),s=[];for(let o=0;o<7;o++){const u=new Date(t);u.setDate(t.getDate()+o),s.push(u)}return s},p1=l=>{const t=Ng(l),s=t[0],o=t[6];return`${s.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})} - ${o.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})}`},g1=l=>l.toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Qu=(l,t)=>l.getFullYear()===t.getFullYear()&&l.getMonth()===t.getMonth()&&l.getDate()===t.getDate(),y1=l=>{const t=[],s=new Date(l.getFullYear(),l.getMonth(),1),o=s.getDay(),u=o===0?6:o-1;s.setDate(s.getDate()-u);for(let d=0;d<6;d++){const m=[];for(let y=0;y<7;y++)m.push(new Date(s)),s.setDate(s.getDate()+1);if(t.push(m),s.getMonth()!==l.getMonth()&&d>=3)break}return t},x1=l=>`Thng ${l.getMonth()+1}, ${l.getFullYear()}`,v1=({kpi:l,date:t,onClose:s,onSave:o})=>{const u=l.history.find(v=>Qu(new Date(v.date),t)),[d,m]=w.useState((u==null?void 0:u.value)??l.actual),[y,x]=w.useState((u==null?void 0:u.comment)??""),g=v=>{v.preventDefault();const b={id:(u==null?void 0:u.id)||`entry-${Date.now()}`,date:t.toISOString(),value:d,comment:y};o(l.kpiId,b),s()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:r.jsxs("form",{onSubmit:g,className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md space-y-4",children:[r.jsxs("h2",{className:"text-xl font-bold mb-2",children:["Ghi nhn Tin  ngy ",t.toLocaleDateString("vi-VN")]}),r.jsxs("p",{className:"text-sm text-slate-600 border-b pb-2",children:["KPI: ",l.description]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"Gi tr thc t mi:"}),r.jsx("input",{type:"number",step:"any",value:d,onChange:v=>m(Number(v.target.value)),className:"w-full mt-1 p-2 border rounded",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"Ghi ch (ty chn):"}),r.jsx("textarea",{value:y,onChange:v=>x(v.target.value),rows:3,className:"w-full mt-1 p-2 border rounded"})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-slate-200 rounded-md hover:bg-slate-300",children:"Hy"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Lu"})]})]})})},b1=({goals:l,setGoals:t,departments:s,roles:o})=>{var j;const[u,d]=w.useState({type:"dept",code:(j=s[0])==null?void 0:j.code}),[m,y]=w.useState(null),[x,g]=w.useState("month"),[v,b]=w.useState(new Date),N=w.useMemo(()=>!u||!u.code?[]:u.type==="dept"?l.filter(A=>A.departmentCode===u.code):l.filter(A=>A.employeeId===u.code),[l,u]),C=(A,H)=>{t(q=>q.map(G=>{var se;const P=G.kpis.findIndex(I=>I.kpiId===A);if(P===-1)return G;const V={...G.kpis[P]},k=V.history.findIndex(I=>I.id===H.id||Qu(new Date(I.date),new Date(H.date)));k>-1?V.history[k]=H:V.history.push(H),V.history.sort((I,D)=>new Date(D.date).getTime()-new Date(I.date).getTime()),V.actual=((se=V.history[0])==null?void 0:se.value)??V.baseline;const X=V.target-V.baseline===0?V.actual>=V.target?1:0:(V.actual-V.baseline)/(V.target-V.baseline);V.progress=Math.max(0,Math.min(1,X));const Z=[...G.kpis];return Z[P]=V,{...G,kpis:Z}}))},_=A=>{b(H=>{const q=new Date(H);return x==="day"&&q.setDate(q.getDate()+A),x==="week"&&q.setDate(q.getDate()+A*7),x==="month"&&q.setMonth(q.getMonth()+A),x==="year"&&q.setFullYear(q.getFullYear()+A),q})},E=()=>{switch(x){case"day":return r.jsx(C1,{goals:N,date:v,onCheckInClick:(A,H)=>y({kpi:A,date:H})});case"week":return r.jsx(S1,{goals:N,date:v,onCheckInClick:(A,H)=>y({kpi:A,date:H})});case"month":return r.jsx(N1,{goals:N,date:v,onCheckInClick:(A,H)=>y({kpi:A,date:H})});case"year":default:return r.jsx(T1,{goals:N})}};return r.jsxs("div",{className:"p-4 h-full flex flex-col space-y-4 bg-slate-50",children:[m&&r.jsx(v1,{kpi:m.kpi,date:m.date,onClose:()=>y(null),onSave:C}),r.jsxs("div",{className:"flex-shrink-0 flex flex-wrap items-center gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{className:"font-semibold",children:"Xem theo:"}),r.jsx("select",{onChange:A=>{const[H,q]=A.target.value.split("|");d({type:H,code:q})},className:"p-2 border border-slate-300 rounded-md bg-white shadow-sm",children:s.map(A=>r.jsxs("optgroup",{label:A.name,children:[r.jsx("option",{value:`dept|${A.code}`,children:`Ton b ${A.name}`}),o.filter(H=>H.departmentCode===A.code).map(H=>r.jsx("option",{value:`emp|${H.id}`,children:H.name},H.id))]},A.code))})]}),r.jsxs("div",{className:"flex items-center space-x-2 border-l pl-4",children:[r.jsx("label",{className:"font-semibold",children:"Ch  xem:"}),r.jsx("div",{className:"flex rounded-md shadow-sm bg-white border",children:["year","month","week","day"].map(A=>r.jsx("button",{onClick:()=>g(A),className:`px-3 py-1.5 text-sm ${x===A?"bg-blue-600 text-white":"bg-white text-slate-700 hover:bg-slate-100"} first:rounded-l-md last:rounded-r-md`,children:A==="year"?"Nm":A==="month"?"Thng":A==="week"?"Tun":"Ngy"},A))})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>_(-1),className:"p-2 rounded-md hover:bg-slate-200",children:"<"}),r.jsxs("span",{className:"font-semibold text-blue-700 w-40 text-center",children:[x==="day"&&g1(v),x==="week"&&p1(v),x==="month"&&x1(v),x==="year"&&`Nm ${v.getFullYear()}`]}),r.jsx("button",{onClick:()=>_(1),className:"p-2 rounded-md hover:bg-slate-200",children:">"})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2",children:E()})]})},T1=({goals:l})=>l.length===0?r.jsx("div",{className:"text-center text-slate-500 p-8",children:"Khng c mc tiu no cho la chn ny."}):r.jsx(r.Fragment,{children:l.map(t=>{const s=t.kpis.length>0?t.kpis.reduce((o,u)=>o+u.progress,0)/t.kpis.length:0;return r.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg shadow-sm p-4",children:[r.jsx("h4",{className:"font-bold text-blue-800",children:t.goalDescription}),r.jsxs("p",{className:"text-sm text-slate-500 mb-2",children:["Nhn vin: ",t.employeeName," | Nhim v: ",t.linkedTaskName]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx("div",{className:"w-full bg-slate-200 rounded-full h-5",children:r.jsx("div",{className:"bg-green-500 h-5 rounded-full",style:{width:`${Math.min(100,s*100)}%`}})}),r.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-sm font-bold text-white drop-shadow-sm",children:[(s*100).toFixed(0),"%"]})]}),r.jsxs("span",{className:"text-sm font-semibold",children:[t.kpis.length," KPIs"]})]})]},t.goalId)})}),N1=({goals:l,date:t,onCheckInClick:s})=>{const o=y1(t),u=l.flatMap(m=>m.kpis.map(y=>({...y,goal:m}))),d=(m,y)=>{var g;return((g=m.history.filter(v=>new Date(v.date)<=new Date(y.getFullYear(),y.getMonth(),y.getDate(),23,59,59)).sort((v,b)=>new Date(b.date).getTime()-new Date(v.date).getTime())[0])==null?void 0:g.value)??m.baseline};return u.length===0?r.jsx("div",{className:"text-center text-slate-500 p-8",children:"Khng c KPI no  theo di trong thng ny."}):r.jsx("div",{className:"bg-white border border-slate-200 rounded-lg shadow-sm overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm text-center border-collapse",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 border-b text-left w-[25%] font-semibold",children:"KPI"}),["Th 2","Th 3","Th 4","Th 5","Th 6","Th 7","CN"].map(m=>r.jsx("th",{className:"p-2 border-b font-semibold",children:m},m))]})}),r.jsx("tbody",{children:u.map(m=>r.jsxs(Up.Fragment,{children:[r.jsx("tr",{className:"bg-slate-50 font-semibold text-slate-700",children:r.jsxs("td",{colSpan:8,className:"p-2 border-b text-left",children:[r.jsx("p",{children:m.description}),r.jsx("p",{className:"font-normal text-slate-500",children:m.goal.employeeName})]})}),o.map((y,x)=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsx("td",{className:"p-2 border-b font-semibold text-slate-500",children:"Gi tr"}),y.map(g=>{const v=g.getMonth()===t.getMonth();return r.jsxs("td",{onClick:()=>s(m,g),className:`p-2 border-b cursor-pointer hover:bg-blue-100 ${v?"":"text-slate-300 bg-slate-50"}`,children:[r.jsx("span",{className:"block text-xs text-center",children:g.getDate()}),r.jsx("span",{className:"font-semibold",children:d(m,g).toLocaleString()})]},g.toISOString())})]},x))]},m.kpiId))})]})})},S1=({goals:l,date:t,onCheckInClick:s})=>{const o=Ng(t),u=l.flatMap(m=>m.kpis.map(y=>({...y,goal:m}))),d=(m,y)=>{var g;return((g=m.history.filter(v=>new Date(v.date)<=new Date(y.getFullYear(),y.getMonth(),y.getDate(),23,59,59)).sort((v,b)=>new Date(b.date).getTime()-new Date(v.date).getTime())[0])==null?void 0:g.value)??m.baseline};return u.length===0?r.jsx("div",{className:"text-center text-slate-500 p-8",children:"Khng c KPI no  theo di trong tun ny."}):r.jsx("div",{className:"bg-white border border-slate-200 rounded-lg shadow-sm overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm text-center border-collapse",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 border-b text-left w-1/4 font-semibold",children:"KPI"}),o.map(m=>r.jsx("th",{className:"p-2 border-b font-semibold",children:m.toLocaleDateString("vi-VN",{weekday:"short",day:"2-digit"})},m.toISOString()))]})}),r.jsx("tbody",{children:u.map(m=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsxs("td",{className:"p-2 border-b text-left",children:[r.jsx("p",{className:"font-semibold",children:m.description}),r.jsx("p",{className:"text-slate-500",children:m.goal.employeeName})]}),o.map(y=>r.jsx("td",{onClick:()=>s(m,y),className:"p-2 border-b cursor-pointer hover:bg-blue-100",children:d(m,y).toLocaleString()},y.toISOString()))]},m.kpiId))})]})})},C1=({goals:l,date:t,onCheckInClick:s})=>{const o=l.flatMap(u=>u.kpis.map(d=>({...d,goal:u})));return o.length===0?r.jsx("div",{className:"text-center text-slate-500 p-8",children:"Khng c KPI no  theo di trong ngy ny."}):r.jsx("div",{className:"space-y-4",children:o.map(u=>{const d=u.history.filter(m=>Qu(new Date(m.date),t));return r.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg shadow-sm p-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:u.description}),r.jsx("p",{className:"text-sm text-slate-500",children:u.goal.employeeName})]}),r.jsx("button",{onClick:()=>s(u,t),className:"text-sm bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200",children:"Thm Check-in"})]}),r.jsx("div",{className:"mt-2 border-t pt-2",children:d.length>0?r.jsx("ul",{className:"space-y-1 text-sm",children:d.map(m=>r.jsxs("li",{className:"flex justify-between p-1 rounded",children:[r.jsx("span",{className:"text-slate-500",children:new Date(m.date).toLocaleTimeString("vi-VN")}),r.jsxs("span",{className:"font-bold",children:[m.value.toLocaleString()," ",u.unit]}),r.jsx("span",{className:"italic text-slate-600 truncate flex-1 ml-4",children:m.comment})]},m.id))}):r.jsx("p",{className:"text-sm text-slate-400 italic text-center p-2",children:"Cha c check-in no trong ngy."})})]},u.kpiId)})})},A1=({goals:l,departments:t,roles:s})=>{const[o,u]=w.useState({type:"company",code:"__ALL__"}),d=w.useMemo(()=>o.type==="company"||!o.code?l:o.type==="dept"?l.filter(_=>_.departmentCode===o.code):l.filter(_=>_.employeeId===o.code),[l,o]),m=w.useMemo(()=>d.flatMap(_=>_.kpis),[d]),y=w.useMemo(()=>m.length===0?0:m.reduce((E,j)=>E+j.progress,0)/m.length,[m]),x=w.useMemo(()=>m.filter(_=>_.progress>=1).length,[m]),g=_=>{const E=Lp.filter(G=>G.category===_).map(G=>G.code),j=m.filter(G=>E.includes(G.kpiCode));if(j.length===0)return{actual:0,target:0,unit:""};const A=j[0].unit,H=j.reduce((G,P)=>G+P.actual,0),q=j.reduce((G,P)=>G+P.target,0);return{actual:H,target:q,unit:A}},v=g("Doanh thu"),b=g("Doanh s"),N=g("Dng tin"),C=w.useMemo(()=>o.type==="company"?t.map(_=>{const j=l.filter(H=>H.departmentCode===_.code).flatMap(H=>H.kpis),A=j.length>0?j.reduce((H,q)=>H+q.progress,0)/j.length:0;return{name:_.name,progress:A}}).sort((_,E)=>E.progress-_.progress):o.type==="dept"?s.filter(E=>E.departmentCode===o.code).map(E=>{const A=l.filter(q=>q.employeeId===E.id).flatMap(q=>q.kpis),H=A.length>0?A.reduce((q,G)=>q+G.progress,0)/A.length:0;return{name:E.name,progress:H}}).sort((E,j)=>j.progress-E.progress):[],[o,l,t,s]);return r.jsxs("div",{className:"p-4 h-full flex flex-col space-y-4 bg-slate-50",children:[r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-4",children:[r.jsx("label",{className:"font-semibold",children:"Xem bo co cho:"}),r.jsxs("select",{onChange:_=>{const[E,j]=_.target.value.split("|");u({type:E,code:j})},className:"p-2 border border-slate-300 rounded-md bg-white shadow-sm",children:[r.jsx("option",{value:"company|__ALL__",children:"Ton cng ty"}),t.map(_=>r.jsxs("optgroup",{label:_.name,children:[r.jsx("option",{value:`dept|${_.code}`,children:`Ton b ${_.name}`}),s.filter(E=>E.departmentCode===_.code).map(E=>r.jsx("option",{value:`emp|${E.id}`,children:E.name},E.id))]},_.code))]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[r.jsx("h4",{className:"font-bold text-slate-600",children:"Tin  Chung"}),r.jsxs("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:[(y*100).toFixed(1),"%"]}),r.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5 mt-2",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${y*100}%`}})}),r.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Hon thnh: ",x," / ",m.length," KPIs"]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[r.jsx("h4",{className:"font-bold text-slate-600",children:"Doanh thu"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-2",children:[v.actual.toLocaleString(),r.jsxs("span",{className:"text-lg text-slate-500 font-normal",children:[" / ",v.target.toLocaleString()," ",v.unit]})]}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Thc t so vi K hoch"})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[r.jsx("h4",{className:"font-bold text-slate-600",children:"Doanh s"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-2",children:[b.actual.toLocaleString(),r.jsxs("span",{className:"text-lg text-slate-500 font-normal",children:[" / ",b.target.toLocaleString()," ",b.unit]})]}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Thc t so vi K hoch"})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[r.jsx("h4",{className:"font-bold text-slate-600",children:"Dng tin"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-2",children:[N.actual.toLocaleString(),r.jsxs("span",{className:"text-lg text-slate-500 font-normal",children:[" / ",N.target.toLocaleString()," ",N.unit]})]}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Thc t so vi K hoch"})]})]}),C.length>0&&r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[r.jsx("h4",{className:"font-bold text-slate-600 mb-2",children:o.type==="company"?"Xp hng Hiu sut theo Phng ban":"Xp hng Hiu sut C nhn"}),r.jsx("div",{className:"space-y-2",children:C.map((_,E)=>r.jsxs("div",{className:"flex items-center",children:[r.jsxs("span",{className:"w-6 font-bold text-slate-500",children:["#",E+1]}),r.jsx("span",{className:"w-48 truncate",children:_.name}),r.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-5",children:r.jsxs("div",{className:"bg-blue-500 h-5 rounded-full flex items-center justify-center text-white text-sm font-bold",style:{width:`${Math.min(100,_.progress*100)}%`},children:[(_.progress*100).toFixed(0),"%"]})})]},_.name))})]})]})},E1=({kpi:l,onClose:t,onSave:s})=>{const[o,u]=w.useState(""),[d,m]=w.useState(""),[y,x]=w.useState(""),[g,v]=w.useState("Khc"),b=!!l;w.useEffect(()=>{l&&(u(l.code),m(l.description),x(l.unit),v(l.category))},[l]);const N=C=>{if(C.preventDefault(),!o.trim()||!d.trim()||!y.trim()){alert("Vui lng in y  M s, M t v n v.");return}s({code:o,description:d,unit:y,category:g}),t()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:b?"Sa KPI":"Thm KPI mi"}),r.jsxs("form",{onSubmit:N,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"M s KPI:"}),r.jsx("input",{type:"text",value:o,onChange:C=>u(C.target.value.toUpperCase()),className:"w-full mt-1 p-2 border rounded",required:!0,disabled:b})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"M t:"}),r.jsx("input",{type:"text",value:d,onChange:C=>m(C.target.value),className:"w-full mt-1 p-2 border rounded",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"n v:"}),r.jsx("input",{type:"text",value:y,onChange:C=>x(C.target.value),className:"w-full mt-1 p-2 border rounded",required:!0,placeholder:"VN, %, Hp ng..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"Nhm:"}),r.jsxs("select",{value:g,onChange:C=>v(C.target.value),className:"w-full mt-1 p-2 border rounded",children:[r.jsx("option",{children:"Doanh thu"}),r.jsx("option",{children:"Doanh s"}),r.jsx("option",{children:"Dng tin"}),r.jsx("option",{children:"Khc"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-slate-200 rounded-md hover:bg-slate-300",children:"Hy"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Lu"})]})]})]})})},_1=({kpis:l,setKpis:t})=>{const[s,o]=w.useState(!1),[u,d]=w.useState(null),m=()=>{d(null),o(!0)},y=v=>{d(v),o(!0)},x=v=>{window.confirm(`Bn c chc mun xa KPI "${v}"?`)&&t(b=>b.filter(N=>N.code!==v))},g=v=>{const b=!l.some(N=>N.code===v.code);t(b?N=>[...N,v].sort((C,_)=>C.code.localeCompare(_.code)):N=>N.map(C=>C.code===v.code?v:C))};return r.jsxs("div",{className:"p-4 h-full flex flex-col space-y-4",children:[s&&r.jsx(E1,{kpi:u,onClose:()=>o(!1),onSave:g}),r.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Th vin KPI"}),r.jsxs("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 flex items-center gap-2",children:[r.jsx(Qn,{})," Thm KPI mi"]})]}),r.jsx("div",{className:"flex-1 overflow-auto border border-slate-200 rounded-md bg-white",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-100 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 border-b font-semibold text-left",children:"M s"}),r.jsx("th",{className:"p-2 border-b font-semibold text-left",children:"M t"}),r.jsx("th",{className:"p-2 border-b font-semibold text-center",children:"n v"}),r.jsx("th",{className:"p-2 border-b font-semibold text-left",children:"Nhm"}),r.jsx("th",{className:"p-2 border-b font-semibold text-center",children:"Hnh ng"})]})}),r.jsx("tbody",{children:l.sort((v,b)=>v.code.localeCompare(b.code)).map(v=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsx("td",{className:"p-2 border-b font-mono",children:v.code}),r.jsx("td",{className:"p-2 border-b",children:v.description}),r.jsx("td",{className:"p-2 border-b text-center",children:v.unit}),r.jsx("td",{className:"p-2 border-b",children:v.category}),r.jsxs("td",{className:"p-2 border-b text-center",children:[r.jsx("button",{onClick:()=>y(v),className:"p-1 hover:bg-slate-200 rounded",children:r.jsx(ri,{})}),r.jsx("button",{onClick:()=>x(v.code),className:"p-1 hover:bg-slate-200 rounded ml-2",children:r.jsx(Wt,{})})]})]},v.code))})]})})]})},M1=({departments:l,roles:t,tasks:s,companyMatrixAssignments:o,departmentalAssignments:u})=>{const[d,m]=w.useState("setup"),[y,x]=w.useState(rx),[g,v]=w.useState(Lp),b=w.useMemo(()=>{const _=[];return t.forEach(E=>{s.forEach(j=>{var G,P;if(j.isGroupHeader)return;const A=(G=u[j.id])==null?void 0:G[E.id],H=(P=o[j.id])==null?void 0:P[E.departmentCode],q=A||H;q==="T"&&_.push({id:`${j.id}-${E.id}`,employeeId:E.id,rowNumber:j.rowNumber,mc1:j.mc1,mc2:j.mc2,mc3:j.mc3,mc4:j.mc4,fullCode:[j.mc1,j.mc2,j.mc3,j.mc4].filter(Boolean).join("."),taskName:j.name,role:q})})}),_},[s,t,o,u]),N=[{id:"setup",label:"Thit lp Mc tiu",icon:r.jsx(mx,{className:"w-5 h-5 mr-2"})},{id:"tracking",label:"Theo di Tin ",icon:r.jsx(px,{className:"w-5 h-5 mr-2"})},{id:"dashboard",label:"Bng tng hp Kt qu",icon:r.jsx(gx,{className:"w-5 h-5 mr-2"})},{id:"kpi-library",label:"Qun l Th vin KPI",icon:r.jsx(Hp,{className:"w-5 h-5 mr-2"})}],C=()=>{switch(d){case"setup":return r.jsx(h1,{goals:y,setGoals:x,departments:l,roles:t,userTasks:b,predefinedKpis:g});case"tracking":return r.jsx(b1,{goals:y,setGoals:x,departments:l,roles:t});case"dashboard":return r.jsx(A1,{goals:y,departments:l,roles:t});case"kpi-library":return r.jsx(_1,{kpis:g,setKpis:v});default:return null}};return r.jsxs("div",{className:"h-full flex flex-col bg-slate-200",children:[r.jsx("header",{className:"flex-shrink-0 bg-white p-3 border-b border-slate-200",children:r.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Qun l mc tiu nm"})}),r.jsxs("div",{className:"flex-1 flex min-h-0",children:[r.jsx("aside",{className:"w-60 bg-white border-r border-slate-200 p-2",children:r.jsx("nav",{className:"space-y-1",children:N.map(_=>r.jsxs("button",{onClick:()=>m(_.id),className:`w-full flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ${d===_.id?"bg-blue-100 text-blue-700":"text-slate-600 hover:bg-slate-100"}`,children:[_.icon,r.jsx("span",{children:_.label})]},_.id))})}),r.jsx("main",{className:"flex-1 overflow-auto",children:C()})]})]})},wp=({label:l,description:t,checked:s,onChange:o})=>r.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 pt-4 first:border-t-0 first:pt-0",children:[r.jsxs("div",{children:[r.jsx("label",{className:"font-bold text-slate-700",children:l}),r.jsx("p",{className:"text-xs text-slate-500",children:t})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:s,onChange:u=>o(u.target.checked),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-slate-200 rounded-full peer peer-focus:ring-2 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),w1=({settings:l,setSettings:t})=>{const s=(o,u)=>{t(d=>({...d,[o]:u}))};return r.jsx("div",{className:"space-y-6 max-w-2xl",children:r.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-lg shadow-sm space-y-4",children:[r.jsx(wp,{label:"Hin Prompt",description:"Hin th hp thoi xem trc v chnh sa prompt trc khi gi n AI.",checked:l.showPrompt,onChange:o=>s("showPrompt",o)}),r.jsx(wp,{label:"Dng Google Search",description:"Cho php AI tm kim trn Google  c cu tr li cp nht hn v cc s kin gn y.",checked:l.useGrounding,onChange:o=>s("useGrounding",o)})]})})},D1=({settings:l,setSettings:t})=>{const s=(o,u)=>{t(d=>({...d,[o]:u}))};return r.jsxs("div",{className:"space-y-6 max-w-2xl",children:[r.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-lg shadow-sm",children:[r.jsx("label",{htmlFor:"ai-model",className:"block text-sm font-bold text-slate-700",children:"M hnh AI"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1 mb-2",children:"Chn m hnh ngn ng  s dng cho cc tc v AI."}),r.jsxs("select",{id:"ai-model",value:l.model,onChange:o=>s("model",o.target.value),className:"w-full p-2 border border-slate-300 rounded-md",children:[r.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash (Khuyn ngh)"}),r.jsx("option",{value:"gemini-2.5-pro",children:"Gemini 2.5 Pro (Nng cao)"})]})]}),r.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("label",{htmlFor:"temperature",className:"block text-sm font-bold text-slate-700",children:" sng to (Temperature)"}),r.jsx("span",{className:"text-sm font-mono bg-slate-100 px-2 py-1 rounded",children:l.temperature.toFixed(1)})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1 mb-2",children:"Gi tr cao hn (gn 2.0) cho kt qu sng to hn."}),r.jsx("input",{id:"temperature",type:"range",min:"0",max:"2",step:"0.1",value:l.temperature,onChange:o=>s("temperature",parseFloat(o.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"})]}),r.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("label",{htmlFor:"top-p",className:"block text-sm font-bold text-slate-700",children:"Top-P"}),r.jsx("span",{className:"text-sm font-mono bg-slate-100 px-2 py-1 rounded",children:l.topP.toFixed(2)})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1 mb-2",children:"Kim sot s a dng ca cu tr li."}),r.jsx("input",{id:"top-p",type:"range",min:"0.05",max:"1",step:"0.05",value:l.topP,onChange:o=>s("topP",parseFloat(o.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"})]}),r.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-lg shadow-sm",children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"Ngn sch T duy (Thinking Budget)"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1 mb-2",children:'Phn b token cho qu trnh "suy ngh" ca AI  gii quyt cc tc v phc tp.'}),r.jsxs("div",{className:"space-y-2 mt-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"radio",id:"tb-flexible",name:"thinkingBudget",value:"flexible",checked:l.thinkingBudgetMode==="flexible",onChange:o=>s("thinkingBudgetMode",o.target.value),className:"h-4 w-4 text-blue-600 border-gray-300"}),r.jsx("label",{htmlFor:"tb-flexible",className:"ml-2 block text-sm text-slate-900",children:"Linh hot ( AI t quyt nh)"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"radio",id:"tb-off",name:"thinkingBudget",value:"off",checked:l.thinkingBudgetMode==="off",onChange:o=>s("thinkingBudgetMode",o.target.value),className:"h-4 w-4 text-blue-600 border-gray-300"}),r.jsx("label",{htmlFor:"tb-off",className:"ml-2 block text-sm text-slate-900",children:"Tt t duy (Phn hi nhanh hn)"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"radio",id:"tb-custom",name:"thinkingBudget",value:"custom",checked:l.thinkingBudgetMode==="custom",onChange:o=>s("thinkingBudgetMode",o.target.value),className:"h-4 w-4 text-blue-600 border-gray-300"}),r.jsx("label",{htmlFor:"tb-custom",className:"block text-sm text-slate-900",children:"Ty chnh:"}),r.jsx("input",{type:"number",value:l.customThinkingBudget,onChange:o=>s("customThinkingBudget",parseInt(o.target.value,10)),disabled:l.thinkingBudgetMode!=="custom",className:"p-1 border border-slate-300 rounded-md w-24 text-sm disabled:bg-slate-100"})]})]})]})]})},R1=({apiKey:l,onClose:t,onSave:s})=>{const[o,u]=w.useState(""),[d,m]=w.useState(""),[y,x]=w.useState("Gemini"),g=!!l;w.useEffect(()=>{l&&(u(l.name),m(l.key),x(l.engine))},[l]);const v=b=>{if(b.preventDefault(),!o.trim()||!d.trim()){alert("Tn v API Key khng c  trng.");return}s({id:(l==null?void 0:l.id)||crypto.randomUUID(),name:o,key:d,engine:y,priority:(l==null?void 0:l.priority)||0}),t()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:g?"Sa API Key":"Thm API Key mi"}),r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:'Tn nh danh (VD: "Key c nhn", "Key d n X"):'}),r.jsx("input",{type:"text",value:o,onChange:b=>u(b.target.value),className:"w-full mt-1 p-2 border rounded",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"API Key:"}),r.jsx("input",{type:"password",value:d,onChange:b=>m(b.target.value),className:"w-full mt-1 p-2 border rounded",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium",children:"Engine:"}),r.jsxs("select",{value:y,onChange:b=>x(b.target.value),className:"w-full mt-1 p-2 border rounded",children:[r.jsx("option",{children:"Gemini"}),r.jsx("option",{disabled:!0,children:"Other (sp c)"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-slate-200 rounded-md hover:bg-slate-300",children:"Hy"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Lu"})]})]})]})})},I1=({apiKeys:l,setApiKeys:t})=>{const[s,o]=w.useState(!1),[u,d]=w.useState(null),[m,y]=w.useState(null),x=()=>{d(null),o(!0)},g=E=>{d(E),o(!0)},v=E=>{window.confirm("Bn c chc chn mun xa API key ny khng?")&&t(j=>j.filter(A=>A.id!==E))},b=E=>{const j=!l.some(A=>A.id===E.id);t(j?A=>[...A,E]:A=>A.map(H=>H.id===E.id?E:H))},N=(E,j)=>{y(j),E.dataTransfer.effectAllowed="move"},C=E=>{E.preventDefault()},_=(E,j)=>{if(E.preventDefault(),!m||m===j)return;const A=[...l],H=A.findIndex(V=>V.id===m),q=A.findIndex(V=>V.id===j);if(H===-1||q===-1)return;const[G]=A.splice(H,1);A.splice(q,0,G);const P=A.map((V,k)=>({...V,priority:A.length-k}));t(P),y(null)};return r.jsxs("div",{className:"space-y-6 max-w-4xl",children:[s&&r.jsx(R1,{apiKey:u,onClose:()=>o(!1),onSave:b}),r.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Qun l API Key"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Thm v sp xp cc API key. ng dng s t ng dng key c  u tin cao nht."})]}),r.jsxs("button",{onClick:x,className:"px-3 py-2 text-sm bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 flex items-center gap-2",children:[r.jsx(Qn,{})," Thm Key"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 w-10",children:"u tin"}),r.jsx("th",{className:"p-2 text-left",children:"Tn"}),r.jsx("th",{className:"p-2 text-left",children:"Key (n)"}),r.jsx("th",{className:"p-2 text-left",children:"Engine"}),r.jsx("th",{className:"p-2 text-center w-24",children:"Hnh ng"})]})}),r.jsx("tbody",{children:[...l].sort((E,j)=>j.priority-E.priority).map((E,j)=>r.jsxs("tr",{draggable:!0,onDragStart:A=>N(A,E.id),onDragOver:C,onDrop:A=>_(A,E.id),className:`border-b cursor-move ${m===E.id?"opacity-50":""}`,children:[r.jsx("td",{className:"p-2 text-center font-bold text-slate-500",children:j+1}),r.jsx("td",{className:"p-2 font-semibold",children:E.name}),r.jsx("td",{className:"p-2 font-mono text-slate-500",children:`...${E.key.slice(-4)}`}),r.jsx("td",{className:"p-2",children:E.engine}),r.jsxs("td",{className:"p-2 text-center",children:[r.jsx("button",{onClick:()=>g(E),className:"p-1 hover:bg-slate-200 rounded",children:r.jsx(ri,{})}),r.jsx("button",{onClick:()=>v(E.id),className:"p-1 hover:bg-slate-200 rounded ml-2",children:r.jsx(Wt,{})})]})]},E.id))})]})})]})]})},Sg="ai_assistant_settings",Cg="ai_assistant_api_keys",Dp={model:"gemini-2.5-flash",temperature:.7,topP:.9,showPrompt:!1,useGrounding:!1,thinkingBudgetMode:"flexible",customThinkingBudget:8192},U1={id:`gemini-default-${Date.now()}`,name:"Gemini Key Mc nh",key:"YOUR_GEMINI_API_KEY_HERE",engine:"Gemini",priority:1},j1=()=>{try{const l=localStorage.getItem(Sg);if(l)return{...Dp,...JSON.parse(l)}}catch(l){console.error("Failed to parse settings from localStorage",l)}return Dp},L1=l=>{try{localStorage.setItem(Sg,JSON.stringify(l))}catch(t){console.error("Failed to save settings to localStorage",t)}},H1=()=>{try{const l=localStorage.getItem(Cg);if(l){const t=JSON.parse(l);if(t.length>0)return t.sort((s,o)=>o.priority-s.priority)}}catch(l){console.error("Failed to parse API keys from localStorage",l)}return[U1]},k1=l=>{try{const t=l.map((s,o)=>({...s,priority:l.length-o}));localStorage.setItem(Cg,JSON.stringify(t))}catch(t){console.error("Failed to save API keys to localStorage",t)}},G1=()=>{const[l,t]=w.useState("parameters"),[s,o]=w.useState(j1()),[u,d]=w.useState(H1());w.useEffect(()=>{L1(s)},[s]),w.useEffect(()=>{k1(u)},[u]);const m=[{id:"general",label:"Ci t Chung",icon:r.jsx(qp,{className:"w-5 h-5 mr-3"})},{id:"parameters",label:"Tham s Model",icon:r.jsx(yx,{className:"w-5 h-5 mr-3"})},{id:"api-keys",label:"Qun l API Key",icon:r.jsx(xx,{className:"w-5 h-5 mr-3"})}],y=()=>{switch(l){case"general":return r.jsx(w1,{settings:s,setSettings:o});case"parameters":return r.jsx(D1,{settings:s,setSettings:o});case"api-keys":return r.jsx(I1,{apiKeys:u,setApiKeys:d});default:return null}};return r.jsxs("div",{className:"h-full flex flex-col bg-slate-200",children:[r.jsx("header",{className:"flex-shrink-0 bg-white p-4 border-b border-slate-200",children:r.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Ci t M hnh AI"})}),r.jsxs("div",{className:"flex-1 flex min-h-0",children:[r.jsx("aside",{className:"w-64 bg-white border-r border-slate-200 p-4",children:r.jsx("nav",{className:"space-y-1",children:m.map(x=>r.jsxs("button",{onClick:()=>t(x.id),className:`w-full flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ${l===x.id?"bg-blue-100 text-blue-700":"text-slate-600 hover:bg-slate-100"}`,children:[x.icon,r.jsx("span",{children:x.label})]},x.id))})}),r.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:y()})]})]})},qo=({icon:l,title:t,children:s})=>r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-full mr-4",children:l}),r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:t})]}),r.jsx("div",{className:"text-slate-600 space-y-3 text-sm leading-relaxed prose prose-sm max-w-none prose-ul:my-2 prose-li:my-1 prose-p:my-2",children:s})]}),q1=()=>r.jsxs("div",{className:"h-full flex flex-col bg-slate-200 p-6 overflow-y-auto",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6 text-center",children:"Hng dn S dng AI Assistant"}),r.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[r.jsxs(qo,{icon:r.jsx(Bp,{className:"w-6 h-6"}),title:"Lung lm vic Tng th",children:[r.jsx("p",{children:"ng dng c thit k theo quy trnh 3 bc logic  chuyn ha chin lc thnh kt qu c th o lng:"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"T duy Chin lc (Bn ):"})," S dng ",r.jsx("strong",{children:"Bn  Chin lc"}),'  xc nh cc yu t nh hng v chn on "sc khe" tng th ca doanh nghip. y l bc nh hng v m.']}),r.jsxs("li",{children:[r.jsx("strong",{children:"Cu trc & Phn nhim (Ma trn):"})," Dng ",r.jsx("strong",{children:"Ma trn Phn nhim"}),"  din gii chin lc thnh mt danh sch cng vic chi tit v phn cng trch nhim (ai lm g, ai quyt nh) cho tng phng ban, c nhn."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Thc thi & o lng (Mc tiu):"})," Vi ",r.jsx("strong",{children:"Qun l Mc tiu"}),", bn t ra cc KPI c th cho nhn vin da trn cc nhim v  c giao trong ma trn, v theo di tin  thc hin chng."]})]})]}),r.jsxs(qo,{icon:r.jsx(Gp,{}),title:"1. Bn  Chin lc - T T duy n nh hng",children:[r.jsx("h4",{children:"Mc ch:"}),r.jsx("p",{children:"Cung cp mt khung t duy trc quan  bn phn tch mi trng kinh doanh, xc nh cc yu annhr hng v chn on cc kha cnh ct li ca doanh nghip."}),r.jsx("h4",{children:"Cch s dng:"}),r.jsxs("ol",{className:"list-decimal list-inside",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Khm ph & Ghi ch:"})," Nhp vo mt trong ",r.jsx("strong",{children:"18 Yu t"})," hoc ",r.jsx("strong",{children:"6 Bin s"})," trn bn . Cc cu hi gi  s xut hin  bng bn phi. Hy in cu tr li v ghi ch ca bn vo ."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Tn dng C vn AI:"}),r.jsxs("ul",{className:"list-disc list-inside ml-4",children:[r.jsx("li",{children:"t cu hi trc tip cho AI trong khung chat  c phn tch su hn v yu t bn  chn."}),r.jsxs("li",{children:["S dng nt ",r.jsx("strong",{children:'"AI in D liu"'}),"  AI t ng nghin cu v in thng tin v mt cng ty hoc ch  c th."]})]})]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Nhn Bo co Phn tch:"})," Sau khi  c d liu, hy s dng cc nt ",r.jsx("strong",{children:'"AI Phn tch 18 Yu t"'}),", ",r.jsx("strong",{children:'"AI Chn on 6 Bin s"'}),", v ",r.jsx("strong",{children:'"AI Tng hp Bng Chin lc"'}),". AI s to ra cc bo co chi tit, gip bn nhn din cc trng tm v mu thun chin lc."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"To K hoch Hnh ng:"})," T cc phn tch ca AI, bn c th nhanh chng to ra cc k hoch hnh ng cp cao bng cch nhp vo nt ",r.jsx("strong",{children:'"+ To Sng kin"'}),'. Cc sng kin ny s c qun l trong tab "K hoch Hnh ng".']})]})]}),r.jsxs(qo,{icon:r.jsx(qu,{}),title:"2. Ma trn Phn nhim - C th ha Cng vic",children:[r.jsx("h4",{children:"Mc ch:"}),r.jsx("p",{children:"Xy dng mt h thng phn cng trch nhim r rng (theo m hnh QTKBP) cho ton b cng ty, m bo mi nhim v u c ngi quyt nh, thc hin, v kim sot."}),r.jsx("h4",{children:"Lung lm vic vi AI:"}),r.jsxs("ol",{className:"list-decimal list-inside",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Cung cp Bi cnh:"})," Ti bng iu khin AI bn phi, in cc thng tin ban u v doanh nghip, quy trnh chnh v k vng ca bn."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"To Danh sch Nhim v:"})," Nhn nt ",r.jsx("strong",{children:'"Bc 1: AI Gi  Nhim v"'}),'. AI s phn tch bi cnh v to ra mt danh sch cng vic c phn cp chi tit. Bn c th xem v chnh sa danh sch ny trong tab "Danh sch Nhim v".']}),r.jsxs("li",{children:[r.jsx("strong",{children:"Phn nhim cho Phng ban:"})," Nhn ",r.jsx("strong",{children:'"Bc 2: AI Phn nhim Chc nng"'}),'. Mt ca s s hin ra, cho php bn yu cu AI gi  cc quy tc phn cng. Sau khi xc nhn, AI s to ra ma trn phn cng cho cc phng ban, hin th trong tab "Ma trn Cp Cng ty".']})]}),r.jsx("h4",{children:"Qun l Phin bn (Rt quan trng!):"}),r.jsx("p",{children:'Tab "Qun l Phin bn" l trung tm iu phi ca bn. Hy hiu r 3 hnh ng chnh:'}),r.jsxs("ul",{className:"list-disc list-inside ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Lu:"})," Chp li ton b trng thi hin ti ca ma trn (danh sch nhim v, phn cng...) v lu li vi mt ci tn."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Ti:"})," Ly mt phin bn  lu  xem li hoc tip tc chnh sa. Hnh ng ny s ",r.jsx("strong",{children:"ghi "})," ton b d liu bn ang lm vic."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Kch hot:"})," nh du mt phin bn l ",r.jsx("strong",{children:"chnh thc"})," cho ton b ng dng. Ch c ",r.jsx("strong",{children:"mt phin bn c kch hot"})," ti mt thi im. Chc nng ",r.jsx("strong",{children:"Qun l Mc tiu"})," s ch hot ng da trn phin bn  c kch hot ny."]})]})]}),r.jsxs(qo,{icon:r.jsx(Vu,{}),title:"3. Qun l Mc tiu - o lng Hiu sut",children:[r.jsx("h4",{children:"iu kin tin quyt:"}),r.jsxs("p",{children:["Bn ",r.jsx("strong",{children:"bt buc"})," phi c mt phin bn Ma trn Phn nhim  c ",r.jsx("strong",{children:"Kch hot"}),'. Module ny cn bit nhim v no c giao cho ai (vai tr "T")  bn c th thit lp mc tiu.']}),r.jsx("h4",{children:"Cch s dng:"}),r.jsxs("ol",{className:"list-decimal list-inside",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Chn Nhn vin v Nhim v:"}),' Trong tab "Thit lp Mc tiu", chn phng ban v nhn vin. Danh sch cc nhim v m nhn vin  c vai tr ',r.jsx("strong",{children:'"T" (Thc hin)'})," s hin ra. Hy chn mt nhim v c th."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"To Mc tiu (Objective):"}),' Nhn nt "Thm Mc tiu cho Nhim v ny". Mt mc tiu mi s c to, lin kt vi nhim v bn  chn. Bn c th sa li tn mc tiu cho r rng hn.']}),r.jsxs("li",{children:[r.jsx("strong",{children:"Thm Kt qu Then cht (KPIs):"})," Vi mi mc tiu, hy thm cc ch s  o lng. Bn c th chn t th vin c sn hoc nhn ",r.jsx("strong",{children:'"AI Gi  KPI"'}),'  AI  xut cc ch s theo tiu ch SMART. ng qun in gi tr "Ban u" v "Mc tiu".']})]}),r.jsx("h4",{children:"Theo di v Bo co:"}),r.jsxs("ul",{className:"list-disc list-inside ml-4",children:[r.jsxs("li",{children:["S dng tab ",r.jsx("strong",{children:'"Theo di Tin "'}),'  cp nht gi tr thc t ("check-in") cho cc KPI ca bn theo thi gian.']}),r.jsxs("li",{children:["Tab ",r.jsx("strong",{children:'"Bng tng hp"'})," cung cp cc biu  v bng xp hng, cho bn ci nhn trc quan v hiu sut ca c nhn, phng ban v ton cng ty."]})]})]})]})]}),Xu="is_authenticated",V1=(l,t)=>l==="admin"&&t==="admin"?(localStorage.setItem(Xu,"true"),!0):!1,B1=()=>{localStorage.removeItem(Xu)},P1=()=>localStorage.getItem(Xu)==="true",z1=({onLoginSuccess:l})=>{const[t,s]=w.useState("admin"),[o,u]=w.useState("admin"),[d,m]=w.useState(""),y=x=>{x.preventDefault(),m(""),V1(t,o)?l():m("Tn ng nhp hoc mt khu khng ng.")};return r.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-slate-100",children:r.jsxs("div",{className:"w-full max-w-sm p-8 space-y-6 bg-white rounded-lg shadow-md",children:[r.jsx("img",{src:lx,alt:"ASCO Logo",className:"w-32 mx-auto"}),r.jsx("h1",{className:"text-2xl font-bold text-center text-blue-800",children:"AI Assistant Login"}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Tn ng nhp"}),r.jsx("input",{type:"text",value:t,onChange:x=>s(x.target.value),className:"w-full px-3 py-2 mt-1 border border-slate-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Mt khu"}),r.jsx("input",{type:"password",value:o,onChange:x=>u(x.target.value),className:"w-full px-3 py-2 mt-1 border border-slate-300 rounded-md"})]}),d&&r.jsx("p",{className:"text-sm text-red-600",children:d}),r.jsxs("div",{className:"text-xs text-slate-500",children:[r.jsx("p",{children:"Demo credentials:"}),r.jsxs("p",{children:["Username: ",r.jsx("strong",{children:"admin"})]}),r.jsxs("p",{children:["Password: ",r.jsx("strong",{children:"admin"})]})]}),r.jsx("button",{type:"submit",className:"w-full py-2 px-4 bg-blue-800 text-white font-semibold rounded-md hover:bg-blue-900",children:"ng nhp"})]})]})})},Ag="ai_advisor_chat_history",O1=()=>{try{const l=localStorage.getItem(Ag);return l?JSON.parse(l).sort((s,o)=>o.timestamp-s.timestamp):[]}catch(l){return console.error("Failed to load chat history:",l),[]}},Eu=l=>{try{const t=JSON.stringify(l);localStorage.setItem(Ag,t)}catch(t){console.error("Failed to save chat history:",t),alert("Li khi lu lch s tr chuyn. C th dung lng lu tr trnh duyt  y.")}},Y1=({history:l,activeConversationId:t,onSelect:s,onNew:o,onDelete:u})=>{const d=m=>{const y=new Date(m),x=new Date,g=new Date;return g.setDate(g.getDate()-1),y.toDateString()===x.toDateString()?`Hm nay, ${y.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}`:y.toDateString()===g.toDateString()?`Hm qua, ${y.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}`:y.toLocaleDateString("vi-VN")};return r.jsxs("aside",{className:"w-72 bg-slate-100 flex flex-col flex-shrink-0 border-r border-slate-300",children:[r.jsxs("div",{className:"h-16 flex items-center justify-between p-4 border-b border-slate-300",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bp,{className:"w-6 h-6 text-slate-600"}),r.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Lch s"})]}),r.jsx("button",{onClick:o,className:"p-2 rounded-md hover:bg-slate-200",title:"Cuc tr chuyn mi",children:r.jsx(Qn,{className:"w-5 h-5 text-slate-700"})})]}),r.jsxs("nav",{className:"flex-1 p-2 space-y-1 overflow-y-auto",children:[l.map(m=>{const y=t===m.id;return r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{onClick:()=>s(m.id),className:`w-full text-left p-2.5 rounded-md transition-colors text-sm truncate ${y?"bg-blue-200 text-blue-800 font-semibold":"text-slate-700 hover:bg-slate-200"}`,children:[r.jsx("p",{className:"truncate",children:m.title}),r.jsx("p",{className:`text-xs mt-1 ${y?"text-blue-700":"text-slate-500"}`,children:d(m.timestamp)})]}),r.jsx("button",{onClick:x=>{x.stopPropagation(),window.confirm("Bn c chc mun xa cuc tr chuyn ny khng?")&&u(m.id)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded-full text-slate-500 hover:bg-red-100 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",title:"Xa cuc tr chuyn",children:r.jsx(Wt,{className:"w-4 h-4"})})]},m.id)}),l.length===0&&r.jsx("p",{className:"text-center text-sm text-slate-500 p-4",children:"Cha c cuc tr chuyn no."})]})]})},Eg=window.SpeechRecognition||window.webkitSpeechRecognition,Rp=!!Eg,K1=()=>{var I;const[l,t]=w.useState([]),[s,o]=w.useState(null),[u,d]=w.useState(""),[m,y]=w.useState(!1),[x,g]=w.useState(!1),[v,b]=w.useState(null),[N,C]=w.useState(!1),_=w.useRef(null),E=w.useRef(""),j=w.useRef(null),A=w.useRef(null);w.useEffect(()=>{const D=O1();t(D),D.length>0&&!s&&o(D[0].id)},[]);const H=((I=l.find(D=>D.id===s))==null?void 0:I.messages)||[],q=()=>{var D;(D=A.current)==null||D.scrollIntoView({behavior:"smooth"})};w.useEffect(q,[H,m]),w.useEffect(()=>()=>{_.current&&(_.current.stop(),_.current=null)},[]);const G=async()=>{var ie;if(!u.trim()&&!v||m)return;const D=u,F={role:"user",content:D};d(""),y(!0);let le=s,oe=[...l];if(le)oe=l.map(te=>te.id===le?{...te,messages:[...te.messages,F],timestamp:Date.now()}:te);else{const te={id:`convo-${Date.now()}`,title:D.substring(0,40)+(D.length>40?"...":""),timestamp:Date.now(),messages:[F]};oe=[te,...l],le=te.id,o(le)}oe.sort((te,de)=>de.timestamp-te.timestamp),t(oe),Eu(oe);let O="";if(x){const te=xg();if(te){const de=["Di y l d liu t ma trn phn nhim hin ti ca ngi dng:"];de.push(`- Cc phng ban: ${te.departments.map(pe=>pe.name).join(", ")}.`),de.push(`- Cc nhn s: ${te.roles.map(pe=>pe.name).join(", ")}.`),de.push(`- Danh sch cng vic v phn cng:
${te.generatedTaskMarkdown}`),O=de.join(`
`)}else O="Khng c d liu ma trn no c kch hot. Hy tr li da trn kin thc chung."}const ne=(((ie=oe.find(te=>te.id===le))==null?void 0:ie.messages)||[]).map(te=>te.role==="user"?`[NGI DNG HI]: '${te.content}'`:te.role==="ai"?`[AI TR LI]:
${te.content}`:"").join(`

`),ue=`[NG VAI]: Bn l mt c vn AI chuyn nghip, hu ch, chuyn v qun tr doanh nghip v ma trn phn nhim.
${x?`[BI CNH D LIU T NG DNG]:
${O}
---`:""}
${v?`[TI LIU THAM KHO]: Ngi dng  nh km file '${v.name}'. Hy s dng ni dung file ny lm ngun thng tin chnh  tr li.`:""}
[LCH S HI THOI]:
${ne}
---
[NHIM V]: Da vo bi cnh v lch s hi thoi (nu c), hy tr li cu hi sau ca ngi dng mt cch chi tit v chuyn nghip.
[CU HI CA NGI DNG]: ${D}`,me=await hg(ue,v??void 0);b(null);const R={role:"ai",content:me,isMarkdown:!0},J=oe.map(te=>te.id===le?{...te,messages:[...te.messages,R]}:te);t(J),Eu(J),y(!1)},P=()=>{o(null)},V=D=>{const F=l.filter(le=>le.id!==D);t(F),Eu(F),s===D&&o(F.length>0?F[0].id:null)},k=()=>{var D;if(N){(D=_.current)==null||D.stop();return}if(!Rp){alert("Trnh duyt ca bn khng h tr nhn dng ging ni.");return}try{const F=new Eg;_.current=F,E.current=u,F.continuous=!0,F.interimResults=!0,F.lang="vi-VN",F.onstart=()=>{console.log("Speech recognition active")},F.onresult=le=>{const oe=Array.from(le.results).map(ee=>ee[0].transcript).join(""),O=E.current.trim();d((O?O+" ":"")+oe.trim())},F.onend=()=>{C(!1),_.current=null,E.current=""},F.onerror=le=>{console.error("Speech recognition error",le.error),C(!1),le.error==="not-allowed"||le.error==="service-not-allowed"?alert("Quyn truy cp micro  b t chi. Vui lng cho php trong ci t trnh duyt ca bn v m bo bn ang dng HTTPS."):le.error==="no-speech"?console.warn("No speech detected."):alert(`Li nhn dng ging ni: ${le.error}`)},F.start(),C(!0)}catch(F){console.error("Failed to start speech recognition:",F),C(!1),alert("Khng th bt u nhn dng ging ni. Hy m bo bn ang dng kt ni an ton (HTTPS) v  cp quyn truy cp micro.")}},X=()=>{var D;(D=j.current)==null||D.click()},Z=D=>{D.target.files&&D.target.files.length>0&&(b(D.target.files[0]),D.target.value="")},se=({msg:D})=>{const F=D.role==="user",le=D.isMarkdown?ta(D.content):D.content.replace(/\n/g,"<br />");return r.jsx("div",{className:`flex w-full my-2 ${F?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`max-w-2xl p-3 rounded-lg shadow-sm ${F?"bg-blue-600 text-white":"bg-white text-slate-800 border"}`,children:r.jsx("div",{className:"prose prose-sm max-w-none prose-p:my-1",dangerouslySetInnerHTML:{__html:le}})})})};return r.jsxs("div",{className:"flex h-full w-full bg-slate-200",children:[r.jsx(Y1,{history:l,activeConversationId:s,onSelect:D=>o(D),onNew:P,onDelete:V}),r.jsxs("div",{className:"flex flex-col flex-1",children:[r.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-slate-200 flex-shrink-0 bg-white",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(en,{}),r.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"C vn AI"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-slate-600",children:"S dng D liu ng dng:"}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:x,onChange:D=>g(D.target.checked),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-slate-200 rounded-full peer peer-focus:ring-2 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),r.jsxs("main",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[H.length===0&&!m&&r.jsxs("div",{className:"text-center text-slate-500 pt-16",children:[r.jsx("p",{className:"text-lg",children:"t cu hi cho C vn AI  c h tr."}),r.jsx("p",{className:"text-sm mt-2",children:'Bt "S dng D liu ng dng"  hi v ma trn phn nhim  c kch hot ca bn.'})]}),H.map((D,F)=>r.jsx(se,{msg:D},F)),m&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"p-3 rounded-lg shadow-sm bg-white border text-slate-500 italic animate-pulse",children:"AI ang suy ngh..."})}),r.jsx("div",{ref:A})]}),r.jsxs("footer",{className:"p-4 border-t border-slate-200 bg-white flex-shrink-0",children:[v&&r.jsx("div",{className:"max-w-4xl mx-auto mb-2 text-sm",children:r.jsxs("div",{className:"flex items-center justify-between bg-slate-100 p-2 rounded-md",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hs,{className:"w-4 h-4 text-slate-600"}),r.jsx("span",{className:"font-semibold text-slate-700 truncate",children:v.name})]}),r.jsx("button",{onClick:()=>b(null),className:"font-bold text-red-500 hover:text-red-700 ml-2 px-2 text-lg",children:""})]})}),r.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[r.jsx("textarea",{value:u,onChange:D=>d(D.target.value),onKeyDown:D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),G())},placeholder:N?"ang lng nghe...":"t cu hi v chin lc, qun tr, hoc ma trn phn nhim...",rows:2,className:"w-full p-3 pl-24 pr-14 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 resize-none",disabled:m}),r.jsx("div",{className:"absolute right-2 bottom-2 flex space-x-1",children:r.jsx("button",{onClick:G,disabled:m||!u.trim()&&!v,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed","aria-label":"Send message",children:r.jsx(Gu,{})})}),r.jsxs("div",{className:"absolute left-2 bottom-2 flex space-x-1",children:[r.jsx("input",{type:"file",ref:j,className:"hidden",onChange:Z}),r.jsx("button",{onClick:X,disabled:m,className:"p-2 text-slate-500 rounded-lg hover:bg-slate-100 disabled:text-slate-300",title:"nh km file","aria-label":"Attach file",children:r.jsx(hs,{})}),r.jsx("button",{onClick:k,disabled:m,className:`p-2 rounded-lg transition-colors ${N?"bg-red-500 text-white animate-pulse":"text-slate-500 hover:bg-slate-100"} disabled:text-slate-300 disabled:hover:bg-transparent disabled:cursor-not-allowed`,title:Rp?N?"Dng ghi m":"Bt u ghi m":"Trnh duyt khng h tr nhn dng ging ni","aria-label":N?"Stop listening":"Start listening",children:r.jsx(vx,{})})]})]})]})]})]})},F1=()=>{const[l,t]=w.useState("Admin"),[s,o]=w.useState("Qun tr vin"),[u,d]=w.useState("admin@asco.com.vn"),[m,y]=w.useState("0123456789"),[x,g]=w.useState(null),[v,b]=w.useState("idle"),N=w.useRef(null),C=()=>{b("saving"),setTimeout(()=>{b("success"),setTimeout(()=>{b("idle")},3e3)},1e3)},_=j=>{var H;const A=(H=j.target.files)==null?void 0:H[0];if(A){const q=new FileReader;q.onloadend=()=>{g(q.result)},q.readAsDataURL(A)}},E=()=>{var j;(j=N.current)==null||j.click()};return r.jsxs("div",{className:"h-full flex flex-col bg-slate-200 p-6",children:[r.jsx("header",{className:"flex-shrink-0 bg-white p-4 border-b border-slate-200 rounded-t-lg",children:r.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"H s ca bn"})}),r.jsx("main",{className:"flex-1 bg-white p-6 rounded-b-lg shadow-sm",children:r.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"file",ref:N,onChange:_,accept:"image/*",className:"hidden"}),x?r.jsx("img",{src:x,alt:"Profile",className:"w-24 h-24 rounded-full object-cover"}):r.jsx(Oo,{className:"w-24 h-24 text-slate-400"}),r.jsx("button",{onClick:E,className:"absolute bottom-0 right-0 bg-white p-1.5 rounded-full shadow border hover:bg-slate-100","aria-label":"Sa nh i din",children:r.jsx(ri,{className:"w-4 h-4 text-slate-600"})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold",children:l}),r.jsx("p",{className:"text-slate-500",children:s})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"H v Tn"}),r.jsx("input",{type:"text",value:l,onChange:j=>t(j.target.value),className:"w-full mt-1 p-2 border rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Chc danh"}),r.jsx("input",{type:"text",value:s,onChange:j=>o(j.target.value),className:"w-full mt-1 p-2 border rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Email"}),r.jsx("input",{type:"email",value:u,onChange:j=>d(j.target.value),className:"w-full mt-1 p-2 border rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"S in thoi"}),r.jsx("input",{type:"text",value:m,onChange:j=>y(j.target.value),className:"w-full mt-1 p-2 border rounded-md"})]})]}),r.jsxs("div",{className:"flex justify-end items-center pt-4 gap-4",children:[v==="success"&&r.jsxs("div",{className:"text-green-600 flex items-center gap-2 transition-opacity duration-300",role:"status",children:[r.jsx(Vu,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:" lu thnh cng!"})]}),r.jsx("button",{onClick:C,disabled:v==="saving",className:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-wait",children:v==="saving"?"ang lu...":"Lu thay i"})]})]})})]})},J1=()=>{const[l,t]=w.useState(P1()),[s,o]=w.useState("matrix"),[u,d]=w.useState(!1),m=w.useRef(null),[y,x]=w.useState(im),[g,v]=w.useState(sm),[b,N]=w.useState([]),[C,_]=w.useState(""),[E,j]=w.useState({}),[A,H]=w.useState({}),[q,G]=w.useState([]),[P,V]=w.useState(null);w.useEffect(()=>{const D=xg();D&&(k(D),console.log("Loaded active matrix from storage.")),G(la()),V(gg())},[]);const k=D=>{N(D.tasks||[]),j(D.companyAssignments||{}),H(D.departmentalAssignments||{}),_(D.generatedTaskMarkdown||""),x(D.departments||im),v(D.roles||sm)},X=D=>{yg(D),V(D)};if(w.useEffect(()=>{const D=F=>{m.current&&!m.current.contains(F.target)&&d(!1)};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[m]),!l)return r.jsx(z1,{onLoginSuccess:()=>t(!0)});const Z=()=>{B1(),t(!1)},se=()=>{switch(s){case"cockpit":return r.jsx(Ap,{});case"matrix":return r.jsx(d1,{tasks:b,setTasks:N,departments:y,setDepartments:x,roles:g,setRoles:v,generatedTaskMarkdown:C,setGeneratedTaskMarkdown:_,companyMatrixAssignments:E,setCompanyMatrixAssignments:j,departmentalAssignments:A,setDepartmentalAssignments:H,versions:q,setVersions:G,loadVersionData:k,activeVersionId:P,setActiveVersionId:X});case"goals":return r.jsx(M1,{departments:y,roles:g,tasks:b,companyMatrixAssignments:E,departmentalAssignments:A});case"advisor":return r.jsx(K1,{});case"guide":return r.jsx(q1,{});case"settings":return r.jsx(G1,{});case"user-profile":return r.jsx(F1,{});default:return r.jsx(Ap,{})}},I=[{id:"cockpit",label:"Bn  Chin lc",icon:r.jsx(Gp,{})},{id:"matrix",label:"Ma trn Phn nhim",icon:r.jsx(qu,{}),isHighlighted:!0},{id:"goals",label:"Qun l Mc tiu",icon:r.jsx(Vu,{})},{id:"advisor",label:"C vn AI",icon:r.jsx(en,{})},{id:"guide",label:"Hng dn",icon:r.jsx(Hp,{})},{id:"settings",label:"Ci t AI",icon:r.jsx(qp,{})}];return r.jsxs("div",{className:"flex h-screen w-screen bg-slate-200 text-slate-900",children:[r.jsxs("aside",{className:"w-64 bg-slate-100 flex flex-col flex-shrink-0 border-r border-slate-300",children:[r.jsx("div",{className:"h-16 flex items-center justify-center p-4 border-b border-slate-300",children:r.jsx("h1",{className:"text-2xl font-bold text-blue-800",children:"ASCO AI"})}),r.jsx("nav",{className:"flex-1 p-2 space-y-1",children:I.map(D=>{const F=s===D.id,le=D.isHighlighted;return r.jsxs("button",{onClick:()=>o(D.id),className:`w-full flex items-center px-3 py-2.5 rounded-md text-sm font-medium transition-colors ${F?"bg-blue-600 text-white shadow-md":le?"bg-blue-100 text-blue-700 font-bold hover:bg-blue-200":"text-slate-700 hover:bg-slate-300"}`,children:[r.jsx("div",{className:`w-5 h-5 mr-3 ${F?"text-white":le?"text-blue-500":"text-slate-500"}`,children:D.icon}),r.jsx("span",{children:D.label})]},D.id)})}),r.jsx("div",{className:"p-4 border-t border-slate-300",children:r.jsxs("div",{className:"relative",ref:m,children:[r.jsx("button",{onClick:()=>d(D=>!D),className:"w-full p-3 bg-slate-200 rounded-lg hover:bg-slate-300 transition-colors text-left",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Oo,{className:"w-10 h-10 text-slate-500 flex-shrink-0"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-bold text-slate-800",children:"Admin"}),r.jsx("p",{className:"text-xs text-slate-600",children:"Qun tr vin"})]})]})}),u&&r.jsx("div",{className:"absolute bottom-full mb-2 w-full bg-white rounded-md shadow-lg border border-slate-200 z-10",children:r.jsxs("div",{className:"p-2",children:[r.jsxs("button",{onClick:()=>{o("user-profile"),d(!1)},className:"w-full text-left flex items-center px-3 py-2 text-sm text-slate-700 rounded-md hover:bg-slate-100",children:[r.jsx(Oo,{className:"w-5 h-5 mr-3 text-slate-500"}),r.jsx("span",{children:"H s ca bn"})]}),r.jsx("div",{className:"border-t my-1 border-slate-200"}),r.jsxs("button",{onClick:()=>{Z(),d(!1)},className:"w-full text-left flex items-center px-3 py-2 text-sm text-red-600 rounded-md hover:bg-red-50 hover:text-red-700",children:[r.jsx(bx,{className:"w-5 h-5 mr-3"}),r.jsx("span",{children:"ng xut"})]})]})})]})})]}),r.jsx("main",{className:"flex-1",children:se()})]})},_g=document.getElementById("root");if(!_g)throw new Error("Could not find root element to mount to");const Q1=ex.createRoot(_g);Q1.render(r.jsx(Up.StrictMode,{children:r.jsx(J1,{})}));
